<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ape_li</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="ape_li">
<meta property="og:url" content="https://apelisun.github.io/page/2/index.html">
<meta property="og:site_name" content="ape_li">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ape_li">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="ape_li" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
				<img lazy-src="/img/header.jpg" class="js-avatar">
			
		</a>

		<hgroup>
			<h1 class="header-author"><a href="/">ape_li</a></h1>
		</hgroup>

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">ä¸»é¡µ</a></li>
				        
							<li><a href="/archives">ç›®å½•</a></li>
				        
						</ul>
					</nav>
					<nav class="half-header-menu">
						<a class="hide">Home</a>
						<a>Tags</a>
						<a>Links</a>
						<a>About</a>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
						<!-- music -->
						
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/B-%E6%A0%91/" style="font-size: 10px;">B+æ ‘</a> <a href="/tags/area/" style="font-size: 10px;">area</a> <a href="/tags/collection/" style="font-size: 10px;">collection</a> <a href="/tags/gitee-command/" style="font-size: 10px;">gitee_command</a> <a href="/tags/homework/" style="font-size: 10px;">homework</a> <a href="/tags/index/" style="font-size: 10px;">index</a> <a href="/tags/interview/" style="font-size: 10px;">interview</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/meet-DB/" style="font-size: 10px;">meet DB</a> <a href="/tags/msql/" style="font-size: 10px;">msql</a> <a href="/tags/mysql/" style="font-size: 20px;">mysql</a> <a href="/tags/procedure/" style="font-size: 10px;">procedure</a> <a href="/tags/view/" style="font-size: 10px;">view</a> <a href="/tags/%E4%B8%AA%E4%BA%BA%E5%AE%9E%E7%94%A8%E8%A3%85b%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">ä¸ªäººå®ç”¨è£…bæŠ€å·§</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">æ•°æ®åº“åŸºç¡€</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/">github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">I&#39;m a developer.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/header.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/archives">ç›®å½•</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-mysql3" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/08/09/mysql3/" class="article-date">
  	<time datetime="2022-08-09T13:23:13.000Z" itemprop="datePublished">2022-08-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/09/mysql3/">
        mysql3
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="DBè®¾è®¡"><a href="#DBè®¾è®¡" class="headerlink" title="DBè®¾è®¡"></a>DBè®¾è®¡</h1><blockquote>
<p>æŒ‡å¯¼dbè®¾è®¡çš„æ€æƒ³,é¿å…è¡¨ä¸­å‡ºç°å¤§é‡çš„å†—ä½™çš„æ•°æ®.ä½†æ˜¯å®é™…å¼€å‘ä¸­è¡¨ä¸­æ˜¯å…è®¸å‡ºç°å†—ä½™çš„å­—æ®µçš„.</p>
<p>å†—ä½™æ•°æ®çš„å¥½å¤„ - å®‰å…¨,æ–¹ä¾¿æŸ¥è¯¢.åå¤„-&gt;deleteå’Œupdateæ“ä½œ</p>
</blockquote>
<blockquote>
<ol>
<li><p>1NF - ç¬¬ä¸€èŒƒå¼-ä¿è¯åˆ—çš„åŸå­æ€§,ä¿è¯åˆ—ä¸å¯å†åˆ‡å‰²</p>
<p>s_emp(id,name) - å‘ç°nameä¸å…·å¤‡åŸå­æ€§,å¯ä»¥è¢«å†æ¬¡åˆ‡å‰²(fist_name,last_name)</p>
<p>s_ord(id,address) - addressæ˜¾ç¤ºä¸ºçœå¸‚åŒº - æ±Ÿè‹çœè‹å·å¸‚å›­åŒº</p>
<p>addresså†æ¬¡åˆ†æˆ(province,city,area)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä¸»è¦æ˜¯ä¸ºäº†æŸ¥è¯¢.</span><br><span class="line"></span><br><span class="line">select * from s_ord where address like '%è‹å·%';</span><br><span class="line"></span><br><span class="line">select * from s_ord where city = 'è‹å·';</span><br><span class="line"></span><br><span class="line">-- address,cityåŠ ç´¢å¼•.</span><br><span class="line">-- æ¨¡ç³ŠæŸ¥è¯¢å¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆ.ä½†æ˜¯ç²¾ç¡®åŒ¹é…æ˜¯èµ°ç´¢å¼•çš„.</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>2NF - åŸºäº1NF,è¦æ±‚éå…³é”®åˆ—è¦å…¨éƒ¨ä¾èµ–äºå…³é”®åˆ—.  ä¸å­˜åœ¨éå…³é”®åˆ—éƒ¨åˆ†ä¾èµ–äºå…³é”®åˆ—</p>
<p>å…³é”®åˆ— - ä¸»é”®åˆ— - éç©ºä¸”å”¯ä¸€ - tableä¸­çš„idè®¾ç½®æˆä¸»é”®åˆ—.</p>
<p>student(sid,sname,cid,cname);//å…³é”®åˆ—(sid,cid) - ç¡®å®šå”¯ä¸€çš„å…ƒç»„(è¡Œ) - å¤åˆä¸»é”®</p>
<p>sname,cname - éå…³é”®åˆ—.</p>
<p>(sid,cid) -&gt; å”¯ä¸€ç¡®å®š -&gt; sname/cname</p>
<p>sid -&gt; sname,cid -&gt; cname</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">student(sid,sname)</span><br><span class="line">course(cid,cname);</span><br><span class="line">sc(sid,cid,kpi);//(sid,cid) -&gt; kpi</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>3NF- åŸºäº2NF,è¦æ±‚éå…³é”®åˆ—ä¸èƒ½ä¼ é€’ä¾èµ–äºå…³é”®åˆ—.</p>
<p>student(sid,sname,uid,uv_name,u_phone);</p>
<p>u_phoneä¼ é€’ä¾èµ–äºsid - <code>åŸå› sid -&gt; uid -&gt; u_phone</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">student(sid,sname,uid);//uidå°±æ˜¯foreign key å¤–é”®åˆ—</span><br><span class="line">university(uid,u_name,u_phone);</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><blockquote>
<ol>
<li>ç”¨æˆ·è¡¨t_user</li>
<li>è§†é¢‘è¡¨t_video</li>
<li>è¯„è®ºè¡¨å’Œå›å¤è¡¨è®¾è®¡</li>
</ol>
</blockquote>
<blockquote>
<p>ç”¨æˆ·å¯¹è§†é¢‘è¿›è¡Œè¯„è®º(t_comment)å’Œå›å¤(t_repy)çš„åœºæ™¯:</p>
<p>tom å‘å¸ƒäº† æç¬‘çš„è§†é¢‘</p>
<p>admin è¯„è®º:  ğŸ˜ğŸ˜</p>
<p>â€‹             liè¯„è®ºadmin: ä½ ç¬‘ä»€ä¹ˆ!</p>
<p>â€‹			 leiå›å¤@li: ç®¡ä½ ä»€ä¹ˆäº‹æƒ…!</p>
<p>â€‹			 xå›å¤@li: ä½ æƒ³è¡¨è¾¾ä»€ä¹ˆ!</p>
<p>â€‹			 yå›å¤@x: â€¦.</p>
<p>â€‹			 k è¯„è®ºadmin:ä½ ç¬‘ä»€ä¹ˆ!</p>
<p>jack  è¯„è®º: ğŸ˜„</p>
</blockquote>
<p><code>t_user</code></p>
<table>
<thead>
<tr>
<th>id</th>
<th>usernmae</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>tom</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>admin</td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>li</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>lei</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>x</td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>y</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>k</td>
<td></td>
</tr>
</tbody></table>
<p><code>t_video</code></p>
<p>ä¸€ä¸ªç”¨æˆ·å¯ä»¥å‘å¸ƒå¤šä¸ªè§†é¢‘</p>
<table>
<thead>
<tr>
<th>id</th>
<th>video</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>ä½©æ´›è¥¿</td>
<td>1</td>
</tr>
</tbody></table>
<p><code>t_comment</code></p>
<table>
<thead>
<tr>
<th>id</th>
<th>video_id</th>
<th>content</th>
<th>comment_id</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>ğŸ˜ğŸ˜</td>
<td></td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>ä½ ç¬‘ä»€ä¹ˆ!</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>ä½ ç¬‘ä»€ä¹ˆ!</td>
<td>1</td>
<td>7</td>
</tr>
</tbody></table>
<p><code>t_reply</code></p>
<table>
<thead>
<tr>
<th>id</th>
<th>comment_id</th>
<th>conent</th>
<th>reply_id</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>2</td>
<td>ç®¡ä½ ä»€ä¹ˆäº‹æƒ…!</td>
<td></td>
<td>4</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>ä½ æƒ³è¡¨è¾¾ä»€ä¹ˆ!</td>
<td></td>
<td>5</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>â€¦</td>
<td>2</td>
<td>6</td>
</tr>
</tbody></table>
<h1 id="DDLè¯­è¨€"><a href="#DDLè¯­è¨€" class="headerlink" title="DDLè¯­è¨€"></a>DDLè¯­è¨€</h1><blockquote>
<p>Data Definition Language - æ•°æ®å®šä¹‰è¯­è¨€.</p>
<p>åŒ…æ‹¬çš„å‘½ä»¤:create drop alter comment rename truncate</p>
</blockquote>
<h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><blockquote>
<ol>
<li><p>æ•°å­—ç±»å‹</p>
<ul>
<li>æ•´æ•° - int/bigint</li>
<li>å°æ•° - float/double/decimal</li>
</ul>
<p><code>è¦ç‚¹</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">	id int(7)</span><br><span class="line">);</span><br><span class="line">æ­¤å¤„çš„7å¹¶ä¸æ˜¯ä»£è¡¨æ­¤åˆ—çš„æœ€å¤§é•¿åº¦.è¯¯åŒº:æœ€å¤§å¯ä¿å­˜çš„å€¼æ˜¯9999999</span><br><span class="line">å®é™…ä¸Šè¯¥åˆ—å¯ä»¥å­˜å‚¨çš„æœ€å¤§å€¼æ˜¯ç”±ç±»å‹å†³å®šäº†.</span><br><span class="line"></span><br><span class="line">é…ç½®zerofill  0å¡«å……</span><br><span class="line">create table t_type(</span><br><span class="line">	id int(7) zerofill</span><br><span class="line">);</span><br><span class="line">insert into t_type values(1);</span><br><span class="line"></span><br><span class="line">ä¸è¶³7ä½,ä¼šé‡‡ç”¨0æ¥å¡«å……</span><br><span class="line"></span><br><span class="line">+---------+</span><br><span class="line">| id      |</span><br><span class="line">+---------+</span><br><span class="line">| 0000001 |</span><br><span class="line">+---------+</span><br><span class="line"></span><br><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">	c1 float(5,2),</span><br><span class="line">  c2 double(5,2),</span><br><span class="line">  c3 decimal(5,2)</span><br><span class="line">);</span><br><span class="line">float(m,n) =&gt; mæ€»é•¿åº¦,nä»£è¡¨çš„å°æ•°ç‚¹</span><br><span class="line">insert into t_type(c1) values(12.345);</span><br><span class="line">mysql&gt; select * from t_type;</span><br><span class="line"></span><br><span class="line">-- å°æ•°ä¿ç•™2ä½,å¹¶ä¸”å››èˆäº”å…¥</span><br><span class="line">+-------+------+------+</span><br><span class="line">| c1    | c2   | c3   |</span><br><span class="line">+-------+------+------+</span><br><span class="line">| 12.35 | NULL | NULL |</span><br><span class="line">+-------+------+------+</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_type(c2) values(123.5); //ok</span><br><span class="line">mysql&gt; select * from t_type;</span><br><span class="line">+-------+--------+------+</span><br><span class="line">| c1    | c2     | c3   |</span><br><span class="line">+-------+--------+------+</span><br><span class="line">| 12.35 |   NULL | NULL |</span><br><span class="line">|  NULL | 123.50 | NULL |</span><br><span class="line">+-------+--------+------+</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_type(c2) values(1234.5);</span><br><span class="line"></span><br><span class="line">`åŸå› :1234.5 =&gt; 1234.50 å·²ç»è¶…è¿‡5ä½äº†`</span><br><span class="line">ERROR 1264 (22003): Out of range value for column 'c2' at row 1</span><br><span class="line"></span><br><span class="line">float/double =&gt; éæ ‡å‡†  decimalæ ‡å‡† - å¯¹ç²¾åº¦æœ‰ç‰¹åˆ«è¦æ±‚çš„</span><br><span class="line"></span><br><span class="line">insert into t_type(c3) values(123.589);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å…³äºæ—¥æœŸç±»å‹</p>
<p>date </p>
<p>datetime</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">  id int,</span><br><span class="line">	create_date date default now()</span><br><span class="line">);</span><br><span class="line">ERROR 1067 (42000): Invalid default value for 'create_date'</span><br><span class="line"></span><br><span class="line">å¦‚æœæŸä¸ªåˆ—æœŸæœ›é»˜è®¤å€¼æ˜¯now(),ä¸€å®šè¦è®¾ç½®æˆdatetime</span><br><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">  id int,</span><br><span class="line">	create_date datetime default now()</span><br><span class="line">);</span><br><span class="line">insert into t_type(id) values(1);</span><br><span class="line"></span><br><span class="line">-- æ»¡è¶³æ—¥æœŸèƒ½å¤Ÿæ”¯æŒçš„å­—ç¬¦ä¸²æ ¼å¼</span><br><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">  id int,</span><br><span class="line">	create_date date default '2012-09-08 12:12:12'</span><br><span class="line">);</span><br><span class="line">insert into t_type(id) values(1);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å­—ç¬¦ä¸²ç±»å‹</p>
<ul>
<li><p>charå’ŒvarcharåŒºåˆ«</p>
<p>char(n),varchar(n) =&gt; ä»£è¡¨çš„å­—ç¬¦çš„ä¸ªæ•°</p>
<p>åŒºåˆ«: charæ˜¯å®šé•¿,varcharæ˜¯å¯å˜é•¿.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">   s1 char(2),</span><br><span class="line">   s2 varchar(2)</span><br><span class="line">);</span><br><span class="line">insert into t_type(s1) values('ab');</span><br><span class="line"></span><br><span class="line">insert into t_type(s2) values('abc');</span><br><span class="line"></span><br><span class="line">char(2) =&gt; å®é™…å­˜å‚¨1ä¸ª'a',å®é™…æ¶ˆè€—äº†2ä¸ª</span><br><span class="line">varchar(2) =&gt; å‡è®¾'a',å®é™…ä»…ä»…æ¶ˆè€—äº†1ä¸ª,æœ€å¤§æ¶ˆè€—2ä¸ª.</span><br><span class="line">varcharæ›´åŠ èŠ‚çº¦ç©ºé—´.  charæ•ˆç‡ä¼šæ›´é«˜ä¸€ç‚¹ - ä¸æ¨èç”¨char</span><br><span class="line"></span><br><span class="line">-- oracleä¸­æ•°æ®ä¸­</span><br><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">   s1 char(2)</span><br><span class="line">);</span><br><span class="line">insert into t_type(s1) values('a');</span><br><span class="line"></span><br><span class="line">-- oracleæŸ¥è¯¢ä¸ºempty</span><br><span class="line">-- mysqlä¸­ç©ºç›´æ¥æ¯”è¾ƒçš„æ—¶å€™å‰”é™¤,å¤§å°å†™æ¯”è¾ƒéƒ½æ˜¯ä¸€æ ·çš„.</span><br><span class="line">select * from t_type where s1='a';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>text - 0-65 535 bytes - é•¿æ–‡æœ¬</p>
</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="çº¦æŸç±»å‹"><a href="#çº¦æŸç±»å‹" class="headerlink" title="çº¦æŸç±»å‹"></a>çº¦æŸç±»å‹</h2><blockquote>
<ol>
<li><p>ä¸»é”®çº¦æŸ primary key éç©ºä¸”å”¯ä¸€</p>
<p>ä¸»é”®åˆ—å¯ä»¥æ˜¯ç”±å¤šåˆ—å…±åŒç»„æˆ - ç¬¦åˆä¸»é”®åˆ—</p>
<p>ä½†æ˜¯è¡¨ä¸­åªèƒ½å‡ºç°ä¸€ä¸ªä¸»é”®</p>
</li>
<li><p>å¤–é”®çº¦æŸ foreign key </p>
<ul>
<li><p>å¤–é”®åˆ—å…è®¸ä¸ºnull</p>
</li>
<li><p>å¤–é”®åˆ—æ˜¯å¤šå‡ºç°åœ¨å¤šçš„ä¸€æ–¹ä¸­.å»ºç«‹è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»çš„</p>
</li>
<li><p>å¼€å‘ä¸­ä¸éœ€è¦è®¾ç½®å¤–é”® - é€ æˆè¡¨ä¸è¡¨ä¹‹é—´çš„è€¦åˆ. </p>
<p>è¡¨å’Œè¡¨ä¹‹é—´çš„å…³ç³»æ˜¯åœ¨â€å¿ƒä¸­â€!</p>
</li>
</ul>
</li>
<li><p>éç©ºçº¦æŸ - not null</p>
</li>
<li><p>å”¯ä¸€çº¦æŸ - unique</p>
</li>
<li><p>default - é»˜è®¤å€¼</p>
</li>
<li><p>mysqlä¸­ä¸æ”¯æŒè‡ªæ£€çº¦æŸ,oracleä¸­æ”¯æŒçš„checkæ£€æŸ¥çº¦æŸ.ä½†æ˜¯mysqlä¸­å¯ä»¥ä½¿ç”¨è§¦å‘å™¨æ¥å®ç°.</p>
</li>
</ol>
</blockquote>
<h1 id="åˆ›å»ºè¡¨è¯­æ³•"><a href="#åˆ›å»ºè¡¨è¯­æ³•" class="headerlink" title="åˆ›å»ºè¡¨è¯­æ³•"></a>åˆ›å»ºè¡¨è¯­æ³•</h1><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">DROP table è¡¨å;</span><br><span class="line">-- çº¦æŸåˆ—çº§æ·»åŠ </span><br><span class="line">CREATE TABLE è¡¨å(</span><br><span class="line">	åˆ—å æ•°æ®ç±»å‹(n) çº¦æŸç±»å‹ COMMNET 'æ³¨é‡Š',</span><br><span class="line">  åˆ—å æ•°æ®ç±»å‹(n) çº¦æŸç±»å‹ COMMNET 'æ³¨é‡Š'</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">engine æŒ‡å®šå­˜å‚¨å¼•æ“,é»˜è®¤çš„å°±æ˜¯innodb(å¤–é”®çº¦æŸ,äº‹åŠ¡,è¡Œé”,è¡¨é”)</span><br><span class="line">ä¹‹å‰çš„ç‰ˆæœ¬åº”è¯¥æ˜¯myisam(ä»…ä»…æ”¯æŒè¡¨é”)</span><br><span class="line"></span><br><span class="line">-- çº¦æŸè¡¨çº§</span><br><span class="line">-- çº¦æŸå‘½åè§„èŒƒ:è¡¨å_åˆ—å_çº¦æŸç±»å‹ç¼©å†™</span><br><span class="line">CREATE TABLE è¡¨å(</span><br><span class="line">	åˆ—å æ•°æ®ç±»å‹(n) COMMNET 'æ³¨é‡Š',</span><br><span class="line">  åˆ—å æ•°æ®ç±»å‹(n) COMMNET 'æ³¨é‡Š',</span><br><span class="line">  [CONSTRAINT çº¦æŸåç§°] çº¦æŸç±»å‹(åˆ—å),</span><br><span class="line">  [CONSTRAINT çº¦æŸåç§°] çº¦æŸç±»å‹(åˆ—å)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="åˆ—çº§æ·»åŠ æ–¹å¼"><a href="#åˆ—çº§æ·»åŠ æ–¹å¼" class="headerlink" title="åˆ—çº§æ·»åŠ æ–¹å¼"></a>åˆ—çº§æ·»åŠ æ–¹å¼</h2><blockquote>
<p>ç›´æ¥åœ¨åˆ—çš„åé¢çš„å¢åŠ å…³äºè¯¥åˆ—çš„çº¦æŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">username varchar(20) unique not null,</span><br><span class="line">	birthday date default '1991-09-08'</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into t_user(id) values(1);</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="è¡¨çº§æ·»åŠ æ–¹å¼"><a href="#è¡¨çº§æ·»åŠ æ–¹å¼" class="headerlink" title="è¡¨çº§æ·»åŠ æ–¹å¼"></a>è¡¨çº§æ·»åŠ æ–¹å¼</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">-- not nullä»…ä»…æ”¯æŒåˆ—çº§æ·»åŠ </span><br><span class="line">drop table t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int(7),</span><br><span class="line">  username varchar(20) not null,</span><br><span class="line"> 	birthday date,</span><br><span class="line">  constraint t_user_id_pk primary key(id),</span><br><span class="line">  constraint t_user_username_uq unique(username)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- çº¦æŸå - æé«˜é”™çš„å¯è¯»æ€§</span><br><span class="line">insert into t_user(id) values(1);</span><br><span class="line"></span><br><span class="line">-- æ•°æ®å­—å…¸ - æè¿°è¡¨çš„è¡¨</span><br><span class="line">-- æ•°æ®å­—å…¸å°±æ˜¯ç”¨æ¥å­˜æ”¾ç”¨æˆ·ä¿¡æ¯/ç”¨æˆ·åˆ›å»ºçš„è¿™è¡¨çš„ä¿¡æ¯.</span><br><span class="line">show tables;</span><br><span class="line">desc è¡¨å;</span><br><span class="line"></span><br><span class="line">-- ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ•°æ®åº“mysql</span><br><span class="line">use information_schema</span><br><span class="line"></span><br><span class="line">-- TABLE_CONSTRAINTS è¡¨å - æ•°æ®å­—å…¸ - ä¸“é—¨å­˜å‚¨æ¯ä¸ªç”¨æˆ·çš„è¡¨çš„çº¦æŸä¿¡æ¯</span><br><span class="line">desc table_constraints</span><br><span class="line">+--------------------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field              | Type         | Null | Key | Default | Extra |</span><br><span class="line">+--------------------+--------------+------+-----+---------+-------+</span><br><span class="line">| CONSTRAINT_CATALOG | varchar(512) | NO   |     |         |       |</span><br><span class="line">| CONSTRAINT_SCHEMA  | varchar(64)  | NO   |     |         |       |</span><br><span class="line">| CONSTRAINT_NAME    | varchar(64)  | NO   |     |         |       |</span><br><span class="line">| TABLE_SCHEMA       | varchar(64)  | NO   |     |         |       |</span><br><span class="line">| TABLE_NAME         | varchar(64)  | NO   |     |         |       |</span><br><span class="line">| CONSTRAINT_TYPE    | varchar(64)  | NO   |     |         |       |</span><br><span class="line">+--------------------+--------------+------+-----+---------+-------+</span><br><span class="line">CONSTRAINT_NAME - çº¦æŸåç§°</span><br><span class="line">TABLE_NAME - è¡¨å</span><br><span class="line">CONSTRAINT_TYPE - çº¦æŸç±»å‹</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å‡ºT_USERè¡¨ä¸­çš„çº¦æŸä¿¡æ¯</span><br><span class="line">select constraint_name,constraint_type,table_name from table_constraints</span><br><span class="line">where table_name='T_USER' and table_schema='dy';</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢t_userè¡¨ä¸­çš„æ‰€æœ‰çš„åˆ—çš„åç§°ä»¥åŠåˆ—çš„æ•°æ®ç±»å‹</span><br><span class="line">select column_name,column_type,data_type,column_key from columns where table_schema='dy' and table_name='t_user';</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å»ºè¡¨çš„å…¶ä»–è¯­æ³•"><a href="#å»ºè¡¨çš„å…¶ä»–è¯­æ³•" class="headerlink" title="å»ºè¡¨çš„å…¶ä»–è¯­æ³•"></a>å»ºè¡¨çš„å…¶ä»–è¯­æ³•</h2><blockquote>
<ol>
<li><p>åˆ©ç”¨ä¸€å¼ å·²ç»å­˜åœ¨çš„è¡¨æ¥æ„å»ºå¦å¤–ä¸€å¼ è¡¨</p>
<ul>
<li><p>ä¿ç•™åŸæ¥è¡¨ä¸­çš„æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int(7),</span><br><span class="line">  username varchar(20) not null,</span><br><span class="line"> 	birthday date,</span><br><span class="line">  constraint t_user_id_pk primary key(id),</span><br><span class="line">  constraint t_user_username_uq unique(username)</span><br><span class="line">);</span><br><span class="line">insert into t_user values(1,'tom','2021-09-08');</span><br><span class="line">insert into t_user values(2,'jack','2022-09-08');</span><br><span class="line"></span><br><span class="line">-- å…‹éš†</span><br><span class="line">CREATE TABLE è¡¨å AS SELECTæŸ¥è¯¢è¯­å¥;</span><br><span class="line"></span><br><span class="line">create table t_user_copy as select * from t_user;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ä¿ç•™åŸè¡¨çš„ç»“æ„,ä½†æ˜¯ä¸ä¿ç•™æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user_copy;</span><br><span class="line">     </span><br><span class="line">create table t_user_copy as select * from t_user where 1=2;</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><p>æŸ¥çœ‹å»ºè¡¨è¯­å¥-DDL</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table è¡¨å;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å¦‚æœæ˜¯ä¸€ä¸ª1:n</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">drop table t_ord;</span><br><span class="line">drop table t_customer;</span><br><span class="line">create table t_customer(</span><br><span class="line">	id int(7),</span><br><span class="line">  cname varchar(20) not null,</span><br><span class="line">  constraint t_customer_id_pk primary key(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table t_ord(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  ord_no varchar(20) not null unique,</span><br><span class="line">  total double(7,2),</span><br><span class="line">  customer_id int(7),</span><br><span class="line">  constraint t_ord_customer_id_fk foreign key(customer_id) references t_customer(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- ä¸€å®šæ˜¯çˆ¶çº§è¡¨t_customer</span><br><span class="line">-- åˆ è¡¨ - å…ˆåˆ é™¤å­è¡¨,å¤šçš„ä¸€æ–¹,å¤–é”®æ‰€åœ¨çš„é‚£å¼ è¡¨.</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>n:n</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">drop table t_sc;</span><br><span class="line">drop table t_student;</span><br><span class="line">drop table t_course;</span><br><span class="line">   </span><br><span class="line">create table t_student(</span><br><span class="line">	id int primary key</span><br><span class="line">);</span><br><span class="line">create table t_course(</span><br><span class="line">	id int primary key</span><br><span class="line">);</span><br><span class="line">create table t_sc(</span><br><span class="line">	sid int,</span><br><span class="line">  cid int,</span><br><span class="line">  primary key(sid,cid),</span><br><span class="line">  foreign key(sid) references t_student(id),</span><br><span class="line">  foreign key(cid) references t_course(id)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="è‡ªå­¦çš„çŸ¥è¯†ç‚¹"><a href="#è‡ªå­¦çš„çŸ¥è¯†ç‚¹" class="headerlink" title="è‡ªå­¦çš„çŸ¥è¯†ç‚¹"></a>è‡ªå­¦çš„çŸ¥è¯†ç‚¹</h2><blockquote>
<p>å››ç§åˆ†åŒºæ–¹å¼ - æµ‹è¯•</p>
</blockquote>
<h1 id="DMLæ“ä½œ"><a href="#DMLæ“ä½œ" class="headerlink" title="DMLæ“ä½œ"></a>DMLæ“ä½œ</h1><h2 id="insertè¯­å¥"><a href="#insertè¯­å¥" class="headerlink" title="insertè¯­å¥"></a>insertè¯­å¥</h2><blockquote>
<ul>
<li><p>ç»™è¡¨ä¸­æ‰€æœ‰çš„åˆ—éƒ½æ’å…¥æ•°æ®,ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯é¡ºåº/ç±»å‹/çº¦æŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into è¡¨å values(åˆ—1,åˆ—2,åˆ—3);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»™æŒ‡å®šçš„åˆ—æ’å…¥æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into è¡¨å(åˆ—å1,åˆ—å2) values(åˆ—1,åˆ—2);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¹é‡æ’å…¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into è¡¨å values(åˆ—1,åˆ—2,åˆ—3),(åˆ—1,åˆ—2,åˆ—3),(åˆ—1,åˆ—2,åˆ—3);</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</blockquote>
<h2 id="deleteè¯­å¥"><a href="#deleteè¯­å¥" class="headerlink" title="deleteè¯­å¥"></a>deleteè¯­å¥</h2><blockquote>
<ul>
<li><p>delete from è¡¨å;//åˆ é™¤è¡¨ä¸­çš„æ•°æ®</p>
</li>
<li><p>delete from è¡¨å where æ¡ä»¶;</p>
</li>
<li><p>å¤–é”®çº¦æŸä¼šå¯¹deleteäº§ç”Ÿå½±å“,ä¸€å®šæ˜¯å…ˆåˆ é™¤å­è®°å½•,ç„¶åæ‰èƒ½å¤Ÿåˆ é™¤çˆ¶è®°å½•.</p>
<p>å…ˆåˆ é™¤å¤šçš„ä¸€æ–¹,ç„¶åæ‰èƒ½å¤Ÿåˆ é™¤ä¸€çš„ä¸€æ–¹.</p>
</li>
<li><p>çº§è”åˆ é™¤ - åˆ é™¤çš„ä¸€æ–¹ä¹‹å‰å…ˆå°†è¿™ä¸ªä¸€æ–¹çš„å­è®°å½•å…¨éƒ¨åˆ é™¤</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">drop table t_ord;</span><br><span class="line">drop table t_customer;</span><br><span class="line">create table t_customer(</span><br><span class="line">	id int(7),</span><br><span class="line">  cname varchar(20) not null,</span><br><span class="line">  constraint t_customer_id_pk primary key(id)</span><br><span class="line">);</span><br><span class="line">insert into t_customer values(1,'admin');</span><br><span class="line">insert into t_customer values(2,'tom');</span><br><span class="line"></span><br><span class="line">create table t_ord(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  ord_no varchar(20) not null unique,</span><br><span class="line">  total double(7,2),</span><br><span class="line">  customer_id int(7),</span><br><span class="line">  constraint t_ord_customer_id_fk foreign key(customer_id) references t_customer(id) on delete cascade</span><br><span class="line">);</span><br><span class="line">insert into t_ord values(1,'1001',300,1);</span><br><span class="line">insert into t_ord values(2,'1002',300,null);</span><br></pre></td></tr></tbody></table></figure>


<p>delete from t_customer where id=1;</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</blockquote>
<h2 id="updateè¯­å¥"><a href="#updateè¯­å¥" class="headerlink" title="updateè¯­å¥"></a>updateè¯­å¥</h2><blockquote>
<ul>
<li>update è¡¨ set åˆ—å=åˆ—å€¼,åˆ—å2=åˆ—å€¼;//æ›´æ–°è¡¨ä¸­æ‰€æœ‰è¡Œ</li>
<li>update è¡¨ set åˆ—å=åˆ—å€¼,åˆ—å2=åˆ—å€¼ WHEREæ¡ä»¶;//</li>
</ul>
</blockquote>
<h2 id="truncateå’Œdeleteå’Œdrop"><a href="#truncateå’Œdeleteå’Œdrop" class="headerlink" title="truncateå’Œdeleteå’Œdrop"></a>truncateå’Œdeleteå’Œdrop</h2><p><code>å…±åŒç‚¹</code></p>
<blockquote>
<p>1.truncateå’Œä¸å¸¦whereå­å¥çš„deleteã€ä»¥åŠdropéƒ½ä¼šåˆ é™¤è¡¨å†…çš„æ•°æ®ã€‚</p>
<p>2.dropã€truncateéƒ½æ˜¯DDLè¯­å¥(æ•°æ®å®šä¹‰è¯­è¨€),æ‰§è¡Œåä¼šè‡ªåŠ¨æäº¤ã€‚</p>
</blockquote>
<p><code>ä¸åŒç‚¹</code></p>
<blockquote>
<p> delete è¯­å¥æ˜¯æ•°æ®åº“æ“ä½œè¯­è¨€(dml)ï¼Œè¿™ä¸ªæ“ä½œä¼šæ”¾åˆ° rollback segement ä¸­ï¼Œäº‹åŠ¡æäº¤ä¹‹åæ‰ç”Ÿæ•ˆï¼›å¦‚æœæœ‰ç›¸åº”çš„ triggerï¼Œæ‰§è¡Œçš„æ—¶å€™å°†è¢«è§¦å‘ã€‚</p>
<p> <strong>truncate</strong>ã€drop æ˜¯æ•°æ®åº“å®šä¹‰è¯­è¨€(ddl)ï¼Œæ“ä½œç«‹å³ç”Ÿæ•ˆï¼ŒåŸæ•°æ®ä¸æ”¾åˆ° rollback segment ä¸­ï¼Œ<strong>ä¸èƒ½å›æ»š</strong>ï¼Œæ“ä½œä¸è§¦å‘ trigger</p>
</blockquote>
<blockquote>
<p>é€Ÿåº¦ï¼Œä¸€èˆ¬æ¥è¯´: drop&gt; truncate &gt; delete</p>
</blockquote>
<h1 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h1><blockquote>
<ul>
<li>limit m  // å‰mè¡Œ</li>
<li>limit m,n //   mä»ä¸‹æ ‡0å¼€å§‹(ç¬¬ä¸€è¡Œ),næ˜¾ç¤ºè¡Œæ•°</li>
</ul>
</blockquote>
<h2 id="åˆ†é¡µçš„å…¬å¼"><a href="#åˆ†é¡µçš„å…¬å¼" class="headerlink" title="åˆ†é¡µçš„å…¬å¼"></a>åˆ†é¡µçš„å…¬å¼</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Page&lt;Book&gt; <span class="title function_">page</span><span class="params">(Integer pageNum,Integer pageSize)</span>{</span><br><span class="line">    <span class="comment">// limit (pageNum-1)*pageSize,pageSize</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">//1,3    0</span></span><br><span class="line">    <span class="comment">//2,2    3</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜"><a href="#åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜" class="headerlink" title="åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜"></a>åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜</h2><blockquote>
<p>limit m,n å…¶ä¸­çš„må«åšåç§»é‡. åç§»é‡è¶Šå¤§,åˆ†é¡µçš„æ€§èƒ½è¶Šä½.</p>
<p>æ¯”å¦‚è¡¨1-100000,æ­£å¥½id=1,10000</p>
<p>select * from è¡¨ where id&gt;æ¡ä»¶ limit 2;</p>
<p>æ¡ä»¶æŸ¥è¯¢(å‡å°‘åç§»é‡) + limit</p>
</blockquote>
<h1 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h1><blockquote>
<p>ç”¨æ¥æ‰§è¡Œä¸€ç»„SQL,æ˜¯dbä¸­å®Œæˆ<strong>ä¸šåŠ¡çš„åŸºæœ¬å•ä½.</strong></p>
</blockquote>
<h2 id="äº‹åŠ¡ACIDç‰¹æ€§"><a href="#äº‹åŠ¡ACIDç‰¹æ€§" class="headerlink" title="äº‹åŠ¡ACIDç‰¹æ€§"></a>äº‹åŠ¡ACIDç‰¹æ€§</h2><blockquote>
<ol>
<li><p>åŸå­æ€§ï¼ˆAtomicity) - äº‹åŠ¡ä¸å¯å†åˆ†å‰².</p>
<p>äº‹åŠ¡è¦ä¹ˆåŒæ—¶æˆåŠŸ,åŒæ—¶å¤±è´¥ - æ¯”å¦‚è½¬è´¦ä¸šåŠ¡.</p>
</li>
<li><p>ä¸€è‡´æ€§(Consistency) - äº‹åŠ¡ä¸€æ—¦æäº¤.å†…å­˜ä¸­çš„æ•°æ®è¦å’Œç£ç›˜ä¸Šçš„æ•°æ®è¦ä¸€è‡´,ä¿è¯æ•°æ®çš„å®Œæ•´æ€§.</p>
<p>æ¯”å¦‚tom-500,jack-500.æ— è®ºè½¬å¤šå°‘,è½¬å¤šå°‘æ¬¡.åæ­£æ€»çš„é’±æ˜¯1000</p>
</li>
<li><p>éš”ç¦»æ€§(isolation): äº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´çš„å½¼æ­¤éš”ç¦»çš„,äº’ä¸å¹²æ‰°çš„.ä¸€ä¸ªäº‹åŠ¡çš„ç»“æŸ,æ„å‘³ç€ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„å¼€å§‹.</p>
</li>
<li><p>æŒä¹…æ€§(Durability) - äº‹åŠ¡ä¸€æ—¦æäº¤,æ•°æ®åº”è¯¥æ°¸ä¹…ä¿å­˜åœ¨ç£ç›˜ä¸­.å³ä½¿å‘ç”Ÿä¸€äº›æ•…éšœ,åº”è¯¥å¯ä»¥ç”¨ä¸€äº›æ¢å¤çš„æŠ€æœ¯è¿›è¡Œæ¢å¤.</p>
</li>
</ol>
</blockquote>
<h2 id="äº‹åŠ¡çš„åˆ†ç±»"><a href="#äº‹åŠ¡çš„åˆ†ç±»" class="headerlink" title="äº‹åŠ¡çš„åˆ†ç±»"></a>äº‹åŠ¡çš„åˆ†ç±»</h2><blockquote>
<ol>
<li>æœ¬åœ°äº‹åŠ¡ - ä¸€ä¸ªé¡¹ç›®(å•ä½“æ¶æ„)è¿æ¥ä¸€ä¸ªæ•°æ®åº“</li>
<li>åˆ†å¸ƒå¼äº‹åŠ¡ <ul>
<li>æ¶ˆæ¯ä¸­é—´ä»¶ - rabbitmq,rocketmq</li>
<li>é˜¿é‡Œçš„æ¡†æ¶seata</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h2><blockquote>
<ol>
<li><p>â‘  Serializable (ä¸²è¡ŒåŒ–)ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„å‘ç”Ÿã€‚</p>
<p>é”è¡¨.</p>
</li>
<li><p>â‘¡ Repeatable read (å¯é‡å¤è¯»)ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»çš„å‘ç”Ÿã€‚</p>
</li>
<li><p>â‘¢ Read committed (è¯»å·²æäº¤)ï¼šå¯é¿å…è„è¯»çš„å‘ç”Ÿã€‚</p>
<p>ä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®.</p>
</li>
<li><p>â‘£ Read uncommitted (è¯»æœªæäº¤)ï¼šæœ€ä½çº§åˆ«ï¼Œä»»ä½•æƒ…å†µéƒ½æ— æ³•ä¿è¯ã€‚äº§ç”Ÿè„è¯».</p>
<p>ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»å–åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡å°šæœªæäº¤çš„æ•°æ®</p>
</li>
</ol>
</blockquote>
<h2 id="æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«"><a href="#æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«" class="headerlink" title="æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«"></a>æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«</h2><p><code>mysqlé»˜è®¤çš„æ˜¯å¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">select @@tx_isolation;</span><br><span class="line"></span><br><span class="line">+-----------------+</span><br><span class="line">| @@tx_isolation  |</span><br><span class="line">+-----------------+</span><br><span class="line">| REPEATABLE-READ |</span><br><span class="line">+-----------------+</span><br><span class="line"></span><br><span class="line">ä¸´æ—¶è®¾ç½®ä¸€ä¸‹å½“å‰ä¼šè¯çš„äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</span><br><span class="line">set session transaction isolation level read uncommitted;</span><br></pre></td></tr></tbody></table></figure>

<h1 id="äº‹åŠ¡TCLå‘½ä»¤"><a href="#äº‹åŠ¡TCLå‘½ä»¤" class="headerlink" title="äº‹åŠ¡TCLå‘½ä»¤"></a>äº‹åŠ¡TCLå‘½ä»¤</h1><blockquote>
<p>begin(å¼€å¯ä¸€ä¸ªäº‹åŠ¡),commit(æäº¤ä¸€ä¸ªäº‹åŠ¡),savepoint äº‹åŠ¡ç‚¹</p>
<p>set autocommit=0;//æ‰‹åŠ¨å¼€å¯ä¸€ä¸ªäº‹åŠ¡</p>
<p>DMLæ“ä½œé»˜è®¤éƒ½æ˜¯ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡.</p>
</blockquote>
<h2 id="è¡¥å……ä¸€ç‚¹"><a href="#è¡¥å……ä¸€ç‚¹" class="headerlink" title="è¡¥å……ä¸€ç‚¹"></a>è¡¥å……ä¸€ç‚¹</h2><blockquote>
<ol>
<li><p>rollback - å›æ»šäº‹åŠ¡ - ç»“æŸä¸€ä¸ªäº‹åŠ¡</p>
<p>ä¸èƒ½å›æ»šå·²ç»commitä¹‹åçš„äº‹åŠ¡.</p>
</li>
<li><p>savepoint äº‹åŠ¡ç‚¹</p>
<p>rollback to äº‹åŠ¡ç‚¹</p>
<p>å¦‚æœä¹ˆæœ‰è®¾ç½®äº‹åŠ¡ç‚¹ - å›æ»šå½“å‰äº‹åŠ¡ä¸­æ‰€æœ‰çš„æ“ä½œ.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; begin;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_acc set balance=balance+1000 where id=1;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; savepoint t1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_acc set balance=balance+1000 where id=2;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; rollback to t1;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h1 id="å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜"><a href="#å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜" class="headerlink" title="å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜"></a>å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜</h1><blockquote>
<p>å¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œæ“ä½œçš„æ—¶å€™,ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">drop table t_acc;</span><br><span class="line">create table t_acc(</span><br><span class="line">	id int,</span><br><span class="line">balance double(7,2)</span><br><span class="line">);</span><br><span class="line">insert into t_acc values(1,10000),(2,10000);</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="è„è¯»"><a href="#è„è¯»" class="headerlink" title="è„è¯»"></a>è„è¯»</h2><blockquote>
<p>ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ²¡æœ‰æäº¤çš„æ•°æ® - ç»å¯¹ä¸å…è®¸çš„.</p>
<p><img src="C:/Users/liming/Desktop/zang.png">  </p>
</blockquote>
<h2 id="ä¸å¯é‡å¤è¯»"><a href="#ä¸å¯é‡å¤è¯»" class="headerlink" title="ä¸å¯é‡å¤è¯»"></a>ä¸å¯é‡å¤è¯»</h2><blockquote>
<p>set session transaction isolation level read committed;</p>
<p>ä¸€ä¸ªäº‹åŠ¡Aåœ¨è¯»å–ä¸€æ¬¡ä¹‹å,å¦å¤–ä¸€ä¸ªäº‹åŠ¡Båœ¨è¿›è¡Œupdateæ“ä½œ.å¹¶ä¸”commit.</p>
<p>Aäº‹åŠ¡åœ¨æ²¡æœ‰è‡ªå·±æ²¡æœ‰æäº¤ä¹‹å‰,è¯»å–åˆ°äº†Bäº‹åŠ¡æäº¤ä¹‹åçš„æ•°æ®.å¯¼è‡´Aäº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åˆ°çš„ç»“æœä¸ä¸€æ ·.</p>
<p><img src="C:/Users/liming/Desktop/no.png"> </p>
</blockquote>
<h2 id="å¹»è¯»"><a href="#å¹»è¯»" class="headerlink" title="å¹»è¯»"></a>å¹»è¯»</h2><blockquote>
<p>å®ƒå’Œä¸å¯é‡å¤è¯»ç±»ä¼¼.ä¾§é‡ç‚¹ä¸åŒ.ä¸å¯é‡å¤è¯»å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨æŸ¥è¯¢.å¦å¤–ä¸€ä¸ªäº‹åŠ¡åœ¨ä¿®æ”¹(update)</p>
<p>å¹»è¯»å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨ä¿®æ”¹.å¦å¤–ä¸€ä¸ªäº‹åŠ¡åœ¨æ’å…¥(insert).</p>
<p>set session transaction isolation level read committed;</p>
<p><img src="C:/Users/liming/Desktop/huan.png"> </p>
</blockquote>
<blockquote>
<p>äº‹åŠ¡Aåœ¨ä¿®æ”¹,äº‹åŠ¡B-insertå¹¶ä¸”æäº¤äº†.äº‹åŠ¡Aåœ¨æœ¬äº‹åŠ¡ä¸­å†æ¬¡æŸ¥è¯¢,å‘ç°äº†å¥½åƒæœ‰â€æ›´æ–°å¤±è´¥â€çš„æ•°æ®.å°±åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·.</p>
</blockquote>
<h2 id="å¯é‡å¤è¯»"><a href="#å¯é‡å¤è¯»" class="headerlink" title="å¯é‡å¤è¯»"></a>å¯é‡å¤è¯»</h2><blockquote>
<p>é»˜è®¤çš„éš”ç¦»çº§åˆ«</p>
<p>set session transaction isolation level repeatable read;</p>
</blockquote>
<blockquote>
<p>äº‹åŠ¡Aè¯»å–ä¸€æ¬¡,äº‹åŠ¡Bæ‰§è¡Œupdateæ“ä½œ.äº‹åŠ¡Aåœ¨æ²¡æœ‰ç»“æŸå½“å‰äº‹åŠ¡ä¹‹å‰,å¤šæ¬¡è¯»å–åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„.</p>
<p>å¿…é¡»è¦commitä¹‹å,æ‰èƒ½å¤Ÿè¯»å–åˆ°Bäº‹åŠ¡æäº¤ä¹‹åçš„ä¿®æ”¹æ•°æ®.</p>
<p><img src="C:/Users/liming/Desktop/repeat.png"> </p>
</blockquote>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table>
<thead>
<tr>
<th></th>
<th>è„è¯»</th>
<th>ä¸å¯é‡å¤è¯»</th>
<th>å¹»è¯»</th>
</tr>
</thead>
<tbody><tr>
<td>è¯»æœªæäº¤</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
<tr>
<td>è¯»å·²æäº¤</td>
<td>Ã—</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
<tr>
<td>å¯é‡å¤è¯»</td>
<td>Ã—</td>
<td>Ã—</td>
<td>âˆš</td>
</tr>
<tr>
<td>ä¸²è¡ŒåŒ–</td>
<td>Ã—</td>
<td>Ã—</td>
<td>Ã—</td>
</tr>
</tbody></table>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/meet-DB/" rel="tag">meet DB</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-mysql2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/08/09/mysql2/" class="article-date">
  	<time datetime="2022-08-09T13:22:58.000Z" itemprop="datePublished">2022-08-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/09/mysql2/">
        mysql2
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="è§†å›¾-view"><a href="#è§†å›¾-view" class="headerlink" title="è§†å›¾-view"></a>è§†å›¾-view</h1><blockquote>
<p>æˆ‘ä»¬ä½¿ç”¨createå‘½ä»¤æ¥æ„å»ºdatabase,user,<strong>table(åŸºæœ¬å•ä½)</strong>,view,ç´¢å¼•,å‡½æ•°,å­˜å‚¨è¿‡ç¨‹,è§¦å‘å™¨ - æ•°æ®åº“çš„å•ä½.</p>
<p>è§†å›¾å®é™…ä¸Šå°±æ˜¯ä¸€å¼ â€è™šæ‹Ÿè¡¨â€,å®é™…ä¸Šæ˜¯ä¸å­˜åœ¨çš„.åªæ˜¯é€»è¾‘ä¸Šçš„æŸ¥è¯¢ç»“æœçš„é›†åˆ.</p>
</blockquote>
<h2 id="è§†å›¾çš„åˆ†ç±»"><a href="#è§†å›¾çš„åˆ†ç±»" class="headerlink" title="è§†å›¾çš„åˆ†ç±»"></a>è§†å›¾çš„åˆ†ç±»</h2><blockquote>
<ol>
<li><p>ç®€å•è§†å›¾</p>
<p>è§†å›¾æ¥è‡ªäºå•è¡¨æŸ¥è¯¢çš„é›†åˆ - å…è®¸æ‰§è¡ŒDMLæ“ä½œ</p>
</li>
<li><p>å¤æ‚è§†å›¾</p>
<p>è§†å›¾æ¥è‡ªäºå¤šè¡¨å…³è”æŸ¥è¯¢çš„é›†åˆ - ä¸ä¸€å®šå…è®¸æ‰§è¡ŒDMLæ“ä½œ.</p>
</li>
</ol>
</blockquote>
<h2 id="åˆ›å»ºçš„è¯­æ³•"><a href="#åˆ›å»ºçš„è¯­æ³•" class="headerlink" title="åˆ›å»ºçš„è¯­æ³•"></a>åˆ›å»ºçš„è¯­æ³•</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DROP view è§†å›¾å;</span><br><span class="line"></span><br><span class="line">CREATE VIEW è§†å›¾å</span><br><span class="line">AS</span><br><span class="line">SELECTæŸ¥è¯¢è¯­å¥;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create view t_acc_view as select * from t_acc;</span><br><span class="line"></span><br><span class="line">select * from t_acc_view;</span><br></pre></td></tr></tbody></table></figure>

<p><code>å¤æ‚è§†å›¾</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">drop view co_view;</span><br><span class="line">create view co_view as</span><br><span class="line">select c.cname,o.ord_no from t_customer c join t_ord o on c.id = o.customer_id;</span><br><span class="line"></span><br><span class="line">update co_view set cname='xx'; //å…è®¸update</span><br><span class="line"></span><br><span class="line">drop view co_view;</span><br><span class="line">create view co_view as</span><br><span class="line">select customer_id,count(*) c_ from t_ord group by customer_id;</span><br><span class="line"></span><br><span class="line">-- ä¸å…è®¸æ‰§è¡Œupdateæ“ä½œ.</span><br><span class="line">mysql&gt; update co_view set c_=1;</span><br><span class="line">ERROR 1288 (HY000): The target table co_view of the UPDATE is not updatable</span><br></pre></td></tr></tbody></table></figure>

<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><blockquote>
<ol>
<li><p>ä¿®æ”¹åŸè¡¨,è§†å›¾è‚¯å®šå˜åŒ–.æœ‰å¯èƒ½è¿˜ä¼šå¯¼è‡´è§†å›¾æ•°æ®å…¨éƒ¨ä¸¢å¤±.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">drop view t_acc_view;</span><br><span class="line">create view t_acc_view</span><br><span class="line">as</span><br><span class="line">select * from t_acc where balance=16000;</span><br><span class="line"></span><br><span class="line">-- æ›´æ–°åŸè¡¨</span><br><span class="line"></span><br><span class="line">-- æ›´æ–°äº†è¿™ä¸ªè§†å›¾æ¥æºçš„é‚£ä¸ªæ¡ä»¶åˆ—.</span><br><span class="line">update t_acc set balance = balance+1000 where id=2;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_acc_view;</span><br><span class="line">Empty set (0.00 sec)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ä¿®æ”¹è§†å›¾ - åŒæ ·ä¹Ÿä¼šå¯¹åŸè¡¨é€ æˆå½±å“.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">drop view t_acc_view;</span><br><span class="line">create view t_acc_view</span><br><span class="line">as</span><br><span class="line">select * from t_acc where id=1;</span><br><span class="line"></span><br><span class="line">-- æ›´æ–°è§†å›¾</span><br><span class="line">update t_acc_view set balance=1000 where id=1;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_acc;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | balance  |</span><br><span class="line">+------+----------+</span><br><span class="line">|    1 |  1000.00 |</span><br><span class="line">|    2 | 17000.00 |</span><br><span class="line">|    3 | 15000.00 |</span><br><span class="line">+------+----------+</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>é’ˆå¯¹é¢˜1çš„æƒ…å†µ,æ›´æ–°åˆ—å¯èƒ½å¯¼è‡´è§†å›¾å¤±æ•ˆ.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">drop view t_acc_view;</span><br><span class="line">create view t_acc_view</span><br><span class="line">as</span><br><span class="line">SELECTå¸¦whereçš„æ¡ä»¶æŸ¥è¯¢è¯­å¥ with check option</span><br></pre></td></tr></tbody></table></figure>

<p><code>with check optionä½œç”¨:ä¸å…è®¸æ›´æ–°è§†å›¾çš„æ¥æºçš„é‚£ä¸ªæ¡ä»¶åˆ—.  è‚¯å®šæ˜¯è¦é…åˆwhereè¯­å¥ä¸€èµ·ä½¿ç”¨çš„,å¦åˆ™æ²¡æœ‰ä»»ä½•æ„ä¹‰</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">drop view t_acc_view;</span><br><span class="line">create view t_acc_view</span><br><span class="line">as</span><br><span class="line">select * from t_acc where balance=1000 with check option;</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_acc_view set balance=2000 where id=1;</span><br><span class="line">ERROR 1369 (HY000): CHECK OPTION failed 'dy.t_acc_view'</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="è§†å›¾çš„å¥½å¤„"><a href="#è§†å›¾çš„å¥½å¤„" class="headerlink" title="è§†å›¾çš„å¥½å¤„"></a>è§†å›¾çš„å¥½å¤„</h2><blockquote>
<ol>
<li><p>å°è£…SQLè¯­å¥</p>
<p>å°è£…æ¯”è¾ƒå¤æ‚çš„SQLè¯­å¥,åœ¨Javaä¸­ç›´æ¥æŸ¥è¯¢è§†å›¾å³å¯.</p>
</li>
<li><p>å®šåˆ¶æ•°æ®</p>
<p>ç³»ç»Ÿä¸åŒçš„è§’è‰² - çœ‹åˆ°çš„æ•°æ®åº”è¯¥æ˜¯ä¸ä¸€æ ·çš„.</p>
</li>
<li><p>å®‰å…¨æ€§</p>
<p>æ•°æ®åº“åº”è¯¥æœ‰å¤šä¸ªuserè´¦å·çš„,å¯ä»¥ç»™ä¸åŒçš„ç”¨æˆ·æˆäºˆä¸åŒçš„è§†å›¾çš„æƒé™(select,insert,update,delete)</p>
<p>æˆæƒgrant</p>
</li>
<li><p>åˆå¹¶æŠ½ç¦»å‡ºå»çš„æ•°æ® - å¯¹ç”¨æˆ·å±è”½çš„åº•å±‚çš„æ•°æ®åº“çš„ç»“æ„çš„è®¾è®¡.</p>
</li>
</ol>
</blockquote>
<h1 id="ç´¢å¼•-index"><a href="#ç´¢å¼•-index" class="headerlink" title="ç´¢å¼•-index"></a>ç´¢å¼•-index</h1><blockquote>
<p>ä½œç”¨:æé«˜æŸ¥è¯¢çš„æ•ˆç‡,ç±»ä¼¼äºä¹¦çš„é‚£ä¸ªç›®å½•.</p>
</blockquote>
<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><blockquote>
<ol>
<li><p>Myisamå­˜å‚¨å¼•æ“</p>
<p>ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†å¼€å­˜å‚¨çš„.æ˜¯ä¿©ä¸ªç‹¬ç«‹çš„æ–‡ä»¶</p>
<p>æ•°æ®ç»“æ„:B+æ ‘</p>
</li>
<li><p>Innodbå­˜å‚¨å¼•æ“</p>
<p>æ•°æ®å’Œç´¢å¼•æ˜¯åˆäºŒä¸ºä¸€çš„,æ˜¯ä¸€ä¸ªæ–‡ä»¶.</p>
<p>B+æ ‘</p>
</li>
</ol>
</blockquote>
<blockquote>
<ul>
<li>ç´¢å¼•ä¹Ÿæ˜¯å ç”¨ç‰©ç†ç©ºé—´çš„.</li>
<li>å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡ŒDMLæ“ä½œçš„æ—¶å€™,ç»´æŠ¤ç´¢å¼•çš„-æ¶ˆè€—ä¸€ç‚¹é¢å¤–çš„æ—¶é—´</li>
<li>å¦‚æœè¡¨ä¸­æŸåˆ—é‡å¤çš„æ•°æ®æ¯”è¾ƒå¤š,æ²¡æœ‰å¿…è¦åˆ›å»ºç´¢å¼• - æŸ¥æ‰¾çš„æ—¶å€™æ¥è¿‘äºå…¨è¡¨æ‰«æèŠ±è´¹çš„æ—¶é—´.</li>
<li>å½“è¡¨ä¸­æ²¡æœ‰æŒ‡å®šç´¢å¼•åˆ—,é‚£ä¹ˆé»˜è®¤çš„ç´¢å¼•åˆ—å°±æ˜¯ä¸»é”®åˆ—.</li>
<li>show index from è¡¨å \G;</li>
</ul>
</blockquote>
<h2 id="ç´¢å¼•çš„åˆ†ç±»"><a href="#ç´¢å¼•çš„åˆ†ç±»" class="headerlink" title="ç´¢å¼•çš„åˆ†ç±»"></a>ç´¢å¼•çš„åˆ†ç±»</h2><blockquote>
<ul>
<li><p>ä¸»é”®ç´¢å¼•</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Key_name: PRIMARY</span><br><span class="line"></span><br><span class="line">-- éè¦åˆ é™¤ä¸»é”®çº¦æŸ</span><br><span class="line">alter table è¡¨å drop primary key;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å”¯ä¸€ç´¢å¼•</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŸåˆ—å¢åŠ uniqueå”¯ä¸€çº¦æŸ,è‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å…¨æ–‡ç´¢å¼•</p>
<p>åæœŸä¼šä½¿ç”¨elasticsearchæ¥è¿›è¡Œå…¨æ–‡æœç´¢ - æœç´¢å¼•æ“.</p>
</li>
<li><p>å¤åˆç´¢å¼• - éµå®ˆæœ€å·¦åŒ¹é…åŸåˆ™.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create index index_name on è¡¨å(åˆ—1,åˆ—2,åˆ—3);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ™®é€šç´¢å¼•</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create index index_name on è¡¨å(åˆ—);</span><br><span class="line">drop index index_name;</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</blockquote>
<h1 id="ç´¢å¼•å¤±æ•ˆåœºæ™¯â€»"><a href="#ç´¢å¼•å¤±æ•ˆåœºæ™¯â€»" class="headerlink" title="ç´¢å¼•å¤±æ•ˆåœºæ™¯â€»"></a>ç´¢å¼•å¤±æ•ˆåœºæ™¯â€»</h1><blockquote>
<p>å¦‚ä½•æŸ¥çœ‹ç´¢å¼•æ˜¯å¦ç”Ÿæ•ˆ - ç´¢å¼•æ‰§è¡Œè®¡åˆ’explain selectè¯­å¥;</p>
<p>type - <em>const</em>&gt;eq_<em>ref</em>&gt;<em>ref</em>&gt;range&gt;index&gt;<em>all</em>)</p>
<p>type-all å…¨è¡¨æ‰«æ - ç´¢å¼•æ˜¯å¤±æ•ˆçš„.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">explain select * from index_test where id=1;</span><br><span class="line">+----+-------------+------------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span><br><span class="line">| id | select_type | table      | partitions | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra |</span><br><span class="line">+----+-------------+------------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span><br><span class="line">|  1 | SIMPLE      | index_test | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL  |</span><br><span class="line">+----+-------------+------------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">drop table index_test;</span><br><span class="line">create table index_test(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  a int(7),</span><br><span class="line">  b int(7),</span><br><span class="line">  c varchar(20),</span><br><span class="line">  d varchar(20)</span><br><span class="line">);</span><br><span class="line">insert into index_test values(1,100,10,'aaa','AAA');</span><br><span class="line">insert into index_test values(2,200,30,'aab','BBB');</span><br><span class="line">insert into index_test values(3,300,20,'caa','CCC');</span><br><span class="line">insert into index_test values(4,100,10,'daa','DDD');</span><br><span class="line">insert into index_test values(5,500,50,'aad','FFF');</span><br><span class="line"></span><br><span class="line">drop index index_test_index;</span><br><span class="line">create index index_test_index on index_test(a,b,c);</span><br><span class="line"></span><br><span class="line">create index index_test_d on index_test(d(10));//10 - ç´¢å¼•é•¿åº¦</span><br></pre></td></tr></tbody></table></figure>

<h2 id="1-å¤åˆç´¢å¼•éœ€è¦éµå®ˆæœ€å·¦åŒ¹é…åŸåˆ™"><a href="#1-å¤åˆç´¢å¼•éœ€è¦éµå®ˆæœ€å·¦åŒ¹é…åŸåˆ™" class="headerlink" title="1. å¤åˆç´¢å¼•éœ€è¦éµå®ˆæœ€å·¦åŒ¹é…åŸåˆ™"></a>1. å¤åˆç´¢å¼•éœ€è¦éµå®ˆæœ€å·¦åŒ¹é…åŸåˆ™</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- a,b,céƒ½æ˜¯èµ°äº†ç´¢å¼•çš„.</span><br><span class="line">explain select * from index_test where a = 2 and b=200 and c='aaa';</span><br><span class="line"></span><br><span class="line">type:ref   key_len: 73</span><br><span class="line"></span><br><span class="line">-- aèµ°äº†ç´¢å¼•</span><br><span class="line">explain select * from index_test where a = 2;</span><br><span class="line">type: ref  key_len:5</span><br><span class="line"></span><br><span class="line">-- a,béƒ½æ˜¯èµ°äº†ç´¢å¼•</span><br><span class="line">explain select * from index_test where a = 2 and b=200;</span><br><span class="line">type:ref key_len:10</span><br><span class="line"></span><br><span class="line">-- bæ˜¯ä¸èµ°çš„</span><br><span class="line">explain select * from index_test where b=200;</span><br><span class="line">type:ALL key_len:NULL</span><br><span class="line"></span><br><span class="line">-- type:ref   key_len: 73</span><br><span class="line">-- mysqlåº•å±‚å‘ç°whereæ¡ä»¶åˆ—a,b,céƒ½æ˜¯å¤åˆç´¢å¼•,å…ˆè¿›è¡Œä¼˜åŒ–,a,b,c,è¿›è¡ŒæŸ¥è¯¢.</span><br><span class="line">explain select * from index_test where b=200 and c='aaa' and a=2;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="2-æ¨¡ç³ŠåŒ¹é…"><a href="#2-æ¨¡ç³ŠåŒ¹é…" class="headerlink" title="2. æ¨¡ç³ŠåŒ¹é…"></a>2. æ¨¡ç³ŠåŒ¹é…</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- %åœ¨æœ«å°¾ - ç”Ÿæ•ˆ</span><br><span class="line">explain select * from index_test where a = 2 and b=200 and c like 'a%';</span><br><span class="line"></span><br><span class="line">-- %åœ¨å¼€å¤´,a,bæ˜¯èµ°ç´¢å¼•,ä½†æ˜¯cæ²¡æœ‰èµ°ç´¢å¼•</span><br><span class="line">explain select * from index_test where a = 2 and b=200 and c like '%a';</span><br><span class="line"></span><br><span class="line">-- %?%,a,bæ˜¯èµ°ç´¢å¼•,ä½†æ˜¯cæ²¡æœ‰èµ°ç´¢å¼•</span><br><span class="line">explain select * from index_test where a = 2 and b=200 and c like '%a%';</span><br></pre></td></tr></tbody></table></figure>

<h2 id="3-æŸ¥è¯¢èŒƒå›´ä¹‹å"><a href="#3-æŸ¥è¯¢èŒƒå›´ä¹‹å" class="headerlink" title="3. æŸ¥è¯¢èŒƒå›´ä¹‹å"></a>3. æŸ¥è¯¢èŒƒå›´ä¹‹å</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- b&gt;=10 æ¡ä»¶æˆç«‹,èŒƒå›´ä¹‹åçš„ç´¢å¼•æ˜¯ç”Ÿæ•ˆçš„.  a,b,céƒ½æ˜¯èµ°ç´¢å¼•</span><br><span class="line">explain select * from index_test where a = 100 and b&gt;=10 and c='aaa';</span><br><span class="line"></span><br><span class="line">-- b&gt;10 æ¡ä»¶ä¸æˆç«‹,èŒƒå›´ä¹‹åçš„ç´¢å¼•æ˜¯å¤±æ•ˆçš„.  åªæœ‰a,bæ˜¯èµ°ç´¢å¼•çš„</span><br><span class="line">explain select * from index_test where a = 100 and b&gt;10 and c='aaa';</span><br></pre></td></tr></tbody></table></figure>

<h2 id="4-ç´¢å¼•åˆ—å‚åŠ äº†è®¡ç®—"><a href="#4-ç´¢å¼•åˆ—å‚åŠ äº†è®¡ç®—" class="headerlink" title="4. ç´¢å¼•åˆ—å‚åŠ äº†è®¡ç®—"></a>4. ç´¢å¼•åˆ—å‚åŠ äº†è®¡ç®—</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- type:ALL</span><br><span class="line">explain select * from index_test where id+1=1;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="5-ç´¢å¼•åˆ—ä½¿ç”¨äº†å‡½æ•°"><a href="#5-ç´¢å¼•åˆ—ä½¿ç”¨äº†å‡½æ•°" class="headerlink" title="5. ç´¢å¼•åˆ—ä½¿ç”¨äº†å‡½æ•°"></a>5. ç´¢å¼•åˆ—ä½¿ç”¨äº†å‡½æ•°</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- type:ALL</span><br><span class="line">explain select * from index_test where abs(id)=1;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="6-æŸ¥è¯¢çš„æ•°æ®è¶…è¿‡æ•´å¼ è¡¨çš„30"><a href="#6-æŸ¥è¯¢çš„æ•°æ®è¶…è¿‡æ•´å¼ è¡¨çš„30" class="headerlink" title="6. æŸ¥è¯¢çš„æ•°æ®è¶…è¿‡æ•´å¼ è¡¨çš„30%"></a>6. æŸ¥è¯¢çš„æ•°æ®è¶…è¿‡æ•´å¼ è¡¨çš„30%</h2><h2 id="7-is-nullå’Œis-not-null"><a href="#7-is-nullå’Œis-not-null" class="headerlink" title="7. is nullå’Œis not null"></a>7. is nullå’Œis not null</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create index emp_index on s_emp(commission_pct);</span><br><span class="line"></span><br><span class="line">-- typ:ALL is null æ²¡æœ‰èµ°ç´¢å¼•</span><br><span class="line">explain select * from s_emp where commission_pct is null;</span><br><span class="line"></span><br><span class="line">-- type:range is not èµ°ç´¢å¼•.</span><br><span class="line">explain select * from s_emp where commission_pct is not null;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="8-inå’Œnot-in"><a href="#8-inå’Œnot-in" class="headerlink" title="8. inå’Œnot in"></a>8. inå’Œnot in</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">explain select * from s_emp where id in(1,2,3);</span><br><span class="line">explain select * from s_emp where id not in(1,2,3);</span><br><span class="line"></span><br><span class="line">-- mysql5.7ä¹‹å‰</span><br><span class="line">in - èµ°ç´¢å¼•</span><br><span class="line">not in - ä¸èµ°ç´¢å¼•</span><br><span class="line"></span><br><span class="line">-- 8.x not inå…è®¸èµ°ç´¢å¼•</span><br></pre></td></tr></tbody></table></figure>

<h1 id="å…³äºç´¢å¼•çš„é•¿åº¦key-len"><a href="#å…³äºç´¢å¼•çš„é•¿åº¦key-len" class="headerlink" title="å…³äºç´¢å¼•çš„é•¿åº¦key_len"></a>å…³äºç´¢å¼•çš„é•¿åº¦key_len</h1><h2 id="è®¡ç®—æ–¹å¼"><a href="#è®¡ç®—æ–¹å¼" class="headerlink" title="è®¡ç®—æ–¹å¼"></a>è®¡ç®—æ–¹å¼</h2><blockquote>
<ol>
<li><p>æ•°å€¼ç±»å‹ - int</p>
<p>4 + 1(è¯¥åˆ—æ˜¯å¦ä¸ºnull,æ²¡æœ‰è®¾ç½®not null,å°±éœ€è¦åŠ 1,å­˜å‚¨nullä¹Ÿå 1ä¸ª)</p>
</li>
<li><p>å­—ç¬¦ä¸²ç±»å‹ - varchar(n) - utf8 - n*3+2+1(æ²¡æœ‰è®¾ç½®not null,å°±éœ€è¦åŠ 1,å­˜å‚¨nullä¹Ÿå 1ä¸ª)</p>
</li>
</ol>
</blockquote>
<h2 id="ç´¢å¼•é•¿åº¦ä½œç”¨"><a href="#ç´¢å¼•é•¿åº¦ä½œç”¨" class="headerlink" title="ç´¢å¼•é•¿åº¦ä½œç”¨"></a>ç´¢å¼•é•¿åº¦ä½œç”¨</h2><blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">site: www.baidu.com</span><br><span class="line">   www.baobao.com</span><br><span class="line">   www.baxy.com</span><br><span class="line">   </span><br><span class="line">siteç´¢å¼•é•¿åº¦æ˜¯5,ä¸å¤Ÿ,å‰ç¼€é‡å¤æ¯”è¾ƒå¤š.</span><br><span class="line">ç´¢å¼•é•¿åº¦è¦æœ‰åŒºåˆ†åº¦.</span><br><span class="line"></span><br><span class="line">æ¨èåè½¬ä¹‹åè¿›è¡Œå­˜å‚¨.å‡å°‘ç´¢å¼•é•¿åº¦.</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h1 id="ç´¢å¼•çš„åˆ›å»ºç­–ç•¥"><a href="#ç´¢å¼•çš„åˆ›å»ºç­–ç•¥" class="headerlink" title="ç´¢å¼•çš„åˆ›å»ºç­–ç•¥"></a>ç´¢å¼•çš„åˆ›å»ºç­–ç•¥</h1><blockquote>
<ul>
<li><p>å“ªäº›åˆ—åˆ›å»ºç´¢å¼•</p>
<ul>
<li><p>ä¸»é”®åˆ—,å”¯ä¸€æ€§åˆ—</p>
</li>
<li><p>é‡å¤æ€§æ¯”è¾ƒå°‘,ç»å¸¸è¢«æŸ¥è¯¢ä½†æ˜¯åŒæ—¶æ›´æ–°ä¸æ˜¯ç‰¹åˆ«é¢‘ç¹çš„åˆ—.</p>
</li>
<li><p>order by + æ’åºåˆ— - åˆ›å»ºç´¢å¼•.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">order byè¯­å¥æœ¬èº«æ€§èƒ½å°±å¾ˆä½ä¸‹çš„.  æ ¹æ®ç´¢å¼•è¿›è¡Œæ’åº.</span><br><span class="line">å¦‚æœæ˜¯idåˆ—ç´¢å¼•,æ’å…¥çš„æ—¶å€™å°±ä¼šå…ˆæ’åºäº†.</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>join on åˆ—</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æ¥è¿æ¥è¡¨çš„åˆ—é€‚åˆå»ºç´¢å¼•çš„.æœ¬èº«joinè¶Šå¤š,æ€§èƒ½è¶Šä½.</span><br><span class="line">å¼€å‘ä¸­å‡ ä¹éƒ½æ˜¯å•è¡¨æŸ¥è¯¢.å°½é‡ä¸è¦å»ä½¿ç”¨å¤æ‚æŸ¥è¯¢.</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
<li><p>ä¸é€‚åˆåˆ›å»ºç´¢å¼•</p>
<ul>
<li>nullå€¼å¤ªå¤šçš„åˆ—</li>
<li>é‡å¤å€¼å¤ªå¤šçš„åˆ—</li>
<li>æ›´æ–°æ¯”è¾ƒé¢‘ç¹çš„åˆ—</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h1><blockquote>
<ol>
<li><p>è¡Œé”</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">update s_emp set first_name='xxx' where id=1;//æ¡ä»¶åˆ—æ˜¯ç´¢å¼•åˆ— - è¡Œé” - é™ä½é”çš„ç²’åº¦</span><br><span class="line"></span><br><span class="line">è¡Œé”å’Œè¡¨é”</span><br><span class="line">1. è¡Œé”ç²’åº¦å°,æ¶‰åŠåˆ°é¢‘ç¹çš„åŠ é”å’Œé‡Šæ”¾é”çš„è¿‡ç¨‹.</span><br><span class="line">3. è¡¨é”ä¼šå½±å“åˆ°æŸ¥è¯¢æ•ˆç‡</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">update s_emp set first_name='xxx' where id=1;//å¦‚æœä¸Šé¢çš„äº‹åŠ¡æ²¡æœ‰commit,æ­¤å¤„ä¼šé˜»å¡</span><br><span class="line"></span><br><span class="line">å¦‚æœæ­¤å¤„æ›´æ–°çš„æ˜¯å¦å¤–ä¸€è¡Œ,å¯ä»¥ç›´æ¥æ‰§è¡Œupdate s_emp set first_name='xxx' where id=2;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>è¡¨é”</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">éç´¢å¼•åˆ—æ¡ä»¶æ›´æ–°çš„æ—¶å€™ - é”è¡¨.</span><br><span class="line">æ‰€æœ‰çš„DMLæ“ä½œé»˜è®¤çš„ç”³è¯·è¡¨é”</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>é¡µé”</p>
<p>ä»‹äºè¡Œé”å’Œè¡¨é”ä¹‹é—´çš„.</p>
</li>
<li><p>å…±äº«é”</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">selectè¯­å¥é»˜è®¤ç”³è¯·çš„å…±äº«é”.</span><br><span class="line">selectç”³è¯·æ’ä»–é”.</span><br><span class="line"></span><br><span class="line">selectè¯­å¥ for update;</span><br><span class="line"></span><br><span class="line">å®ç°æ‚²è§‚é”</span><br><span class="line"></span><br><span class="line">æ›´æ–°åº“å­˜stock</span><br><span class="line"></span><br><span class="line">ä¼ªä»£ç :</span><br><span class="line"></span><br><span class="line">begin;</span><br><span class="line"></span><br><span class="line">select stock from xxx where id=1 for update;</span><br><span class="line"></span><br><span class="line">//æ›´æ–°stock</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">commit;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/view/" rel="tag">view</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-mysql1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/08/09/mysql1/" class="article-date">
  	<time datetime="2022-08-09T13:22:47.000Z" itemprop="datePublished">2022-08-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/09/mysql1/">
        mysql1
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="æ•°æ®åº“ä»‹ç»"><a href="#æ•°æ®åº“ä»‹ç»" class="headerlink" title="æ•°æ®åº“ä»‹ç»"></a>æ•°æ®åº“ä»‹ç»</h1><blockquote>
<p>æŒ‰ç…§ä¸€å®šçš„æ•°æ®ç»“æ„æ¥ç»„ç»‡,ç®¡ç†å’Œå­˜å‚¨æ•°æ®çš„ä»“åº“</p>
<p>ç”¨ä»“åº“çš„æ–¹å¼æ¥ç®¡ç†æ•°æ®çš„.ä¸€ä¸ªä»“åº“ä¸‹ä¼šæœ‰å¾ˆå¤šè¡¨.ä¸€ä¸ªè¡¨ç”±è¡Œå’Œåˆ—æ„æˆ.</p>
</blockquote>
<h2 id="æ•°æ®çš„åˆ†ç±»"><a href="#æ•°æ®çš„åˆ†ç±»" class="headerlink" title="æ•°æ®çš„åˆ†ç±»"></a>æ•°æ®çš„åˆ†ç±»</h2><blockquote>
<ol>
<li><p>å…³ç³»å‹æ•°æ®åº“ </p>
<p><code>è¡¨æ ¼å‹æ•°æ®åº“ - æœ‰è¡Œå’Œåˆ—æ¥æ„æˆä¸€å¼ è¡¨,è¡¨ä¸­å­˜æ”¾æ•°æ®</code></p>
<p>å¸¸è§çš„äº§å“:MS-sqlserver,ä¸»æµçš„å…è´¹çš„Oracle-mysql(ä¸­å°å‹çš„åº”ç”¨),æ”¶è´¹çš„Oracle-oracle(å¤§å‹çš„åº”ç”¨)</p>
</li>
<li><p>nosql - ä¸ä»…ä»…æ˜¯sql - éå…³ç³»å‹æ•°æ®åº“</p>
<ul>
<li>é”®å€¼å¯¹æ•°æ®åº“ - redis</li>
<li>æ–‡æ¡£å‹æ•°æ®åº“ - mongodb</li>
<li>åˆ—å¼æ•°æ®åº“ - hbase</li>
<li>å›¾å½¢æ•°æ®åº“</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹"><a href="#æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹" class="headerlink" title="æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹"></a>æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹</h2><blockquote>
<ol>
<li><p>serverå’Œclient</p>
<p>å½“æˆ‘ä»¬å®‰è£…å¥½dbä¹‹å,è‡ªå¸¦å®‰è£…å¥½äº†mysql-serverç«¯å’Œmysql-clientç«¯</p>
<p><code>dbæ­£å¸¸ä½¿ç”¨,ä¸€å®šè¦ä¿éšœmysql-serverç«¯å¤„äºè¿è¡ŒçŠ¶æ€</code></p>
<ul>
<li><p>å³å‡»è®¡ç®—æœº - ç®¡ç† - æœåŠ¡ - æœåŠ¡å’Œåº”ç”¨ç¨‹åº - ğŸ‘‰ğŸ»å³è¾¹çª—å£ - Mysql - å¯åŠ¨æ–¹å¼è®¾ç½®å¼€å¯è‡ªå¯.</p>
</li>
<li><p>å¯ä»¥é€šè¿‡ç»ˆç«¯è¾“å…¥å‘½ä»¤æ¥å¯åŠ¨mysql-serverç«¯</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br><span class="line">net stop mysql</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>mysql-clientå®¢æˆ·ç«¯<ul>
<li>ç¬¬ä¸‰æ–¹çš„æ”¶è´¹navicat</li>
<li>idea</li>
<li>javaä»£ç </li>
<li>è‡ªå¸¦çš„æ§åˆ¶å°</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="ä¸“ä¸šæœ¯è¯­"><a href="#ä¸“ä¸šæœ¯è¯­" class="headerlink" title="ä¸“ä¸šæœ¯è¯­"></a>ä¸“ä¸šæœ¯è¯­</h2><blockquote>
<ol>
<li><p>DB - DataBase æ•°æ®åº“</p>
</li>
<li><p>DBA - æ•°æ®åº“ç®¡ç†å‘˜(ä¾§é‡äºè¿ç»´),DE - æ•°æ®åº“ç ”å‘å·¥ç¨‹å¸ˆ</p>
</li>
<li><p>DBMS - æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ,å®‰è£…åœ¨æ“ä½œç³»ç»Ÿ.ç”¨æˆ·é€šè¿‡dbmsæ¥æ“ä½œdb,dbaé€šè¿‡dbmsæ¥ç®¡ç†db,ä¿è¯dbåœ¨7*24hé«˜æ•ˆè¿è½¬</p>
<p><code>äºº - dbms - db(os)</code></p>
</li>
<li><p>RDBMS - å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ </p>
</li>
<li><p>DBS - æ•°æ®åº“ç³»ç»Ÿ,å¤§çš„èŒƒç•´,dbs = dba+db+dbms</p>
</li>
</ol>
</blockquote>
<h2 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h2><blockquote>
<p><code>å‰æ:mysqlå®‰è£…å¹¶ä¸”é…ç½®å¥½äº†ç¯å¢ƒå˜é‡</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uç”¨æˆ·å -på¯†ç </span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -proot</span><br></pre></td></tr></tbody></table></figure>

<p><code>ä¿®æ”¹å¯†ç </code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">alter user 'ç”¨æˆ·å'@'dbæ‰€åœ¨ä¸»æœºip' identified by 'æ–°çš„å¯†ç ';</span><br><span class="line"></span><br><span class="line">use mysql</span><br><span class="line"></span><br><span class="line">alter user 'root'@'localhost' identified by 'root';</span><br><span class="line"></span><br><span class="line">-- é€€å‡ºé‡æ–°ç™»å½•</span><br><span class="line">exit;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="å¯¼å…¥è„šæœ¬"><a href="#å¯¼å…¥è„šæœ¬" class="headerlink" title="å¯¼å…¥è„šæœ¬"></a>å¯¼å…¥è„šæœ¬</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">-- 1. åˆ›å»ºæ•°æ®åº“  create dabatase æ•°æ®åº“å</span><br><span class="line">create database dy;</span><br><span class="line"></span><br><span class="line">-- æŸ¥çœ‹æ‰€æœ‰çš„db</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">-- 2. ä½¿ç”¨æ•°æ®åº“</span><br><span class="line">use dy</span><br><span class="line"></span><br><span class="line">-- 3. å¯¼å…¥è„šæœ¬ - .sqlä¸ºåç¼€çš„sqlæ–‡ä»¶</span><br><span class="line">-- 3-1. åœ¨dyæ•°æ®åº“ä¸­ç”Ÿæˆ5å¼ è¡¨</span><br><span class="line">-- 3-2. æ¯å¼ è¡¨ä¸­æ¨¡æ‹Ÿä¸€äº›æ•°æ®</span><br><span class="line">source è„šæœ¬æ–‡ä»¶çš„ç»å¯¹è·¯å¾„;</span><br><span class="line"></span><br><span class="line">-- 4. æŸ¥çœ‹è¯¥åº“ä¸‹æ‰€æœ‰çš„è¡¨</span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">+--------------+</span><br><span class="line">| Tables_in_dy |</span><br><span class="line">+--------------+</span><br><span class="line">| s_customer   |</span><br><span class="line">| s_dept       |</span><br><span class="line">| s_emp        |</span><br><span class="line">| s_ord        |</span><br><span class="line">| s_region     |</span><br><span class="line">+--------------+</span><br><span class="line"></span><br><span class="line">--5. æŸ¥çœ‹è¡¨ç»“æ„</span><br><span class="line">desc s_emp</span><br></pre></td></tr></tbody></table></figure>

<h2 id="è®¾ç½®æ•°æ®åº“ç¼–ç "><a href="#è®¾ç½®æ•°æ®åº“ç¼–ç " class="headerlink" title="è®¾ç½®æ•°æ®åº“ç¼–ç "></a>è®¾ç½®æ•°æ®åº“ç¼–ç </h2><blockquote>
<ol>
<li><p>æŸ¥çœ‹ç¼–ç </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">show variables like 'character_set%';</span><br><span class="line"></span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                     |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                      |</span><br><span class="line">| character_set_connection | utf8                                                      |</span><br><span class="line">| character_set_database   | utf8                                                      |</span><br><span class="line">| character_set_filesystem | binary                                                    |</span><br><span class="line">| character_set_results    | utf8                                                      |</span><br><span class="line">| character_set_server     | utf8                                                      |</span><br><span class="line">| character_set_system     | utf8                                                      |</span><br><span class="line">| character_sets_dir       | /usr/local/mysql-5.7.28-macos10.14-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ä¿®æ”¹ç¼–ç </p>
<p>2-1. ä¸´æ—¶ä¿®æ”¹ - setå‘½ä»¤ - ä»…ä»…æ˜¯å¯¹å½“å‰ä¼šè¯(ä¸€æ¬¡è¿æ¥,çª—å£)æœ‰æ•ˆ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set names utf8;</span><br></pre></td></tr></tbody></table></figure>

<p>2-2. æ°¸ä¹…ç”Ÿæ•ˆ - æ‰¾åˆ°<strong>my.iniæ–‡ä»¶</strong></p>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">character_set_server</span>=utf8</span><br></pre></td></tr></tbody></table></figure>

<p>éœ€è¦é‡å¯mysql-server(mysqlæœåŠ¡å™¨ç«¯),æ‰èƒ½ç”Ÿæ•ˆ.</p>
<ol>
<li><p>é€šè¿‡guiæ–¹å¼</p>
</li>
<li><p>é€šè¿‡å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net stop mysql</span><br><span class="line">net start mysql</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</li>
</ol>
</blockquote>
<h2 id="SQLä»‹ç»"><a href="#SQLä»‹ç»" class="headerlink" title="SQLä»‹ç»"></a>SQLä»‹ç»</h2><blockquote>
<p>SQL æ˜¯ Structured Query Language çš„ç¼©å†™ï¼Œä¸­æ–‡è¯‘ä¸ºâ€œç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€â€ã€‚SQL æ˜¯ä¸€ç§è®¡ç®—æœºè¯­è¨€ï¼Œç”¨æ¥å­˜å‚¨ã€æ£€ç´¢å’Œä¿®æ”¹å…³ç³»å‹æ•°æ®åº“ä¸­å­˜å‚¨çš„æ•°æ®ã€‚</p>
<p>â‘ mysql-clientè¾“å…¥åˆæ³•çš„sqlè¯­å¥,å¦‚æœsqléæ³•,ç›´æ¥æŠ¥é”™</p>
<p>â‘¡è¾“å…¥å›è½¦- å®¢æˆ·ç«¯å°†sqlè¯­å¥å‘é€åˆ°mysql-serverç«¯,ç¼–è¯‘å’Œè§£æsqlè¯­å¥çš„.</p>
<p>â‘¢mysql-serverå°†æ‰§è¡Œå®Œsqlè¯­å¥çš„ç»“æœè¿”å›åˆ°mysql-clientè¿›è¡Œå±•ç¤º.</p>
</blockquote>
<h3 id="æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»"><a href="#æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»" class="headerlink" title="æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»"></a>æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»</h3><blockquote>
<ol>
<li><p>DDL(Data Definition Language) - æ•°æ®å®šä¹‰è¯­è¨€</p>
<p>create drop alter truncate rename comment(æ³¨é‡Š)</p>
</li>
<li><p>DML(Data Manipulation Language) - æ•°æ®æ“çºµè¯­è¨€</p>
<p>update delete insert</p>
</li>
<li><p>DQL(Data Query Language) - æ•°æ®æŸ¥è¯¢è¯­è¨€</p>
<p>select</p>
</li>
<li><p>TCL/DTL(Transaction Control Language):äº‹åŠ¡æ§åˆ¶è¯­è¨€</p>
<p>commit savepoint rollback</p>
</li>
</ol>
</blockquote>
<h1 id="ç®€å•æŸ¥è¯¢"><a href="#ç®€å•æŸ¥è¯¢" class="headerlink" title="ç®€å•æŸ¥è¯¢"></a>ç®€å•æŸ¥è¯¢</h1><blockquote>
<ol>
<li><p>æŸ¥è¯¢çš„æœ¬è´¨</p>
<ul>
<li>åˆ°å“ªé‡ŒæŸ¥</li>
<li>æŸ¥ä»€ä¹ˆ</li>
</ul>
</li>
<li><p>è¯­æ³• - å…³é”®å­—æ˜¯å¤§å°å†™ä¸æ•æ„Ÿ</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> åˆ—å<span class="number">1</span>,åˆ—å<span class="number">2</span>,..åˆ—n</span><br><span class="line"><span class="keyword">FROM</span> è¡¨å;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="åˆ—å–åˆ«å"><a href="#åˆ—å–åˆ«å" class="headerlink" title="åˆ—å–åˆ«å"></a>åˆ—å–åˆ«å</h2><blockquote>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—,è–ªæ°´ä»¥åŠèŒç§°.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary,title from s_emp;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼ä¸€</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1 åˆ—åˆ«å,åˆ—å2 åˆ—åˆ«å,..åˆ—n</span><br><span class="line">FROM è¡¨å;</span><br><span class="line"></span><br><span class="line">select first_name åå­—,salary è–ªæ°´,title èŒç§° from s_emp;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼äºŒ</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1 as åˆ—åˆ«å,åˆ—å2 as åˆ—åˆ«å,..åˆ—n</span><br><span class="line">FROM è¡¨å;</span><br><span class="line"></span><br><span class="line">select first_name as åå­—,salary as è–ªæ°´,title as èŒç§° from s_emp;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼ä¸‰</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åˆ—åˆ«åä¸­é—´æœ‰ç©ºæ ¼,éœ€è¦ä½¿ç”¨åŒå¼•å·æ¥åŒ…è£¹æ ¼å¼</span><br><span class="line">select first_name "å å­—",salary "è–ª æ°´",title as "èŒ ç§°" from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢æ‰€æœ‰åˆ—*</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- æ ¼å¼åŒ–è¾“å‡º</span><br><span class="line">select * from s_emp;</span><br><span class="line">   </span><br><span class="line">select * from s_emp \G;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="å»é‡å…³é”®å­—"><a href="#å»é‡å…³é”®å­—" class="headerlink" title="å»é‡å…³é”®å­—"></a>å»é‡å…³é”®å­—</h2><blockquote>
<p>distinct</p>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­æ‰€æœ‰çš„èŒç§°çš„ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct title from s_emp;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="åˆ—çš„è®¡ç®—"><a href="#åˆ—çš„è®¡ç®—" class="headerlink" title="åˆ—çš„è®¡ç®—"></a>åˆ—çš„è®¡ç®—</h2><blockquote>
<p>åˆ—æ˜¯å…è®¸è®¡ç®—çš„</p>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—,å¹´è–ª(ä¸å¸¦ææˆcommission_pct)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*12 å¹´è–ª from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—,å¹´è–ª(å¸¦ææˆcommission_pct)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+commission_pct/100)*12 å¹´è–ª from s_emp;</span><br><span class="line">   </span><br><span class="line">æŸ¥è¯¢å‡ºæ¥åªæœ‰5ä¸ªäººæœ‰å¹´è–ª,åŸå› æ˜¯å› ä¸ºåªæœ‰5ä¸ªäººæœ‰ææˆ.å…¶ä»–äººçš„ææˆéƒ½æ˜¯nullå€¼</span><br><span class="line">mysql - nullå€¼è®¡ç®—çš„ç»“æœè¿˜æ˜¯ä¸€ä¸ªnullå€¼</span><br><span class="line">   </span><br><span class="line">ä½¿ç”¨åˆ°mysqlä¸­æä¾›çš„ç©ºå€¼ç½®æ¢å‡½æ•°</span><br><span class="line">coalesce(m,n) - å¦‚æœmä¸ºnull,è¿”å›n,å¦åˆ™è¿”å›m</span><br><span class="line">   </span><br><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><blockquote>
<ol>
<li><p>æ‰¾å‡ºå‘˜å·¥çš„å§“å,å·¥èµ„ä»¥åŠå…¥èŒæ—¥æœŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select last_name,first_name,salary,start_date from s_emp;</span><br><span class="line"></span><br><span class="line">-- åˆ—çš„æ‹¼æ¥ concat(m,n,a,b,c,..)</span><br><span class="line">-- mysqlä¸­çš„å­—ç¬¦ä¸²ç»Ÿä¸€ä½¿ç”¨å•å¼•å·</span><br><span class="line">select concat(last_name,'  ',first_name) å§“å,salary,start_date from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºæ‰€æœ‰çš„å®¢æˆ·åä»¥åŠä»–çš„è”ç³»æ–¹å¼</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select name,phone from s_customer;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å§“åçš„æ—¶å€™</span><br><span class="line">-- è”¡æ ¹èŠ± - è”¡**</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºæ¯ä¸ªè®¢å•çš„è´¹ç”¨,æ”¯ä»˜æ–¹å¼ä»¥åŠå‡ºè´§æ—¥æœŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select total,payment_type,date_ordered from s_ord;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1,åˆ—å2,..åˆ—n</span><br><span class="line">FROM è¡¨å</span><br><span class="line">WHERE æ¡ä»¶è¡¨è¾¾å¼;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h3><p><code>æ¯”è¾ƒè¿ç®—ç¬¦</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; &lt; &gt;= &lt;= != &lt;&gt; =</span><br></pre></td></tr></tbody></table></figure>

<p><code>å…¶ä»–è¿ç®—ç¬¦</code></p>
<blockquote>
<ol>
<li>between â€¦  and ..  åœ¨â€¦åˆ°â€¦ä¹‹é—´</li>
<li>in(é›†åˆ) - åœ¨æŸä¸ªé›†åˆå†…</li>
<li>not in(é›†åˆ) - ä¸åœ¨æŸä¸ªé›†åˆå†…</li>
<li>is - åˆ¤æ–­æ˜¯å¦ä¸ºnull,åˆ¤æ–­nullå€¼ä¸èƒ½ç”¨=</li>
<li>is not - åˆ¤æ–­æ˜¯å¦ä¸ä¸ºnull</li>
</ol>
</blockquote>
<p><code>é€»è¾‘è¿æ¥ç¬¦</code></p>
<blockquote>
<ol>
<li>and æ¡ä»¶åŒæ—¶æˆç«‹,è¿”å›true</li>
<li>or æœ‰ä¸€ä¸ªæ¡ä»¶æˆç«‹,å°±è¿”å›true</li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -1"><a href="#ç»ƒä¹ -1" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>æŸ¥è¯¢éƒ¨é—¨ç¼–å·(dept_id)ä¸º41,42,45çš„å‘˜å·¥æ‰¾å‡ºæ¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select first_name,dept_id from s_emp</span><br><span class="line">where dept_id=41 or dept_id=42 or dept_id=45;</span><br><span class="line"></span><br><span class="line">select first_name,dept_id from s_emp where dept_id in(41,42,45);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢æ²¡æœ‰ææˆçš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,commission_pct from s_emp where commission_pct is null;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºå·¥èµ„åœ¨[1200,1500]ä¹‹é—´çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary from s_emp where salary between 1200 and 1500;</span><br><span class="line"></span><br><span class="line">-- æ›´åŠ çµæ´»</span><br><span class="line">select first_name,salary from s_emp where salary&gt;=1200 and salary&lt;=1500;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥æ‰¾å·¥èµ„å¤§äº1500å¹¶ä¸”æ²¡æœ‰ææˆçš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary from s_emp where salary&gt;1500 and commission_pct is null;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥æ‰¾å¹´è–ª(åŒ…æ‹¬ææˆ)è¶…è¿‡15000çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 _year from s_emp</span><br><span class="line">where salary*(1+coalesce(commission_pct,0)/100)*12&gt;15000;</span><br><span class="line"></span><br><span class="line">-- ç»™åˆ—å–åˆ«åçš„æ„ä¹‰</span><br><span class="line">-- å­æŸ¥è¯¢ - æŸ¥è¯¢çš„ç»“æœä½œä¸ºè™šæ‹Ÿè¡¨ - å­æŸ¥è¯¢ä¸€å®šè¦æ”¾åœ¨()ä¸­</span><br><span class="line">select * from X where _year&gt;15000;</span><br><span class="line"></span><br><span class="line">æŸ¥è¯¢çš„ç»“æœæ¥æ›¿ä»£X,å­æŸ¥è¯¢çš„ç»“æœä½œä¸ºè¡¨çš„è¯ - éœ€è¦ç»™è¡¨å–åˆ«å</span><br><span class="line">select * from (select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 _year from s_emp) core_ where _year&gt;15000;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºé™¤äº†41éƒ¨é—¨çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select first_name,dept_id from s_emp where dept_id &lt;&gt; 41;</span><br><span class="line"></span><br><span class="line">select first_name,dept_id from s_emp where dept_id not in(41);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºäºšæ´²åŒºåŸŸçš„ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- mysqlä¸­é‡‡ç”¨å•å¼•å·</span><br><span class="line">select * from s_region where name='Asia';</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h2><blockquote>
<p>å¤§å°å†™ä¸æ•æ„Ÿçš„</p>
</blockquote>
<blockquote>
<ol>
<li>å…³é”®å­—like</li>
<li>å ä½ç¬¦<ul>
<li>% ä»£è¡¨çš„ä»»æ„å¤šä¸ªä»»æ„å­—ç¬¦</li>
<li>_ ä»£è¡¨çš„æ˜¯ä»»æ„å•ä¸ªå­—ç¬¦</li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="è½¬ä¹‰å­—ç¬¦"><a href="#è½¬ä¹‰å­—ç¬¦" class="headerlink" title="è½¬ä¹‰å­—ç¬¦"></a>è½¬ä¹‰å­—ç¬¦</h3><blockquote>
<ul>
<li><p>first_nameåç§°æ­£å¥½åŒ…å«äº†%æˆ–è€…_</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update s_emp set first_name='Mar%k' where id=4;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢first_nameåŒ…å«%çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- å®šä¹‰è½¬ä¹‰å­—ç¬¦,é»˜è®¤çš„æ˜¯\</span><br><span class="line">select first_name from s_emp where first_name like '%\%%';</span><br><span class="line">  </span><br><span class="line">-- è‡ªå®šä¹‰è½¬ä¹‰å­—ç¬¦,ç”¨escape æ–°çš„è½¬ä¹‰å­—ç¬¦</span><br><span class="line">select first_name from s_emp where first_name like '%?%%' escape '?';</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</blockquote>
<h3 id="ç»ƒä¹ -2"><a href="#ç»ƒä¹ -2" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>æŸ¥è¯¢first_nameåŒ…å«mçš„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name from s_emp where first_name like '%m%';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢ä»¥Cå¼€å¤´çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name from s_emp where first_name like 'C%';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢ç¬¬ä¸‰ä¸ªå­—æ¯æ˜¯â€™eâ€™çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name from s_emp where first_name like '__e%';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å…¥èŒæ—¶é—´æ˜¯6æœˆä»½çš„å‘˜å·¥ - æ¨¡ç³ŠæŸ¥è¯¢ - ä¸æ˜¯æ­£è§„çš„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,start_date from s_emp where start_date like '%-06-%';</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1,åˆ—å2,..åˆ—n</span><br><span class="line">FROM è¡¨å</span><br><span class="line">WHERE æ¡ä»¶è¡¨è¾¾å¼</span><br><span class="line">ORDER Byè¯­å¥ [asc|desc]</span><br><span class="line"></span><br><span class="line">ascå¯ä»¥çœç•¥ä¸å†™ - å‡åº</span><br><span class="line">descå¿…é¡»è¦å†™ - é™åº</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<ol>
<li><p>æ ¹æ®å¹´è–ªé™åºæ’åˆ—</p>
<p><code>æ–¹å¼ä¸€: order by åˆ—å</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 from s_emp </span><br><span class="line">order by salary*(1+coalesce(commission_pct,0)/100)*12 desc;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼äºŒ:</code> order by åˆ—åˆ«å</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp </span><br><span class="line">order by å¹´è–ª desc;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼ä¸‰: order by åˆ—çš„åºå·</code>  åˆ—çš„åºå·ä»1å¼€å§‹ =&gt; æ¨èæ–¹å¼</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp </span><br><span class="line">order by 2 desc;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ ¹æ®å¹´è–ªé™åºæ’.å¦‚æœå¹´è–ªä¸€æ ·,åˆ™ç»§ç»­æŒ‰ç…§first_nameå‡åºæ’åˆ—</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp </span><br><span class="line">order by 2 desc,1;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="è½¬æ¢å‡½æ•°"><a href="#è½¬æ¢å‡½æ•°" class="headerlink" title="è½¬æ¢å‡½æ•°"></a>è½¬æ¢å‡½æ•°</h2><h3 id="æ•°å­—å’Œå­—ç¬¦ä¸²"><a href="#æ•°å­—å’Œå­—ç¬¦ä¸²" class="headerlink" title="æ•°å­—å’Œå­—ç¬¦ä¸²"></a>æ•°å­—å’Œå­—ç¬¦ä¸²</h3><blockquote>
<ol>
<li><p>å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select '1'+0;</span><br><span class="line"></span><br><span class="line">mysqlä¸­å­—ç¬¦æ•°å­—é‡åˆ°æ•°å­—è¿›è¡Œ+,è‡ªåŠ¨å°†å­—ç¬¦è½¬æ¢æˆæ•°å­—æ¥è¿›è¡Œè®¡ç®—.</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸² - concatå‡½æ•° - æ‹¼æ¥åˆ é™¤</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select concat(1,2);  // 12</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h3 id="å­—ç¬¦ä¸²å’Œæ—¥æœŸ"><a href="#å­—ç¬¦ä¸²å’Œæ—¥æœŸ" class="headerlink" title="å­—ç¬¦ä¸²å’Œæ—¥æœŸ"></a>å­—ç¬¦ä¸²å’Œæ—¥æœŸ</h3><blockquote>
<p>å…³äºæ—¥æœŸæ¨¡æ¿</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(åœ¨formatå­—ç¬¦ä¸²ä¸­å¯ç”¨æ ‡å¿—ç¬¦:  </span><br><span class="line">ã€€%m æœˆåå­—(januaryâ€¦â€¦december)    </span><br><span class="line">ã€€%w æ˜ŸæœŸåå­—(sundayâ€¦â€¦saturday)    </span><br><span class="line">ã€€%d æœ‰è‹±è¯­å‰ç¼€çš„æœˆä»½çš„æ—¥æœŸ(1st, 2nd, 3rd, ç­‰ç­‰ã€‚ï¼‰    </span><br><span class="line">ã€€%Y å¹´, æ•°å­—, 4 ä½    </span><br><span class="line">ã€€%y å¹´, æ•°å­—, 2 ä½    </span><br><span class="line">ã€€%a ç¼©å†™çš„æ˜ŸæœŸåå­—(sunâ€¦â€¦sat)    </span><br><span class="line">ã€€%d æœˆä»½ä¸­çš„å¤©æ•°, æ•°å­—(00â€¦â€¦31)    </span><br><span class="line">ã€€%e æœˆä»½ä¸­çš„å¤©æ•°, æ•°å­—(0â€¦â€¦31)    </span><br><span class="line">ã€€%m æœˆ, æ•°å­—(01â€¦â€¦12)    </span><br><span class="line">ã€€%c æœˆ, æ•°å­—(1â€¦â€¦12)    </span><br><span class="line">ã€€%b ç¼©å†™çš„æœˆä»½åå­—(janâ€¦â€¦dec)    </span><br><span class="line">ã€€%j ä¸€å¹´ä¸­çš„å¤©æ•°(001â€¦â€¦366)    </span><br><span class="line">ã€€%H 24æ—¶åˆ¶å°æ—¶(00â€¦â€¦23)    </span><br><span class="line">ã€€%k å°æ—¶(0â€¦â€¦23)    </span><br><span class="line">ã€€%h 12æ—¶å°æ—¶(01â€¦â€¦12)    </span><br><span class="line">ã€€%i å°æ—¶(01â€¦â€¦12)    </span><br><span class="line">ã€€%l å°æ—¶(1â€¦â€¦12)    </span><br><span class="line">ã€€%i åˆ†é’Ÿ, æ•°å­—(00â€¦â€¦59)    </span><br><span class="line">ã€€%r æ—¶é—´,12 å°æ—¶(hh:mm:ss [ap]m)    </span><br><span class="line">ã€€%t æ—¶é—´,24 å°æ—¶(hh:mm:ss)    </span><br><span class="line">ã€€%s ç§’(00â€¦â€¦59)       </span><br><span class="line">ã€€%p amæˆ–pm    </span><br><span class="line">ã€€%w ä¸€ä¸ªæ˜ŸæœŸä¸­çš„å¤©æ•°(0=sunday â€¦â€¦6=saturday ï¼‰  </span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<blockquote>
<ol>
<li><p>è·å–å½“å‰ç³»ç»Ÿçš„æ—¥æœŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select now();</span><br><span class="line"></span><br><span class="line">+---------------------+</span><br><span class="line">| now()               |</span><br><span class="line">+---------------------+</span><br><span class="line">| 2022-08-05 11:09:49 |</span><br><span class="line">+---------------------+</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ—¥æœŸè½¬æ¢æˆæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸² - date_format(æ—¥æœŸ,æ¨¡æ¿)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ¨¡æ¿  %Y   %m    %d  %H  %i   %s</span><br><span class="line"></span><br><span class="line">select date_format(now(),'%Y/%m/%d %H:%i:%s');</span><br><span class="line"></span><br><span class="line">select date_format(now(),'%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%iåˆ†%sç§’');</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å­—ç¬¦ä¸²è½¬æˆæ—¥æœŸ - str_to_date(å­—ç¬¦ä¸²,æ¨¡æ¿) - å­—ç¬¦ä¸²æ ¼å¼è¦å’Œæ¨¡æ¿çš„æ ¼å¼åŒ¹é…</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ é™¤è¡¨</span><br><span class="line">drop table tt;</span><br><span class="line">-- åˆ›å»ºè¡¨</span><br><span class="line">create table tt(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  name varchar(20),</span><br><span class="line">  birthday date</span><br><span class="line">);</span><br><span class="line">   </span><br><span class="line">-- date - å¹´æœˆæ—¥</span><br><span class="line">-- æ’å…¥æ•°æ®</span><br><span class="line">-- mysqlä¸­é»˜è®¤æ”¯æŒçš„æ ¼å¼ - ä¼šå°†å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æˆdateç±»å‹</span><br><span class="line">insert into tt values(1,'admin','2022-09-01');//ok</span><br><span class="line">insert into tt values(2,'tom','2022/09/01');//ok</span><br><span class="line">insert into tt values(3,'jack','20221001');//ok</span><br><span class="line">   </span><br><span class="line">-- ä¸æ”¯æŒçš„æ—¶å€™</span><br><span class="line">insert into tt values(4,'jack','aa');</span><br><span class="line">ERROR 1292 (22007): Incorrect date value: 'aa' for column 'birthday' at row 1</span><br><span class="line">   </span><br><span class="line">insert into tt values(4,'jack','01-05-2022');</span><br><span class="line">ERROR 1292 (22007): Incorrect date value: '01-05-2022' for column 'birthday' at row 1</span><br><span class="line">   </span><br><span class="line">-- éè¦ä½¿ç”¨'01-05-2022'å­—ç¬¦ä¸²æ ¼å¼çš„,æ‰éœ€è¦ä½¿ç”¨str_to_dateå‡½æ•°è¿›è¡Œè½¬æ¢</span><br><span class="line">insert into tt values(4,'jack',str_to_date('01-05-2022','%d-%m-%Y'));</span><br></pre></td></tr></tbody></table></figure>

<p><code>å¯¼å…¥è„šæœ¬çš„æ—¶å€™ - å¤±è´¥åœºæ™¯ - å­—ç¬¦ä¸²æ—¥æœŸæ ¼å¼ä¸æ”¯æŒ</code></p>
</li>
</ol>
</blockquote>
<h1 id="å•è¡Œå‡½æ•°"><a href="#å•è¡Œå‡½æ•°" class="headerlink" title="å•è¡Œå‡½æ•°"></a>å•è¡Œå‡½æ•°</h1><blockquote>
<ul>
<li><p>select å‡½æ•°(å‚æ•°);</p>
</li>
<li><p>å‡½æ•°æ˜¯å¯ä»¥åº”ç”¨åœ¨æŸ¥è¯¢åˆ—ä¸Šçš„.</p>
</li>
<li><p>å‡½æ•°æ˜¯å…è®¸åµŒå¥—ä½¿ç”¨çš„.</p>
</li>
</ul>
</blockquote>
<h2 id="1-å­—ç¬¦ä¸²å‡½æ•°"><a href="#1-å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="1. å­—ç¬¦ä¸²å‡½æ•°"></a>1. å­—ç¬¦ä¸²å‡½æ•°</h2><blockquote>
<ol>
<li><p>instr(str,substr) - è¿”å›å­—ç¬¦ä¸²substråœ¨å­—ç¬¦ä¸²strç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®(strä¸åŒ…å«substræ—¶è¿”å›0)</p>
</li>
<li><p>lpad(str,len,padstr) - ç”¨å­—ç¬¦ä¸²padstrå¡«è¡¥strå·¦ç«¯ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlenå¹¶è¿”å› </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select lpad('ab',5,'cd');//cdcab</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>rpad(str,len,padstr) - ç”¨å­—ç¬¦ä¸²padstrå¡«è¡¥strå³ç«¯ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlenå¹¶è¿”å›</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select rpad('ab',5,'cd');//abcdc   5ä»£è¡¨çš„æ˜¯æ€»çš„é•¿åº¦</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>left(str,len) - è¿”å›å­—ç¬¦ä¸²strçš„å·¦ç«¯lenä¸ªå­—ç¬¦ </p>
</li>
<li><p>right(str,len) - è¿”å›å­—ç¬¦ä¸²strçš„å³ç«¯lenä¸ªå­—ç¬¦ </p>
</li>
<li><p>substring(str,pos,len) - è¿”å›å­—ç¬¦ä¸²strçš„ä½ç½®posèµ·lenä¸ªå­—ç¬¦  </p>
</li>
<li><p>substring(str,pos) - è¿”å›å­—ç¬¦ä¸²strçš„ä½ç½®posèµ·åé¢çš„å­ä¸² </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åºå·ä»1å¼€å§‹</span><br><span class="line">select substring('mysql',2);  //ysql</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ltrim(str) - è¿”å›åˆ é™¤äº†å·¦ç©ºæ ¼çš„å­—ç¬¦ä¸²str  </p>
</li>
<li><p>rtrim(str)  - è¿”å›åˆ é™¤äº†å³ç©ºæ ¼çš„å­—ç¬¦ä¸²str  </p>
</li>
<li><p>space(n) - è¿”å›ç”±nä¸ªç©ºæ ¼å­—ç¬¦ç»„æˆçš„ä¸€ä¸ªå­—ç¬¦ä¸²  </p>
</li>
<li><p><em><strong>replace(str,from_str,to_str)  - ç”¨å­—ç¬¦ä¸²to_stræ›¿æ¢å­—ç¬¦ä¸²strä¸­çš„å­ä¸²from_strå¹¶è¿”å›</strong></em></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select replace('i love java','java','mysql');</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>reverse(str) - é¢ å€’å­—ç¬¦ä¸²strçš„å­—ç¬¦é¡ºåºå¹¶è¿”å›</p>
</li>
<li><p>insert(str,pos,len,newstr) - æŠŠå­—ç¬¦ä¸²strç”±ä½ç½®posèµ·lenä¸ªå­—ç¬¦é•¿çš„å­ä¸²æ›¿æ¢ä¸ºå­—ç¬¦ä¸²</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select insert('xxxxx',1,2,'**');</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>lower(str) - è¿”å›å°å†™çš„å­—ç¬¦ä¸²str  </p>
</li>
<li><p>upper(str) - è¿”å›å¤§å†™çš„å­—ç¬¦ä¸²str</p>
</li>
<li><p>char_length(str) -  ä¸ç®¡æ±‰å­—è¿˜æ˜¯æ•°å­—æˆ–è€…æ˜¯å­—æ¯éƒ½ç®—æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚</p>
</li>
<li><p>length(str);//æ±‰å­—å 3ä¸ª,å…¶ä»–å 1ä¸ª.</p>
</li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -3"><a href="#ç»ƒä¹ -3" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>é…åˆè¡¨ - å°†first_nameå…¨éƒ¨è½¬æ¢æˆå¤§å†™</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,upper(first_name) from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>first_name  - æ¨¡æ‹Ÿé“¶è¡Œè´¦æˆ·æ˜¾ç¤º,åªæ˜¾ç¤ºé¦–å­—æ¯,å…¶ä½™æ¯ä¸ªå­—æ¯ç”¨*è¡¨ç¤º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- substringå’Œrpad</span><br><span class="line">select first_name,rpad(substring(first_name,1,1),char_length(first_name),'*') from s_emp;</span><br><span class="line"></span><br><span class="line">-- concat + substring + rpad</span><br><span class="line">select first_name,concat(substring(first_name,1,1),rpad('*',char_length(first_name)-1,'*')) from s_emp;</span><br><span class="line"></span><br><span class="line">-- replace + substring + rpad</span><br><span class="line">select first_name,replace(first_name,substring(first_name,2),rpad('*',char_length(first_name)-1,'*'))</span><br><span class="line">from s_emp;</span><br><span class="line"></span><br><span class="line">-- insert + rpad</span><br><span class="line">select first_name,insert(first_name,2,char_length(first_name)-1,rpad('*',char_length(first_name)-1,'*'))</span><br><span class="line">from s_emp;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="2-æ•°å­—å‡½æ•°"><a href="#2-æ•°å­—å‡½æ•°" class="headerlink" title="2. æ•°å­—å‡½æ•°"></a>2. æ•°å­—å‡½æ•°</h2><blockquote>
<ol>
<li>abs(n) - æ±‚ç»å¯¹å€¼</li>
<li>mod(n,m) - å–æ¨¡è¿ç®—,è¿”å›nè¢«mé™¤çš„ä½™æ•°(åŒ%æ“ä½œç¬¦)</li>
<li><strong>floor(n) - è¿”å›ä¸å¤§äºnçš„æœ€å¤§æ•´æ•°å€¼</strong> - å‘ä¸‹å–æ•´  </li>
<li><strong>ceiling(n) - è¿”å›ä¸å°äºnçš„æœ€å°æ•´æ•°å€¼</strong>  - å‘ä¸Šå–æ•´ </li>
<li>round(n[,d]) - è¿”å›nçš„å››èˆäº”å…¥å€¼,ä¿ç•™dä½å°æ•°(dçš„é»˜è®¤å€¼ä¸º0)</li>
<li>pow(x,y) - è¿”å›å€¼xçš„yæ¬¡å¹‚  </li>
<li>sqrt(n) - è¿”å›éè´Ÿæ•°nçš„å¹³æ–¹æ ¹</li>
<li>pi() - è¿”å›åœ†å‘¨ç‡  </li>
<li>rand() - è¿”å›åœ¨èŒƒå›´[0åˆ°1.0)å†…çš„éšæœºæµ®ç‚¹å€¼</li>
<li>truncate(n,d) - ä¿ç•™æ•°å­—nçš„dä½å°æ•°å¹¶è¿”å›  - ç›´æ¥æˆªå–</li>
</ol>
</blockquote>
<h2 id="3-æ—¥æœŸå‡½æ•°"><a href="#3-æ—¥æœŸå‡½æ•°" class="headerlink" title="3. æ—¥æœŸå‡½æ•°"></a>3. æ—¥æœŸå‡½æ•°</h2><blockquote>
<p>æŸ¥è¯¢å½“å‰ç³»ç»Ÿçš„æ—¥æœŸ - select now();</p>
<ol>
<li><p>dayofweek(date) - è¿”å›æ—¥æœŸdateæ˜¯æ˜ŸæœŸå‡ (1=æ˜ŸæœŸå¤©,2=æ˜ŸæœŸä¸€,â€¦â€¦7=æ˜ŸæœŸå…­,odbcæ ‡å‡†)  </p>
</li>
<li><p>weekday(date) - è¿”å›æ—¥æœŸdateæ˜¯æ˜ŸæœŸå‡ (0=æ˜ŸæœŸä¸€,1=æ˜ŸæœŸäºŒ,â€¦â€¦6= æ˜ŸæœŸå¤©)</p>
</li>
<li><p>year(date) - è¿”å›dateçš„å¹´ä»½(èŒƒå›´åœ¨1000åˆ°9999)    </p>
</li>
<li><p>month(date)  - è¿”å›dateä¸­çš„æœˆä»½æ•°å€¼   </p>
</li>
<li><p>dayofmonth(date) - è¿”å›dateæ˜¯ä¸€æœˆä¸­çš„ç¬¬å‡ æ—¥(åœ¨1åˆ°31èŒƒå›´å†…)   </p>
</li>
<li><p>hour(time) - è¿”å›timeçš„å°æ—¶æ•°(èŒƒå›´æ˜¯0åˆ°23)  </p>
</li>
<li><p>minute(time) - è¿”å›timeçš„åˆ†é’Ÿæ•°(èŒƒå›´æ˜¯0åˆ°59) </p>
</li>
<li><p>second(time) - è¿”å›timeçš„ç§’æ•°(èŒƒå›´æ˜¯0åˆ°59) </p>
</li>
<li><p>period_add(p,n) - å¢åŠ nä¸ªæœˆåˆ°æ—¶æœŸpå¹¶è¿”å›(pçš„æ ¼å¼yymmæˆ–yyyymm) </p>
<p>mysql&gt;select period_add(â€˜202008â€™,3) ;</p>
<p>æ³¨æ„:på¯ä»¥æ˜¯å­—ç¬¦ä¸²,ä¸€å®šè¦æ»¡è¶³ä¸€å®šçš„æ ¼å¼,æˆ–è€…å¯ä»¥ç›´æ¥ä½¿ç”¨dateç±»å‹.</p>
</li>
<li><p>period_diff(p1,p2) - è¿”å›åœ¨æ—¶æœŸp1å’Œp2ä¹‹é—´æœˆæ•°(p1å’Œp2çš„æ ¼å¼yymmæˆ–yyyymm)  p1-p2</p>
</li>
<li><p>curdate() - ä»¥â€™yyyy-mm-ddâ€™æˆ–yyyymmddæ ¼å¼è¿”å›å½“å‰æ—¥æœŸå€¼(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—) </p>
</li>
<li><p>curtime() - ä»¥â€™hh:mm:ssâ€™æˆ–hhmmssæ ¼å¼è¿”å›å½“å‰æ—¶é—´å€¼(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—)</p>
</li>
<li><p>now() - ä»¥â€™yyyy-mm-dd hh:mm:ssâ€™æˆ–yyyymmddhhmmssæ ¼å¼è¿”å›å½“å‰æ—¥æœŸæ—¶é—´(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—)     </p>
</li>
<li><p>last_day(date) - dateæ—¥æœŸæ‰€åœ¨æœˆçš„æœ€åä¸€å¤©æ˜¯ä»€ä¹ˆæ—¶å€™</p>
</li>
<li><p>datediff(d1,d2) - ä¸¤ä¸ªæ—¥æœŸd1,d2ä¹‹é—´ç›¸å·®çš„å¤©æ•°</p>
</li>
<li><p>timestampdiff(type,d1,d2) - typeæ˜¯YEAR,d1å’Œd2ç›¸å·®çš„å¹´ä»½,MONTH,æœˆä»½</p>
<p>d1,d2 - yyyymmdd</p>
</li>
</ol>
</blockquote>
<h3 id="3-1-è¡¥å……"><a href="#3-1-è¡¥å……" class="headerlink" title="3-1. è¡¥å……"></a>3-1. è¡¥å……</h3><blockquote>
<ul>
<li><p>date_add(date,interval expr type)</p>
</li>
<li><p>date_sub(date,interval expr type)</p>
</li>
<li><p>å…³äºtype</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ype:</span><br><span class="line">year</span><br><span class="line">month</span><br><span class="line">day</span><br><span class="line">hour</span><br><span class="line">minute</span><br><span class="line">second</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</blockquote>
<p>#å…³è”æŸ¥è¯¢ </p>
<blockquote>
<p>å…³è”æŸ¥è¯¢å°±æ˜¯å¤šè¡¨æŸ¥è¯¢</p>
</blockquote>
<h2 id="é”™è¯¯çš„å†™æ³•"><a href="#é”™è¯¯çš„å†™æ³•" class="headerlink" title="é”™è¯¯çš„å†™æ³•"></a>é”™è¯¯çš„å†™æ³•</h2><blockquote>
<p>s_empè¡¨ä¸­25rows,s_deptè¡¨ä¸­12rows</p>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—ä»¥åŠè¿™ä¸ªå‘˜å·¥çš„éƒ¨é—¨åç§°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select first_name,name from s_emp,s_dept;</span><br><span class="line"></span><br><span class="line">300 rows </span><br><span class="line"></span><br><span class="line">å‘ç”Ÿäº†ç¬›å¡å°”ç§¯ - é”™è¯¯çš„ç»“æœ</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h3 id="çº æ­£-ä¼ ç»Ÿçš„å†™æ³•"><a href="#çº æ­£-ä¼ ç»Ÿçš„å†™æ³•" class="headerlink" title="çº æ­£ - ä¼ ç»Ÿçš„å†™æ³•"></a>çº æ­£ - ä¼ ç»Ÿçš„å†™æ³•</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">select first_name,name from s_emp,s_dept where dept_id=id;</span><br><span class="line"></span><br><span class="line">ERROR 1052 (23000): Column 'id' in where clause is ambiguous</span><br><span class="line"></span><br><span class="line">å¤šå¼ è¡¨ä¸­å‡ºç°åŒåçš„åˆ—,éœ€è¦å¯¹è¡¨å–åˆ«å</span><br><span class="line"></span><br><span class="line">æ­£ç¡®çš„å†™æ³•:</span><br><span class="line">select e.first_name,d.name from s_emp e,s_dept d where e.dept_id=d.id;</span><br><span class="line"></span><br><span class="line">-- ç”¨æ¥è¡¨ç¤ºè¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»foreign key - å¤–é”®</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢è¿™ä¸ªå‘˜å·¥çš„first_nameä»¥åŠè¿™ä¸ªå‘˜å·¥æ‰€åœ¨çš„åŒºåŸŸå.</span><br><span class="line">-- ä¸€ä¸ªåŒºåŸŸå¯¹åº”å¤šä¸ªéƒ¨é—¨,ä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥.</span><br><span class="line">select e.first_name,r.name from s_emp e,s_dept d,s_region r</span><br><span class="line">where d.region_id = r.id and e.dept_id = d.id;</span><br><span class="line"></span><br><span class="line">for( ...  s_emp e){</span><br><span class="line">	for(... s_dept d){</span><br><span class="line">	    if(e.dept_id==d.id){</span><br><span class="line">	      e+":"+d</span><br><span class="line">	    }</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="joinå’Œonå†™æ³•"><a href="#joinå’Œonå†™æ³•" class="headerlink" title="joinå’Œonå†™æ³•"></a>joinå’Œonå†™æ³•</h2><blockquote>
<p>å¦‚æœä¸€æ¡sqlè¯­å¥æ¶‰åŠåˆ°çš„è¡¨æ¯”è¾ƒå¤šçš„è¯,ä¼ ç»Ÿçš„å†™æ³•,å°±ä¸èƒ½å¾ˆç›´è§‚çš„çœ‹å‡ºæ¥å“ªä¸ªè¡¨å’Œå“ªä¸ªè¡¨ä¹‹é—´æœ‰ç›´æ¥çš„å…³ç³».</p>
<p>è¡¨ join è¡¨ on å»é™¤ç¬›å¡å°”ç§¯</p>
<p>å¤–é”®ä¸€å®šæ˜¯å‡ºç°åœ¨å¤šçš„ä¸€æ–¹</p>
<p><em><strong>on å¤šçš„ä¸€æ–¹çš„å¤–é”® = ä¸€çš„ä¸€æ–¹ä¸»é”®</strong></em></p>
<p><code>ä½†æ˜¯ä¹Ÿä¸ä¸€å®šéè¦ä½¿ç”¨å¤–é”®æ¥å»é™¤ç¬›å¡å°”ç§¯</code></p>
</blockquote>
<blockquote>
<p>è§„åˆ™: èƒ½å¤Ÿç”¨joinè¿æ¥çš„è¡¨ä¹‹é—´å¿…é¡»è¦æœ‰ç›´æ¥çš„å…³ç³».</p>
</blockquote>
<h3 id="ç»ƒä¹ -4"><a href="#ç»ƒä¹ -4" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>æ‰¾å‡ºæŸ¥è¯¢å‘˜å·¥çš„åå­—ä»¥åŠè¿™ä¸ªå‘˜å·¥çš„éƒ¨é—¨åç§°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select e.first_name,d.name from s_emp e join s_dept d on e.dept_id = d.id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºâ€™Asiaâ€™åŒºåŸŸä¸Šçš„æ‰€æœ‰çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select e.first_name,r.name from </span><br><span class="line">s_emp e join s_dept d</span><br><span class="line">on e.dept_id = d.id</span><br><span class="line">join s_region r</span><br><span class="line">on d.region_id = r.id</span><br><span class="line">where r.name='Asia';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºå®¢æˆ·çš„id,åç§°,è”ç³»æ–¹å¼ä»¥åŠè¿™ä¸ªå®¢æˆ·çš„è®¢å•ä¿¡æ¯</p>
<p>â€˜é—®é¢˜ - 15rows - [201,215]â€™</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.* from s_customer c</span><br><span class="line">join s_ord o on c.id = o.customer_id;</span><br><span class="line"></span><br><span class="line">æŸ¥è¯¢å‡ºæ¥çš„ç»“æœç¼ºäº†id=207å’Œ215ä¿©ä¸ªå®¢æˆ·,å› ä¸ºè¿™ä¿©ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,æ‰€ä»¥è¿™ä¿©ä¸ªå®¢æˆ·æ²¡æœ‰æŸ¥è¯¢å‡ºæ¥.</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="è¿æ¥çš„æ–¹å¼"><a href="#è¿æ¥çš„æ–¹å¼" class="headerlink" title="è¿æ¥çš„æ–¹å¼"></a>è¿æ¥çš„æ–¹å¼</h2><blockquote>
<ol>
<li><p>å†…è¿æ¥ - [inner] join</p>
<p><code>å¦‚æœjoinå·¦è¾¹çš„è¡¨åœ¨å³è¾¹çš„è¡¨ä¸­å¦‚æœä¸å­˜è®°å½•,åˆ™ä¸ä¼šè¢«æŸ¥è¯¢å‡ºæ¥.</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_customer c</span><br><span class="line">inner join s_ord o on c.id = o.customer_id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å·¦è¿æ¥ - left join</p>
<p><code>ä»¥å·¦è¾¹çš„è¡¨ä¸ºåŸºå‡†è¡¨.å³ä½¿å·¦è¾¹çš„è¡¨åœ¨å³è¾¹çš„è¡¨ä¸­æ²¡æœ‰è®°å½•,é‚£ä¹ˆå·¦è¾¹è¡¨ä¸­çš„è¿™æ¡è®°å½•ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<p><code>æŸ¥è¯¢å®¢æˆ·å’Œè®¢å•ä¿¡æ¯,å³ä½¿è¿™ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,é‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_customer c</span><br><span class="line">left join s_ord o on c.id = o.customer_id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å³è¿æ¥ - right join</p>
<p><code>ä»¥å³è¾¹çš„è¡¨ä¸ºåŸºå‡†è¡¨.å³ä½¿å³è¾¹çš„è¡¨åœ¨å·¦è¾¹çš„è¡¨ä¸­æ²¡æœ‰è®°å½•,é‚£ä¹ˆå³è¾¹è¡¨ä¸­çš„è¿™æ¡è®°å½•ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<p><code>æŸ¥è¯¢å®¢æˆ·å’Œè®¢å•ä¿¡æ¯,å³ä½¿è¿™ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,é‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_ord o</span><br><span class="line">right join s_customer c on c.id = o.customer_id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>äº¤å‰è¿æ¥ - cross join - ä¸ä¼šä½¿ç”¨çš„,äº§ç”Ÿçš„æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç»“æœé›† - ç¬›å¡å°”ç§¯</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_customer c</span><br><span class="line">cross join s_ord o;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å…¨è¿æ¥ full outer join - mysqlä¸æ”¯æŒ</p>
<p>å…¨è¿æ¥ = å·¦è¿æ¥ + å³è¿æ¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user;</span><br><span class="line">drop table t_info;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int primary key,</span><br><span class="line">  name varchar(20)</span><br><span class="line">);</span><br><span class="line">insert into t_user values(1,'admin');</span><br><span class="line">insert into t_user values(2,'python');</span><br><span class="line"></span><br><span class="line">create table t_info(</span><br><span class="line">	id int primary key,</span><br><span class="line">	remark varchar(20),</span><br><span class="line">	user_id int</span><br><span class="line">);</span><br><span class="line">insert into t_info values(1,'aaa',1);</span><br><span class="line">insert into t_info values(2,'bbb',3);</span><br><span class="line"></span><br><span class="line">-- åˆ†æ - å·¦è¿æ¥</span><br><span class="line">select u.*,info.* from t_user u left join t_info info on u.id = info.user_id;</span><br><span class="line">+----+--------+------+--------+---------+</span><br><span class="line">| id | name   | id   | remark | user_id |</span><br><span class="line">+----+--------+------+--------+---------+</span><br><span class="line">|  1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">|  2 | python | NULL | NULL   |    NULL |</span><br><span class="line">+----+--------+------+--------+---------+</span><br><span class="line"></span><br><span class="line">-- å³è¿æ¥</span><br><span class="line">select info.*,u.* from t_user u right join t_info info on u.id = info.user_id;</span><br><span class="line">+----+--------+---------+------+-------+</span><br><span class="line">| id | remark | user_id | id   | name  |</span><br><span class="line">+----+--------+---------+------+-------+</span><br><span class="line">|  1 | aaa    |       1 |    1 | admin |</span><br><span class="line">|  2 | bbb    |       3 | NULL | NULL  |</span><br><span class="line">+----+--------+---------+------+-------+</span><br><span class="line"></span><br><span class="line">-- å…¨è¿æ¥</span><br><span class="line">union - ä¸¤å¼ è¡¨ä¸­çš„é‡å¤çš„ç»“æœä¿ç•™äº†ä¸€æ¡ </span><br><span class="line"></span><br><span class="line">union all - ä¸¤å¼ è¡¨ä¸­çš„é‡å¤çš„ç»“æœéƒ½ä¼šå±•ç¤ºå‡ºæ¥ , å¹¶é›†</span><br><span class="line"></span><br><span class="line">select u.*,info.* from t_user u left join t_info info on u.id = info.user_id</span><br><span class="line">union all</span><br><span class="line">select u.*,info.* from t_user u right join t_info info on u.id = info.user_id;</span><br><span class="line"></span><br><span class="line"> id   | name   | id   | remark | user_id |</span><br><span class="line">+------+--------+------+--------+---------+</span><br><span class="line">|    1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">|    2 | python | NULL | NULL   |    NULL |</span><br><span class="line">|    1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">| NULL | NULL   |    2 | bbb    |       3 |</span><br><span class="line">+------+--------+------+--------+---------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select u.*,info.* from t_user u left join t_info info on u.id = info.user_id</span><br><span class="line">union </span><br><span class="line">select u.*,info.* from t_user u right join t_info info on u.id = info.user_id;</span><br><span class="line"></span><br><span class="line">+------+--------+------+--------+---------+</span><br><span class="line">| id   | name   | id   | remark | user_id |</span><br><span class="line">+------+--------+------+--------+---------+</span><br><span class="line">|    1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">|    2 | python | NULL | NULL   |    NULL |</span><br><span class="line">| NULL | NULL   |    2 | bbb    |       3 |</span><br><span class="line">+------+--------+------+--------+---------+</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -5"><a href="#ç»ƒä¹ -5" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<p>æŸ¥è¯¢å‘˜å·¥çš„åç§°ä»¥åŠä»–å¯¹åº”çš„ä¸Šå¸çš„åç§°,å³ä½¿è¿™ä¸ªå‘˜å·¥æ²¡æœ‰ä¸Šå¸,é‚£ä¹ˆä¹Ÿè¦æŸ¥è¯¢å‡ºæ¥ - è‡ªå…³è”</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select e1.first_name å‘˜å·¥,e2.first_name ä¸Šå¸</span><br><span class="line">from s_emp e1 left join s_emp e2 on e2.id = e1.manager_id;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h1 id="å¤šè¡Œå‡½æ•°"><a href="#å¤šè¡Œå‡½æ•°" class="headerlink" title="å¤šè¡Œå‡½æ•°"></a>å¤šè¡Œå‡½æ•°</h1><blockquote>
<ol>
<li><p>count - ç»Ÿè®¡ä¸ªæ•°,nullå€¼ä¸ä¼šç»Ÿè®¡,é‡å¤çš„æ•°æ®,æœ‰ä¸€ä¸ªç®—ä¸€ä¸ª</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select count(*) from s_emp;</span><br><span class="line"></span><br><span class="line">select count(e.id) from s_emp e;</span><br><span class="line"></span><br><span class="line">select count(e.commission_pct) from s_emp;//5ä¸ª</span><br><span class="line"></span><br><span class="line">-- ç»Ÿè®¡èŒç§°çš„ä¸ªæ•°,ä½†æ˜¯é‡å¤çš„èŒç§°åªèƒ½ç®—1ä¸ª</span><br><span class="line">select count(distinct title) from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>sum - æ€»å’Œ,å¿½ç•¥nullå€¼</p>
</li>
<li><p>avg,max,min</p>
</li>
</ol>
</blockquote>
<h1 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h1><blockquote>
<p><code>åˆ†ç»„ç»Ÿè®¡</code></p>
</blockquote>
<blockquote>
<p><code>è¯­æ³•</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT è¯­å¥</span><br><span class="line">WHERE è¯­å¥</span><br><span class="line">GROUP BY è¯­å¥</span><br><span class="line">HAVING è¯­å¥</span><br><span class="line">ORDER BY è¯­å¥</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="ç»ƒä¹ -6"><a href="#ç»ƒä¹ -6" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><blockquote>
<ol>
<li><p>ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•° - å•è¡¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select e.dept_id,count(e.id) from s_emp e group by e.dept_id;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><p>ç»Ÿè®¡éƒ¨é—¨çš„id,nameä»¥åŠè¿™ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- group by + d.id  --- ok   idæ˜¯ä¸»é”®åˆ— - å”¯ä¸€æ€§</span><br><span class="line">select d.id,d.name,count(e.id) from s_emp e</span><br><span class="line">join s_dept d on e.dept_id = d.id group by d.id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select d.id,d.name,count(e.id) from s_emp e</span><br><span class="line">join s_dept d on e.dept_id = d.id group by d.name;</span><br><span class="line">ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'dy.d.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</span><br><span class="line"></span><br><span class="line">-- æ¨èselectåé¢è·Ÿçš„åˆ—(é™¤äº†ç»„å‡½æ•°/å¤šè¡Œå‡½æ•°)åº”è¯¥å’Œgroup by è·Ÿçš„åˆ—ä¿æŒä¸€è‡´</span><br><span class="line">select d.id,d.name,count(e.id) from s_emp e</span><br><span class="line">join s_dept d on e.dept_id = d.id group by d.id,d.name;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡æ¯ä¸ªèŒç§°çš„äººæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select title,count(*) from s_emp group by title;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡åŒºåŸŸid,åŒºåŸŸå,ä»¥åŠè¿™ä¸ªåŒºåŸŸä¸Šçš„å‘˜å·¥çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select r.id,r.name,count(e.id) from s_region r join s_dept d</span><br><span class="line">on d.region_id = r.id join s_emp e on e.dept_id = d.id group by r.id,r.name;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡å®¢æˆ·çš„id,nameä»¥åŠè¿™ä¸ªå®¢æˆ·çš„è®¢å•çš„æ•°é‡,æ²¡æœ‰è®¢å•,åˆ™æ˜¾ç¤º0</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,count(o.id) from s_customer c left join s_ord o</span><br><span class="line">on o.customer_id = c.id group by c.id,c.name;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡å„å¹´ä»½å…¥èŒçš„å‘˜å·¥(å¹´ä»½,å‘˜å·¥æ•°é‡)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select year(start_date),count(e.id) from s_emp e</span><br><span class="line">group by year(start_date);</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h3 id="havingä½¿ç”¨æ–¹å¼"><a href="#havingä½¿ç”¨æ–¹å¼" class="headerlink" title="havingä½¿ç”¨æ–¹å¼"></a>havingä½¿ç”¨æ–¹å¼</h3><blockquote>
<p>havingå’ŒwhereåŒºåˆ«</p>
<ol>
<li>whereæ¡ä»¶ç­›é€‰,ä½†æ˜¯åˆ†ç»„ä¹‹å‰,å¹¶ä¸”whereä¸ä¼šè·Ÿç»„å‡½æ•°</li>
<li>havingåˆ†ç»„ä¹‹åçš„è¿›ä¸€æ­¥è¿‡æ»¤,ä½¿ç”¨ç»„å‡½æ•°è¿›è¡Œè¿‡æ»¤çš„</li>
</ol>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<ol>
<li><p>æŸ¥è¯¢å‡ºå¹³å‡å·¥èµ„è¶…è¿‡1300çš„éƒ¨é—¨ - éƒ¨é—¨id,name,å¹³å‡å·¥èµ„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select d.id,d.name,avg(e.salary) from s_dept d join s_emp e</span><br><span class="line">on d.id = e.dept_id group by d.id,d.name having avg(e.salary)&gt;1300;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡é™¤äº†â€™Asiaâ€™åŒºåŸŸä¹‹å¤–çš„å„ä¸ªåŒºåŸŸçš„id,nameå’ŒåŒºåŸŸä¸Šçš„äººæ•°[å¤§äº3ä¸ª],æœ€åå†æ ¹æ®åŒºåŸŸçš„idè¿›è¡Œé™åºæ’åˆ—</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select r.id,r.name,count(e.id) from s_region r </span><br><span class="line">join s_dept d on r.id = d.region_id</span><br><span class="line">join s_emp e on e.dept_id = d.id</span><br><span class="line">where r.name&lt;&gt;'Asia'</span><br><span class="line">group by r.id,r.name</span><br><span class="line">having count(e.id)&gt;3</span><br><span class="line">order by 1 desc;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢æ²¡æœ‰è®¢å•çš„å®¢æˆ·</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,count(o.id) from s_customer c</span><br><span class="line">left join s_ord o on c.id = o.customer_id group by c.id,c.name having count(o.id)=0;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h1 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h1><blockquote>
<p>å­æŸ¥è¯¢å¿…é¡»ä½¿ç”¨()æ‹¬èµ·æ¥</p>
<ul>
<li>æ¡ä»¶åˆ—</li>
<li>æŸ¥è¯¢åˆ—</li>
<li>å­æŸ¥è¯¢çš„ç»“æœçœ‹åšæ˜¯â€ä¸€å¼ è¡¨â€</li>
</ul>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<ol>
<li><p>æŸ¥æ‰¾å’ŒMarkå·¥èµ„ä¸€æ ·çš„å‘˜å·¥.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ†è§£ - markå·¥èµ„ - 1450</span><br><span class="line">select salary from s_emp where first_name='Mark';</span><br><span class="line"></span><br><span class="line">-- æ‰¾å‡º1450è–ªèµ„çš„å‘˜å·¥</span><br><span class="line">select first_name,salary from s_emp where salary = 1450 and first_name&lt;&gt;'Mark';</span><br><span class="line"></span><br><span class="line">-- æ•´åˆ</span><br><span class="line">-- å­æŸ¥è¯¢å‡ºç°åœ¨æ¡ä»¶éƒ¨åˆ†</span><br><span class="line">select first_name,salary from s_emp where salary = (select salary from s_emp where first_name='Mark')  and first_name&lt;&gt;'Mark';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„id,nameä»¥åŠéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select d.id,d.name,(</span><br><span class="line">	select count(e.id) from s_emp e where e.dept_id = d.id</span><br><span class="line">) from s_dept d;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<p><code>ç»ƒä¹ 2</code></p>
<blockquote>
<ol>
<li>ç»Ÿè®¡å®¢æˆ·çš„id,nameä»¥åŠå®¢æˆ·çš„è®¢å•æ•°é‡</li>
</ol>
 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,(select count(o.id) from s_ord o where o.customer_id = c.id) from s_customer c;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>æ‰¾å‡ºéƒ¨é—¨å¹³å‡å·¥èµ„é«˜äºå…¬å¸å¹³å‡å·¥èµ„çš„éƒ¨é—¨ä¿¡æ¯</li>
</ol>
 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select dept_id,avg(salary) from s_emp group by dept_id having avg(salary)&gt;(select avg(salary) from s_emp);</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>æ‰¾å‡ºä¸â€™Benâ€™åŒéƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯</li>
</ol>
 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- æ–¹å¼ä¸€</span><br><span class="line">select first_name,dept_id from s_emp where dept_id=(select dept_id from s_emp where first_name='Ben')</span><br><span class="line">and first_name&lt;&gt;'Ben';</span><br><span class="line"></span><br><span class="line">-- æ–¹å¼äºŒ</span><br><span class="line">select e.first_name,(select e.dept_id from s_emp e1 where e1.first_name='Ben' and e1.dept_id=e.dept_id) did from s_emp e where e.first_name&lt;&gt;'Ben';</span><br><span class="line"></span><br><span class="line">-- æ–¹å¼äºŒæ•´åˆ - æŠŠå­æŸ¥è¯¢çš„ç»“æœä½œä¸ºä¸€å¼ è¡¨,å¿…é¡»è¦åˆ«å</span><br><span class="line">select * from (select e.first_name,(select e.dept_id from s_emp e1 where e1.first_name='Ben' and e1.dept_id=e.dept_id) did from s_emp e where e.first_name&lt;&gt;'Ben') core_</span><br><span class="line">where core_.did is not null;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote>
<ol>
<li><p>èƒ½ç”¨åˆ†ç»„æŸ¥è¯¢æŸ¥è¯¢å°±ä¸è¦ä½¿ç”¨å­æŸ¥è¯¢(åµŒå¥—è¶Šå¤š,æŸ¥è¯¢æ•ˆç‡è¶Šä½)</p>
</li>
<li><p>æ— å…³å­æŸ¥è¯¢(å­æŸ¥è¯¢å¯ä»¥ç‹¬ç«‹è¿è¡Œ)å’Œç›¸å…³å­æŸ¥è¯¢(å­æŸ¥è¯¢ä½¿ç”¨åˆ°äº†å¤–éƒ¨æŸ¥è¯¢çš„ä¸œè¥¿)</p>
<p>æ— å…³å­æŸ¥è¯¢&gt;ç›¸å…³å­æŸ¥è¯¢</p>
</li>
<li><p>å­æŸ¥è¯¢ä¼šæ¯”åˆ†ç»„æŸ¥è¯¢æ›´åŠ çµæ´».</p>
</li>
</ol>
</blockquote>
<h1 id="existså’Œnot-exists"><a href="#existså’Œnot-exists" class="headerlink" title="existså’Œnot exists"></a>existså’Œnot exists</h1><blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT è¯­å¥</span><br><span class="line">WHERE exists (å­æŸ¥è¯¢)</span><br><span class="line"></span><br><span class="line">è§„åˆ™: ä¸å…³å¿ƒå­æŸ¥è¯¢æŸ¥åˆ°çš„å†…å®¹æ˜¯ä»€ä¹ˆ,å­æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæŸ¥è¯¢å‡ºç»“æœ.</span><br><span class="line">å¦‚æœæŸ¥è¯¢å‡ºç»“æœ,ç­‰åŒäºwhere true</span><br><span class="line"></span><br><span class="line">select id,first_name from s_emp where exists(select 1 from s_emp where 1=1);</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ‰¾å‡ºå’Œ'Ben'åŒä¸€ä¸ªéƒ¨é—¨çš„å‘˜å·¥</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select e.first_name,e.dept_id from s_emp e </span><br><span class="line">where exists(</span><br><span class="line">select 1 from s_emp e1 where e1.first_name='Ben' and e1.dept_id = e.dept_id</span><br><span class="line">) and e.first_name&lt;&gt;'Ben';</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<p>æ‰¾å‡ºå„ä¸ªéƒ¨é—¨å·¥èµ„æ’åå‰äºŒçš„å‘˜å·¥</p>
<p>æ€è·¯: åœ¨â€™æˆ‘â€™è¿™ä¸ªéƒ¨é—¨ä¸­,æœ‰äººçš„å·¥èµ„æ¯”æˆ‘é«˜,ä½†æ˜¯æ•°é‡ä¸èƒ½è¶…è¿‡1ä¸ª</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select e.id,e.salary,e.dept_id from s_emp e</span><br><span class="line">where exists(</span><br><span class="line">	select 1 from s_emp e1 where e1.dept_id = e.dept_id and</span><br><span class="line">e1.salary&gt;e.salary having count(*)&lt;=1</span><br><span class="line">) order by 3;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<p>æ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨ä¸­å·¥èµ„æœ€é«˜çš„é‚£ä¸ªäºº</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/" rel="tag">æ•°æ®åº“åŸºç¡€</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-ç´¢å¼•" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/08/09/%E7%B4%A2%E5%BC%95/" class="article-date">
  	<time datetime="2022-08-09T11:22:53.000Z" itemprop="datePublished">2022-08-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/09/%E7%B4%A2%E5%BC%95/">
        ç´¢å¼•
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="view"><a href="#view" class="headerlink" title="view"></a>view</h3><ul>
<li><h4 id="create-view"><a href="#create-view" class="headerlink" title="create view"></a>create view</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">drop view student_view;</span><br><span class="line">create view student_view as select *from t_student where id%2=0;</span><br><span class="line"></span><br><span class="line">-- insert into t_student</span><br><span class="line">insert into t_student values(5,'java',20),(6,'javab',25),(7,'sad',20),(8,'jksd',56);</span><br><span class="line"></span><br><span class="line">-- update student_view</span><br><span class="line">update student_view set age=100 where id=8;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><h4 id="create-complex-view"><a href="#create-complex-view" class="headerlink" title="create complex view"></a>create complex view</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">-- æœ‰å…³ç³»çš„ä¸¤å¼ è¡¨ï¼ˆfkï¼‰</span><br><span class="line">drop view student_view2;</span><br><span class="line">create view student_view2 as select s.*,sc.c_id from t_student s left join t_sc sc  on  s.id=sc.s_id;</span><br><span class="line"></span><br><span class="line">-- update view</span><br><span class="line">update student_view2 set name='as' ;</span><br><span class="line"></span><br><span class="line">ERROR 1288 (HY000): The target table student_view2 of the UPDATE is not updatable</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- æ— å…³ç³»çš„ä¸¤å¼ è¡¨</span><br><span class="line">drop table tt;</span><br><span class="line">drop table ta;</span><br><span class="line">create table tt(</span><br><span class="line"> id int(7) primary key,</span><br><span class="line">tname varchar(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table ta(</span><br><span class="line"> taid int(7) primary key,</span><br><span class="line">tt_id int(7)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into tt values(1,'aa');</span><br><span class="line">insert into tt values(2,'aa');</span><br><span class="line">insert into tt values(3,'aa');</span><br><span class="line">insert into tt values(4,'aa');</span><br><span class="line"></span><br><span class="line">insert into ta values(1,1);</span><br><span class="line">insert into ta values(2,2);</span><br><span class="line">insert into ta values(3,3);</span><br><span class="line">insert into ta values(4,4);</span><br><span class="line">drop view t_view;</span><br><span class="line">create view t_view as select * from tt t join ta a on a.tt_id=t.id;</span><br><span class="line">update t_view set tname='as';</span><br><span class="line"></span><br><span class="line">create view t_view2 as select count(*)from tt t join ta a on a.tt_id=t.id;</span><br><span class="line">update t_view set count=10;</span><br><span class="line"></span><br><span class="line">è§†å›¾ä½œç”¨ï¼š1.å°è£…sql  2.å±è”½åº•å±‚æ•°æ®åº“ç»“æ„  3.å®šåˆ¶æ•°æ®   4.å®‰å…¨æ€§ï¼ˆgrantï¼‰</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">-- function:æé«˜æŸ¥è¯¢æ•ˆç‡</span><br><span class="line">åº•å±‚ï¼šb+æ•°  myisamï¼ˆæ•°æ®ï¼Œç´¢å¼•åˆ†åˆ«å­˜å‚¨ï¼‰,innodb(æ•°æ®ï¼Œç´¢å¼•åˆäºŒä¸ºä¸€)</span><br><span class="line">-- ä¸»é”®åˆ—é»˜è®¤ç´¢å¼•åˆ—</span><br><span class="line">show index from è¡¨å</span><br><span class="line"></span><br><span class="line">-- ç´¢å¼•åˆ†ç±»</span><br><span class="line">1.ä¸»é”®ç´¢å¼•ï¼ˆprimary keyï¼‰</span><br><span class="line">2.unique</span><br><span class="line">3.å…¨æ–‡ç´¢å¼•ï¼ˆelasticsearchï¼‰</span><br><span class="line">4.å¤åˆç´¢å¼•</span><br><span class="line">create index index_name on tablename(column 1,column 2)</span><br><span class="line">5.æ™®é€šç´¢å¼•</span><br><span class="line">create index index_name on tablename(colunmn)</span><br><span class="line"></span><br><span class="line">drop table index_test;</span><br><span class="line">create table index_test(</span><br><span class="line">id int(7) primary key auto_increment,</span><br><span class="line">a int(7),</span><br><span class="line">b int(7),</span><br><span class="line">c varchar(20),</span><br><span class="line">d varchar(20)</span><br><span class="line">);</span><br><span class="line">insert into index_test values(1,2,3,'20w','cc'),(null,22,93,'2s0','dd'),(null,22,33,'w20','ss'),(null,22,53,'201','hh'),(null,72,43,'200','gg'),(null,2,3,'20i','ff');</span><br><span class="line"></span><br><span class="line">drop index t_index;</span><br><span class="line">create index t_index on index_test(a,b,c);</span><br><span class="line"></span><br><span class="line">-- jude index valid</span><br><span class="line">explain +select....</span><br><span class="line"></span><br><span class="line">explain select * from index_test where a=2 and b=3 and c='20w';(ref) len=93  </span><br><span class="line">+----+-------------+------------+------------+------+---------------+---------+---------+-------------------+------+----------+-------+</span><br><span class="line">| id | select_type | table      | partitions | type | possible_keys | key     | key_len | ref               | rows | filtered | Extra |</span><br><span class="line">+----+-------------+------------+------------+------+---------------+---------+---------+-------------------+------+----------+-------+</span><br><span class="line">|  1 | SIMPLE      | index_test | NULL       | ref  | t_index       | t_index | 93      | const,const,const |    1 |   100.00 | NULL  |</span><br><span class="line">+----+-------------+------------+------------+------+---------------+---------+---------+-------------------+------+----------+-------+</span><br><span class="line">-- ç´¢å¼•å¤±æ•ˆ*</span><br><span class="line">1.å¤åˆç´¢å¼•æœ€å·¦åŒ¹é…åŸåˆ™</span><br><span class="line">explain select *from index_test where b=3 and c='20w';(All len=0)</span><br><span class="line">explain select *from index_test where a=3 and b=2;(ref len=10)</span><br><span class="line">explain select *from index_test where c='sd' and a=10 and b=2;(ref len=93),è°ƒä¼˜</span><br><span class="line">2.æ¨¡ç³ŠåŒ¹é…</span><br><span class="line">-- %åœ¨æœ«å°¾ç”Ÿæ•ˆ</span><br><span class="line">explain select * from index_test where a=1 and b=2 and c like 's%';(ref len=93)</span><br><span class="line">%åœ¨å‰éƒ¨åˆ†ç”Ÿæ•ˆåŒï¼ˆ%ï¼Ÿ%ï¼‰</span><br><span class="line">explain select * from index_test where a=1 and b=2 and c like '%s';(ref len=10)-- a,bèµ°ç´¢å¼•</span><br><span class="line">3.æŸ¥è¯¢èŒƒå›´</span><br><span class="line">explain select * from index_test where a=1 and b&gt;2 and c='21';(ref len=10)</span><br><span class="line">4.ç´¢å¼•è®¡ç®—</span><br><span class="line">explain select* from index_test where id+1=1;(all)</span><br><span class="line">5.ç´¢å¼•ä½¿ç”¨å‡½æ•°</span><br><span class="line">explain select* from index_test where abs(id)=1;(all)</span><br><span class="line">6.cæŸ¥è¯¢æ•°æ®è¶…è¿‡ç™¾åˆ†ä¹‹30ï¼ˆæ•°æ®é‡è¶³å¤Ÿå¤§ï¼‰</span><br><span class="line">7.is null and is not null</span><br><span class="line">(is null ä¸èµ°ç´¢å¼•ï¼Œis not null èµ°ç´¢å¼•)</span><br><span class="line">8.in and not in</span><br><span class="line">before 5.7 in(èµ°ç´¢å¼•)  not in(ä¸èµ°)</span><br><span class="line">after 8.0 not in ( allow index)</span><br><span class="line"></span><br><span class="line">-- ç´¢å¼•çš„åˆ›å»ºç­–ç•¥</span><br><span class="line">-- fit create index</span><br><span class="line">1.primary key or unique</span><br><span class="line">2.é‡å¤æ€§å°‘ï¼Œç»å¸¸è¢«æŸ¥è¯¢ï¼Œä½†æ˜¯æ›´æ–°å°‘</span><br><span class="line">3.order by åˆ—</span><br><span class="line">4.join on åˆ—</span><br><span class="line">-- unfit create index</span><br><span class="line">1.nullå€¼åˆ—</span><br><span class="line">2.é‡å¤åˆ—</span><br><span class="line">3.æ›´æ–°é¢‘ç¹åˆ—</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.è¡Œé”ï¼ˆä¸¤çº¿ç¨‹ä¸èƒ½åŒæ—¶ä¿®æ”¹æŸä¸€è¡Œçš„å€¼ï¼‰</span><br><span class="line">update XX set xx=xx where id=1;//å¿…é¡»æ˜¯ç´¢å¼•åˆ—ï¼Œé™ä½é”çš„ç²’åº¦</span><br><span class="line">2.è¡¨é”ï¼ˆéç´¢å¼•åˆ—ä¸ºæ¡ä»¶æ›´æ–° ä¼šè§¦å‘è¡¨é”ï¼‰</span><br><span class="line">æ‰€æœ‰çš„DMLæ“ä½œéƒ½ä¼šé˜»å¡</span><br><span class="line">3.é¡µé”ï¼ˆä»‹äºè¡Œé”ä¸è¡¨é”ä¹‹é—´ï¼‰</span><br><span class="line">ä¸€é¡µï¼šç”±è‹¥å¹²è¡Œç»„æˆçš„æ•°æ®ï¼ˆB+æ ‘ï¼‰</span><br><span class="line">4.å…±äº«é”ï¼ˆselect,ç±»ä¼¼Javaçš„è¯»é”ï¼‰</span><br><span class="line">-- selectè¯­å¥ç”³è¯·æ’ä»–é”</span><br><span class="line">select stock from xxx where id=1 for update;ï¼ˆæ‚²è§‚é”ï¼šå¹²å•¥éƒ½æ‚²è§‚ï¼Œæ€»æ‹…å¿ƒæœ‰äººæ”¹æ•°æ®ï¼Œç´¢æ€§ç»™å…¨é”äº†ï¼‰	</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç´¢å¼•åº•å±‚åŸç†"><a href="#ç´¢å¼•åº•å±‚åŸç†" class="headerlink" title="ç´¢å¼•åº•å±‚åŸç†"></a>ç´¢å¼•åº•å±‚åŸç†</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">myisam(mai se meng),innoDB-----&gt;B+æ ‘</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">äºŒå‰æŸ¥æ‰¾æ ‘-&gt;äºŒå‰æœç´¢æ ‘-&gt;B+æ ‘</span><br><span class="line"></span><br><span class="line">äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆå¤±è¡¡ï¼‰--&gt;ï¼ˆäº§ç”Ÿï¼‰äºŒå‰å¹³è¡¡æ ‘ï¼ˆæ•°æ®èŠ‚ç‚¹è¿‡å¤šï¼‰-&gt;Bæ ‘ï¼ˆå‚¨å­˜ä¸€é¡µæ•°æ®ï¼Œkeyå’Œvalueéƒ½å­˜ï¼‰-&gt;b+æ ‘</span><br><span class="line"></span><br><span class="line">B+æ ‘</span><br><span class="line">1.éé¡µèŠ‚ç‚¹å­˜å‚¨key</span><br><span class="line">2.æ•°æ®å­˜å¶å­ï¼Œä¸”ç›¸å¯¹æœ‰åº</span><br><span class="line">3.é¡µä¸é¡µï¼ˆæ ‘èŠ‚ç‚¹ï¼‰ä¹‹é—´æ˜¯åŒå‘é“¾è¡¨</span><br><span class="line">4.å¶å­å†…éƒ¨æ•°æ®æ˜¯å•å‘é“¾è¡¨</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="B-æ ‘"><a href="#B-æ ‘" class="headerlink" title="B+æ ‘"></a>B+æ ‘</h3><p>â€“ èšç°‡ç´¢å¼•</p>
<p><img src="/B+.jpg" alt="B+"></p>
<h3 id="èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•"><a href="#èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•" class="headerlink" title="èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•"></a>èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">innoDBä¸ºå¼•æ“çš„è¡¨ï¼Œè¡¨ä¸­çš„æ•°æ®éƒ½ä¼šæœ‰ä¸»é”®ï¼Œå³ä½¿ä¸ä¸»åŠ¨å£°æ˜ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªéšå¼çš„ä¸»é”®.B+æ ‘çš„é”®å€¼å°±æ˜¯ä¸»é”®.è¿™ç§**ä»¥ä¸»é”®ä¸ºB+æ ‘ç´¢å¼•è€Œæ„æˆçš„B+æ ‘***ç´¢å¼•ï¼Œç§°ä¸ºèšç°‡ç´¢å¼•</span><br><span class="line"></span><br><span class="line">éèšç°‡ç´¢å¼•ï¼šä»¥å…¶ä»–åˆ—å€¼æ„å»ºB+æ ‘çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">-- éèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å¹¶ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯å­˜å‚¨å¯¹åº”çš„ä¸»é”®ï¼Œå› æ­¤è¿˜éœ€è¦é€šè¿‡ç´¢å¼•æŸ¥æ•°æ®ï¼Œç§°ä¹‹ä¸ºå›è¡¨</span><br><span class="line">ï¼ˆæ³¨ï¼Œè‹¥æ‰€æŸ¥æ•°æ®ä¸ºä¸»é”®åˆ—ï¼Œæˆ–è€…è¯¥åˆ—ï¼Œåˆ™ä¸éœ€è¦å›è¡¨ï¼‰</span><br></pre></td></tr></tbody></table></figure>

<p><img src="C:\Users\liming\Desktop\jusearch.jpg" alt="jusearch"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from xx where id&gt;=18 and id&lt;41;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="éèšç°‡ç´¢å¼•æŸ¥æ‰¾å›¾"><a href="#éèšç°‡ç´¢å¼•æŸ¥æ‰¾å›¾" class="headerlink" title="éèšç°‡ç´¢å¼•æŸ¥æ‰¾å›¾"></a>éèšç°‡ç´¢å¼•æŸ¥æ‰¾å›¾</h3><p><img src="/x.png" alt="x"></p>
<h3 id="myisamæŸ¥æ‰¾å›¾"><a href="#myisamæŸ¥æ‰¾å›¾" class="headerlink" title="myisamæŸ¥æ‰¾å›¾"></a>myisamæŸ¥æ‰¾å›¾</h3><p><img src="/z.png" alt="z"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">key - ç´¢å¼•åˆ—å€¼,value - æ•°æ®è¡Œçš„ç‰©ç†åœ°å€.</span><br><span class="line">innodbä¸­ç´¢å¼•å’Œæ•°æ®åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</span><br><span class="line"></span><br><span class="line">myisamä¸­ç´¢å¼•å’Œæ•°æ®æ˜¯å•ç‹¬çš„ä¿©ä¸ªæ–‡ä»¶,åˆ†åˆ«æ˜¯ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶.</span><br><span class="line"></span><br><span class="line">myisamä¸­é‡‡ç”¨çš„æ˜¯"éèšé›†çš„æ–¹å¼"</span><br><span class="line"></span><br><span class="line">æ— è®ºæ˜¯èšç°‡ç´¢å¼•è¿˜æ˜¯éèšç°‡ç´¢å¼•,æŸ¥æ‰¾æ–¹å¼æ˜¯ä¸€æ ·.</span><br><span class="line"></span><br><span class="line">é‡‡ç”¨çš„ä¹Ÿæ˜¯B+æ ‘çš„ç»“æ„**.åªæ˜¯å¶èŠ‚ç‚¹ä¸­å­˜å‚¨çš„æ˜¯ç´¢å¼•çš„åˆ—å€¼ä»¥åŠè¯¥å¯¹åº”çš„è¡Œè®°å½•çš„åœ°å€.**</span><br><span class="line"></span><br><span class="line">éœ€è¦å†æ ¹æ®è¡Œè®°å½•åœ°å€åˆ°è¡¨ä¸­è¿›è¡Œå®šä½[å›è¡¨]</span><br></pre></td></tr></tbody></table></figure>



<ul>
<li><h4 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">create function dy_add(a int ,b int) returns int</span><br><span class="line">	begin</span><br><span class="line">		return a+b;</span><br><span class="line">	end $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line">select dy_add(5,2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">delimiter $$</span><br><span class="line">create function dy_add(a int ,b int) returns int</span><br><span class="line">	begin</span><br><span class="line">		return a+b;</span><br><span class="line">	end $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line">select dy_add(5,2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- è§¦å‘å™¨</span><br><span class="line">drop trigger customer_trriger;</span><br><span class="line">delimiter //</span><br><span class="line">create trigger  customer_trriger </span><br><span class="line">     before delete on s_customer </span><br><span class="line">for each row</span><br><span class="line">begin</span><br><span class="line">delete from s_ord where customer_id=old.id;</span><br><span class="line">end //</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line">-- è§¦å‘å™¨</span><br><span class="line">drop trigger customer_trriger;</span><br><span class="line">delimiter //</span><br><span class="line">create trigger  customer_trriger </span><br><span class="line">     before insert on s_customer </span><br><span class="line">for each row</span><br><span class="line">begin</span><br><span class="line">	if new.id&lt;5</span><br><span class="line">		select 'error';</span><br><span class="line">end //</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></tbody></table></figure></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/index/" rel="tag">index</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-mysqlå››ç§åˆ†åŒº" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/08/08/mysql%E5%9B%9B%E7%A7%8D%E5%88%86%E5%8C%BA/" class="article-date">
  	<time datetime="2022-08-08T13:04:23.000Z" itemprop="datePublished">2022-08-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/08/mysql%E5%9B%9B%E7%A7%8D%E5%88%86%E5%8C%BA/">
        mysqlå››ç§åˆ†åŒº
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int(7) primary key comment 'ä¸»é”®',</span><br><span class="line">name varchar(20) not null unique comment 'å§“å',</span><br><span class="line">birthday date default '2022-02-08'</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">drop table t_account;</span><br><span class="line">create table t_account(</span><br><span class="line">id int(7),</span><br><span class="line">blance double(5,2),</span><br><span class="line">u_id int(7) ,</span><br><span class="line">constraint t_account_id_pk primary key(id),</span><br><span class="line">constraint t_account_id_fk foreign key(u_id) references t_user(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">drop table t_student;</span><br><span class="line">drop table t_course;</span><br><span class="line">drop table t_sc</span><br><span class="line"></span><br><span class="line">create table t_student(</span><br><span class="line">id int(7) primary key,</span><br><span class="line">name varchar(20) unique not null,</span><br><span class="line">age int(7) default 20</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table t_course(</span><br><span class="line">id int(7) primary key,</span><br><span class="line">name varchar(20) not null</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table t_sc(</span><br><span class="line">id int(7),</span><br><span class="line">s_id int (7),</span><br><span class="line">c_id int(7),</span><br><span class="line">constraint t_sc_id_pk primary key(id),</span><br><span class="line">constraint t_sc_s_id_fk foreign key(s_id) references t_student(id),</span><br><span class="line">constraint t_sc_c_id_fk foreign key(c_id) references t_course(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into t_student values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null);</span><br><span class="line">insert into t_course values(1,'math'),(2,'english'),(3,'chinses'),(4,'chesmatical');</span><br><span class="line">insert into t_sc values(1,1,1),(2,2,3),(3,4,2),(4,3,4);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--æµ‹è¯•è¡¨æ ¼åŠæ•°æ®</span><br><span class="line">drop table hashTest;</span><br><span class="line">create table hashTest(</span><br><span class="line">id int(7) primary key,</span><br><span class="line">name varchar(20),</span><br><span class="line">age int(7)</span><br><span class="line">)PARTITION BY HASH(id) PARTITIONS 4;;</span><br><span class="line">insert into hashTest values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null),(5,'tom',20),(6,'cca',22),(7,'kkp',21),(8,'see',null),(9,'tom',20),(10,'cca',22),(11,'kkp',21),(12,'see',null);</span><br><span class="line"></span><br><span class="line">--æŸ¥è¯¢åˆ†åŒºç»“æ„</span><br><span class="line">SELECT PARTITION_NAME,PARTITION_METHOD,PARTITION_EXPRESSION,PARTITION_DESCRIPTION,TABLE_ROWS</span><br><span class="line">FROM `information_schema`.`PARTITIONS`</span><br><span class="line">WHERE TABLE_SCHEMA=SCHEMA() AND TABLE_NAME='hashTest';</span><br></pre></td></tr></tbody></table></figure>

<h3 id="hashåˆ†åŒº-PARTITIONS-x3D-4-4ä¸ªåˆ†åŒºï¼Œæ ¹æ®å–æ¨¡ç¡®å®šä¸åŒidçš„å æ®åŒºåŸŸ"><a href="#hashåˆ†åŒº-PARTITIONS-x3D-4-4ä¸ªåˆ†åŒºï¼Œæ ¹æ®å–æ¨¡ç¡®å®šä¸åŒidçš„å æ®åŒºåŸŸ" class="headerlink" title="hashåˆ†åŒº PARTITIONS=4(4ä¸ªåˆ†åŒºï¼Œæ ¹æ®å–æ¨¡ç¡®å®šä¸åŒidçš„å æ®åŒºåŸŸ)"></a>hashåˆ†åŒº PARTITIONS=4(4ä¸ªåˆ†åŒºï¼Œæ ¹æ®å–æ¨¡ç¡®å®šä¸åŒidçš„å æ®åŒºåŸŸ)</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br><span class="line">| PARTITION_NAME | PARTITION_METHOD | PARTITION_EXPRESSION | PARTITION_DESCRIPTION | TABLE_ROWS |</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br><span class="line">| p0             | HASH             | `id`                 | NULL                  |          3 |</span><br><span class="line">| p1             | HASH             | `id`                 | NULL                  |          3 |</span><br><span class="line">| p2             | HASH             | `id`                 | NULL                  |          3 |</span><br><span class="line">| p3             | HASH             | `id`                 | NULL                  |          3 |</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="Rangeåˆ†åŒº-åˆ†æˆ6ä¸ªåˆ†åŒº"><a href="#Rangeåˆ†åŒº-åˆ†æˆ6ä¸ªåˆ†åŒº" class="headerlink" title="Rangeåˆ†åŒº åˆ†æˆ6ä¸ªåˆ†åŒº"></a>Rangeåˆ†åŒº åˆ†æˆ6ä¸ªåˆ†åŒº</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">drop table hashTest;</span><br><span class="line">create table hashTest(</span><br><span class="line">id int(7) primary key,</span><br><span class="line">name varchar(20),</span><br><span class="line">age int(7)</span><br><span class="line">)</span><br><span class="line">PARTITION BY RANGE (id) PARTITIONS 6 (</span><br><span class="line">    PARTITION part0 VALUES LESS THAN (2) , </span><br><span class="line">    PARTITION part1 VALUES LESS THAN (4) , </span><br><span class="line">    PARTITION part2 VALUES LESS THAN (6) , </span><br><span class="line">    PARTITION part3 VALUES LESS THAN (8) , </span><br><span class="line">    PARTITION part4 VALUES LESS THAN (10),</span><br><span class="line">    PARTITION part5 VALUES LESS THAN (13)</span><br><span class="line">);</span><br><span class="line">insert into hashTest values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null),(5,'tom',20),(6,'cca',22),(7,'kkp',21),(8,'see',null),(9,'tom',20),(10,'cca',22),(11,'kkp',21),(12,'see',null);</span><br><span class="line"></span><br><span class="line">åˆ†åŒºç»“æœï¼š</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br><span class="line">| PARTITION_NAME | PARTITION_METHOD | PARTITION_EXPRESSION | PARTITION_DESCRIPTION | TABLE_ROWS |</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br><span class="line">| part0          | RANGE            | `id`                 | 2                     |          1 |</span><br><span class="line">| part1          | RANGE            | `id`                 | 4                     |          2 |</span><br><span class="line">| part2          | RANGE            | `id`                 | 6                     |          2 |</span><br><span class="line">| part3          | RANGE            | `id`                 | 8                     |          2 |</span><br><span class="line">| part4          | RANGE            | `id`                 | 10                    |          2 |</span><br><span class="line">| part5          | RANGE            | `id`                 | 13                    |          3 |</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br></pre></td></tr></tbody></table></figure>

<h3 id="liståˆ†åŒº"><a href="#liståˆ†åŒº" class="headerlink" title="liståˆ†åŒº"></a>liståˆ†åŒº</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">drop table hashTest;</span><br><span class="line">create table hashTest(</span><br><span class="line">id int(7) primary key,</span><br><span class="line">name varchar(20),</span><br><span class="line">age int(7)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">PARTITION BY LIST(id) (</span><br><span class="line">    PARTITION pNorth VALUES IN (1,2,3),</span><br><span class="line">    PARTITION pEast VALUES IN (5,6,7),</span><br><span class="line">    PARTITION pWest VALUES IN (4,8,9),</span><br><span class="line">    PARTITION pCentral VALUES IN (10,11,12)</span><br><span class="line">);</span><br><span class="line">insert into hashTest values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null),(5,'tom',20),(6,'cca',22),(7,'kkp',21),(8,'see',null),(9,'tom',20),(10,'cca',22),(11,'kkp',21),(12,'see',null);</span><br><span class="line">--åˆ†åŒºç»“æœï¼š</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br><span class="line">| PARTITION_NAME | PARTITION_METHOD | PARTITION_EXPRESSION | PARTITION_DESCRIPTION | TABLE_ROWS |</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br><span class="line">| pCentral       | LIST             | `id`                 | 10,11,12              |          3 |</span><br><span class="line">| pEast          | LIST             | `id`                 | 5,6,7                 |          3 |</span><br><span class="line">| pNorth         | LIST             | `id`                 | 1,2,3                 |          3 |</span><br><span class="line">| pWest          | LIST             | `id`                 | 4,8,9                 |          3 |</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br></pre></td></tr></tbody></table></figure>

<h3 id="keyåˆ†åŒºï¼ˆå’Œhashåˆ†åŒºç±»ä¼¼ï¼Œå…¶åˆ†åŒºå‡½æ•°æ˜¯ç”±mysqlå†…éƒ¨ç¡®å®šçš„ï¼‰"><a href="#keyåˆ†åŒºï¼ˆå’Œhashåˆ†åŒºç±»ä¼¼ï¼Œå…¶åˆ†åŒºå‡½æ•°æ˜¯ç”±mysqlå†…éƒ¨ç¡®å®šçš„ï¼‰" class="headerlink" title="keyåˆ†åŒºï¼ˆå’Œhashåˆ†åŒºç±»ä¼¼ï¼Œå…¶åˆ†åŒºå‡½æ•°æ˜¯ç”±mysqlå†…éƒ¨ç¡®å®šçš„ï¼‰"></a>keyåˆ†åŒºï¼ˆå’Œhashåˆ†åŒºç±»ä¼¼ï¼Œå…¶åˆ†åŒºå‡½æ•°æ˜¯ç”±mysqlå†…éƒ¨ç¡®å®šçš„ï¼‰</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">drop table hashTest;</span><br><span class="line">create table hashTest(</span><br><span class="line">id int(7) primary key,</span><br><span class="line">name varchar(20),</span><br><span class="line">age int(7)</span><br><span class="line">)</span><br><span class="line">PARTITION BY KEY()</span><br><span class="line">PARTITIONS 2;</span><br><span class="line">insert into hashTest values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null),(5,'tom',20),(6,'cca',22),(7,'kkp',21),(8,'see',null),(9,'tom',20),(10,'cca',22),(11,'kkp',21),(12,'see',null);</span><br><span class="line"></span><br><span class="line">--åˆ†åŒºç»“æœ</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br><span class="line">| PARTITION_NAME | PARTITION_METHOD | PARTITION_EXPRESSION | PARTITION_DESCRIPTION | TABLE_ROWS |</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br><span class="line">| p0             | KEY              | NULL                 | NULL                  |          6 |</span><br><span class="line">| p1             | KEY              | NULL                 | NULL                  |          6 |</span><br><span class="line">+----------------+------------------+----------------------+-----------------------+------------+</span><br></pre></td></tr></tbody></table></figure>


      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/area/" rel="tag">area</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/msql/" rel="tag">msql</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-é›†åˆ" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/08/08/%E9%9B%86%E5%90%88/" class="article-date">
  	<time datetime="2022-08-08T13:03:53.000Z" itemprop="datePublished">2022-08-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/08/%E9%9B%86%E5%90%88/">
        é›†åˆ
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="é›†åˆæ¡†æ¶"><a href="#é›†åˆæ¡†æ¶" class="headerlink" title="é›†åˆæ¡†æ¶"></a>é›†åˆæ¡†æ¶</h1><blockquote>
<p>å°±æ˜¯ä¸€ä¸ªå†…å­˜ä¸­çš„â€å®¹å™¨â€,ç”¨æ¥å­˜å‚¨æ•°æ®.å®é™…å¼€å‘ä¸­ç”¨æ¥æ›¿ä»£æ•°ç»„çš„ä½¿ç”¨</p>
<p>ä¸åŒçš„é›†åˆæ¡†æ¶åº•å±‚ä½¿ç”¨åˆ°çš„æ•°æ®ç»“æ„ä¸ä¸€æ ·.</p>
</blockquote>
<blockquote>
<p>apiåŒ…:java.util</p>
<ol>
<li><p>Collection[I]</p>
<ul>
<li><p>List[I]  - æœ‰åº,å¯é‡å¤</p>
<ul>
<li><p>ArrayList[C] - â€œåº•å±‚å°±æ˜¯åŠ¨æ€æ•°ç»„ - å†…å­˜ä¸­æ˜¯è¿ç»­çš„,æœ‰åºçš„ - ä¾¿äºä½¿ç”¨ä¸‹æ ‡æ¥è®¿é—®å…ƒç´ .ä½†æ˜¯å¢åˆ æ•ˆç‡ç•¥ä½â€</p>
</li>
<li><p>LinkedList[C] - â€œåº•å±‚æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨,è®¿é—®æ¯”ArrayListæ…¢,ä½†æ˜¯å¢åˆ æ•ˆç‡é«˜â€</p>
<p>é€‚åˆè§£å†³æ ˆåˆ—å’Œé˜Ÿåˆ—çš„ä¸šåŠ¡ - è´ªåƒè›‡</p>
</li>
<li><p>Vector[C] - çº¿ç¨‹å®‰å…¨çš„,ä½¿ç”¨æ–¹å¼å’ŒArrayListä¸€è‡´.</p>
</li>
</ul>
</li>
<li><p>Set[I] - æ— åº,ä¸å¯é‡å¤</p>
<ul>
<li><p>HashSet[C] - â€œåº•å±‚ä½¿ç”¨çš„å“ˆå¸Œç®—æ³•,åº•å±‚å°±æ˜¯HashMapâ€</p>
</li>
<li><p>SortedSet[I]</p>
<ul>
<li><p>TreeSet[C] - â€œå¯ä»¥ä½¿ç”¨å¯æ¯”è¾ƒæ¥å£æˆ–è€…æ¯”è¾ƒå™¨æ¥å£æ¥å®ç°æ’åºçš„åŠŸèƒ½,ä½†æ˜¯ä»ç„¶æ˜¯ä¸å¯é‡å¤çš„â€</p>
<p>â€œåº•å±‚æ˜¯TreeMapâ€</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Map[I] - é‡‡ç”¨key-valueé”®å€¼å¯¹å½¢å¼æ¥å­˜å‚¨æ•°æ®</p>
<ul>
<li>HashMap[C] - é’ˆå¯¹keyæ— åºä¸å¯é‡å¤</li>
<li>Hashtable[C]<ul>
<li>Properties[C] - .propertieså±æ€§æ–‡ä»¶åœ¨å†…å­˜ä¸­æ˜ å°„çš„é‚£ä¸ªå¯¹è±¡</li>
</ul>
</li>
</ul>
</li>
</ol>
</blockquote>
<h1 id="è¿­ä»£å™¨Iterator"><a href="#è¿­ä»£å™¨Iterator" class="headerlink" title="è¿­ä»£å™¨Iterator"></a>è¿­ä»£å™¨Iterator</h1><blockquote>
<p>ä½œç”¨ - ä¸ºäº†è®¿é—®ä¸åŒæ•°æ®ç»“æ„çš„é›†åˆ,æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼.</p>
</blockquote>
<p><code>ArrayList</code></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> {</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Itr</span>();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Itr</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;E&gt; {</span><br><span class="line">        <span class="type">int</span> cursor;       <span class="comment">// index of next element to return</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lastRet</span> <span class="operator">=</span> -<span class="number">1</span>; <span class="comment">// index of last element returned; -1 if no such</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> {</span><br><span class="line">            <span class="keyword">return</span> cursor != size;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SuppressWarnings("unchecked")</span></span><br><span class="line">        <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> {</span><br><span class="line">            checkForComodification();<span class="comment">//æ£€æµ‹expectedModCount == modCount;</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cursor;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= size)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">            <span class="comment">//é›†åˆå­˜å‚¨çš„æ•°æ®</span></span><br><span class="line">            Object[] elementData = ArrayList.<span class="built_in">this</span>.elementData;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= elementData.length)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">            cursor = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> (E) elementData[lastRet = i]; <span class="comment">// æ•°ç»„å¯¹è±¡[ä¸‹æ ‡]</span></span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>LinkedList</code></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Itr</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;E&gt; {</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Index of element to be returned by subsequent call to next.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">cursor</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Index of element returned by most recent call to next or</span></span><br><span class="line"><span class="comment">         * previous.  Reset to -1 if this element is deleted by a call</span></span><br><span class="line"><span class="comment">         * to remove.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lastRet</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The modCount value that the iterator believes that the backing</span></span><br><span class="line"><span class="comment">         * List should have.  If this expectation is violated, the iterator</span></span><br><span class="line"><span class="comment">         * has detected concurrent modification.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> {</span><br><span class="line">            <span class="keyword">return</span> cursor != size();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> {</span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cursor;</span><br><span class="line">                <span class="type">E</span> <span class="variable">next</span> <span class="operator">=</span> get(i);</span><br><span class="line">                lastRet = i;</span><br><span class="line">                cursor = i + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">return</span> next;</span><br><span class="line">            } <span class="keyword">catch</span> (IndexOutOfBoundsException e) {</span><br><span class="line">                checkForComodification();</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="ArrayListç»ƒä¹ "><a href="#ArrayListç»ƒä¹ " class="headerlink" title="ArrayListç»ƒä¹ "></a>ArrayListç»ƒä¹ </h1><blockquote>
<p>é›†åˆä¸­æ·»åŠ Nä¸ªå›¾ä¹¦å¯¹è±¡,å°†å›¾ä¹¦ååŒ…å«javaçš„å›¾ä¹¦å…¨éƒ¨åˆ é™¤!</p>
</blockquote>
<h1 id="ArrayListæ‰©å®¹æœºåˆ¶"><a href="#ArrayListæ‰©å®¹æœºåˆ¶" class="headerlink" title="ArrayListæ‰©å®¹æœºåˆ¶"></a>ArrayListæ‰©å®¹æœºåˆ¶</h1><blockquote>
<ul>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨addæ–¹æ³•çš„æ—¶å€™,æ‰ä¼šåˆå§‹åŒ–æ•°ç»„elementData</li>
<li>é»˜è®¤çš„æ•°ç»„çš„é•¿åº¦æ˜¯10ä¸ª</li>
<li>æ‰©å®¹çš„å€æ•°æ˜¯1.5å€</li>
</ul>
</blockquote>
<h1 id="ArrayListå’ŒVectoråŒºåˆ«"><a href="#ArrayListå’ŒVectoråŒºåˆ«" class="headerlink" title="ArrayListå’ŒVectoråŒºåˆ«"></a>ArrayListå’ŒVectoråŒºåˆ«</h1><blockquote>
<p>è¦æƒ³å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å…ˆæŠŠå„ç§éƒ½è®²ç‰¹æ€§ï¼Œç„¶åå†ä»åº•å±‚å­˜å‚¨ç»“æ„ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œé»˜è®¤å¤§å°ï¼Œæ‰©å®¹æœºåˆ¶ï¼Œè¿­ä»£å™¨ï¼Œå¢åˆ æ”¹æŸ¥æ•ˆç‡è¿™å‡ ä¸ªæ–¹å‘å…¥æ‰‹ã€‚</p>
<ul>
<li><p>åº•å±‚å­˜å‚¨æ•°æ®ç»“æ„ - <strong>æœ¬è´¨ä¸Šéƒ½æ˜¯æ•°ç»„</strong>,Vectoræ˜¯ä½¿ç”¨é˜Ÿåˆ—[å…ˆè¿›å…ˆå‡º]æ¥å­˜å‚¨æ•°æ®,ä½†æ˜¯æœ¬è´¨ä»ç„¶æ˜¯æ•°ç»„.</p>
</li>
<li><p>çº¿ç¨‹å®‰å…¨æ€§ - å‰è€…æ˜¯çº¿ç¨‹ä¸å®‰å…¨,åè€…æ˜¯çº¿ç¨‹å®‰å…¨</p>
</li>
<li><p>é»˜è®¤å¤§å° - ä¿©è€…éƒ½æ˜¯é•¿åº¦ä¸º10</p>
</li>
<li><p>æ‰©å®¹æœºåˆ¶ - å‰è€…æ˜¯1.5å€,åè€…é»˜è®¤æ˜¯æ‰©å®¹2å€,å¯ä»¥æ‰©å®¹ç³»æ•°å¯ä»¥è®¾ç½®çš„.</p>
</li>
<li><p><code>ArrayList</code>å’Œ<code>Vector</code>æ£€ç´¢å…ƒç´ ï¼Œç”±äºæ˜¯æ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯<code>O(1)</code>ï¼Œåœ¨é›†åˆçš„å°¾éƒ¨æ’å…¥æˆ–è€…åˆ é™¤æ˜¯<code>O(1)</code>ï¼Œä½†æ˜¯å…¶ä»–çš„åœ°æ–¹å¢åŠ ï¼Œåˆ é™¤ï¼Œéƒ½æ˜¯<code>O(n)</code>ï¼Œå› ä¸ºæ¶‰åŠåˆ°äº†æ•°ç»„å…ƒç´ çš„ç§»åŠ¨</p>
<p><code>ArrayListçš„åˆ é™¤å’Œæ’å…¥çš„æ•ˆç‡ä¸€å®šä¼šæ¯”LinkedListä½å—?</code> - ä¸ä¸€å®š,çœ‹æ˜¯å¦æ“ä½œçš„æ˜¯é›†åˆçš„å°¾éƒ¨</p>
</li>
</ul>
</blockquote>
<h1 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h1><blockquote>
<p>jdk8.0ç”¨åˆ°çš„æ˜¯åŒå‘é“¾è¡¨ç»“æ„</p>
<p>é“¾è¡¨è‚¯å®šä¼šæ¯”æ•°ç»„å ç”¨æ›´å¤šçš„å†…å­˜</p>
</blockquote>
<blockquote>
<p>é˜”ä»¥æ¨¡æ‹Ÿæ ˆåˆ—å’Œé˜Ÿåˆ—çš„ä¸šåŠ¡</p>
</blockquote>
<blockquote>
<p>å•å‘é“¾è¡¨ç»“æ„ - å¿…é¡»ä»å¤´èŠ‚ç‚¹å¼€å§‹</p>
<p>element - çœŸå®çš„æ•°æ®</p>
<p>next - ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€</p>
</blockquote>
<blockquote>
<p><img src="/imgs/link01.png"> </p>
</blockquote>
<blockquote>
<p>å•å‘å¾ªç¯ç»“æ„</p>
<p><img src="/imgs/link02.png"> </p>
</blockquote>
<blockquote>
<p><img src="/imgs/link03.png"> </p>
</blockquote>
<blockquote>
<p> <img src="/imgs/link04.png"> </p>
</blockquote>
<h2 id="get-int-index-åº•å±‚"><a href="#get-int-index-åº•å±‚" class="headerlink" title="get(int index)åº•å±‚"></a>get(int index)åº•å±‚</h2><blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">checkElementIndex(index);</span><br><span class="line"><span class="keyword">return</span> node(index).item;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>å†…éƒ¨ç±»</code></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; {</span><br><span class="line">E item;</span><br><span class="line">Node&lt;E&gt; next;</span><br><span class="line">Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) {</span><br><span class="line"> <span class="built_in">this</span>.item = element;</span><br><span class="line"> <span class="built_in">this</span>.next = next;</span><br><span class="line"> <span class="built_in">this</span>.prev = prev;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><code>æ ¸å¿ƒæ–¹æ³•node(index)</code></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Node&lt;E&gt; <span class="title function_">node</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line"><span class="comment">// index=2</span></span><br><span class="line"><span class="comment">// 1 2 3 4 5 6 = size = 6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) { <span class="comment">// å¦‚æœåœ¨ä¸­é—´ä½ç½®çš„å·¦è¾¹</span></span><br><span class="line"> Node&lt;E&gt; x = first; <span class="comment">// å¤´èŠ‚ç‚¹å¼€å§‹éå†</span></span><br><span class="line"> <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">   x = x.next;</span><br><span class="line"> <span class="keyword">return</span> x;</span><br><span class="line">} <span class="keyword">else</span> { <span class="comment">// ä»å°¾éƒ¨</span></span><br><span class="line"> Node&lt;E&gt; x = last;</span><br><span class="line"> <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">   x = x.prev;</span><br><span class="line"> <span class="keyword">return</span> x;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="remove-int-index-åº•å±‚"><a href="#remove-int-index-åº•å±‚" class="headerlink" title="remove(int index)åº•å±‚"></a>remove(int index)åº•å±‚</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">  checkElementIndex(index);</span><br><span class="line">  <span class="keyword">return</span> unlink(node(index));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>unlink(node(index));</code></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">E <span class="title function_">unlink</span><span class="params">(Node&lt;E&gt; x)</span> { <span class="comment">// x-å³å°†åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line">  <span class="comment">// assert x != null;</span></span><br><span class="line">  <span class="keyword">final</span> <span class="type">E</span> <span class="variable">element</span> <span class="operator">=</span> x.item;</span><br><span class="line">  <span class="keyword">final</span> Node&lt;E&gt; next = x.next; <span class="comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev; <span class="comment">//ä¸Šä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (prev == <span class="literal">null</span>) { <span class="comment">// åˆ¤æ–­xæ˜¯å¦ä¸ºå¤´èŠ‚ç‚¹</span></span><br><span class="line">    first = next; <span class="comment">// åŸæ¥ç¬¬äºŒä¸ªèŠ‚ç‚¹è®¾ç½®æˆå¤´èŠ‚ç‚¹</span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    prev.next = next; <span class="comment">//åŸæ¥ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªåœ°å€åº”è¯¥æŒ‡å‘åŸæ¥è¿™ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    x.prev = <span class="literal">null</span>;<span class="comment">//gc</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (next == <span class="literal">null</span>) { <span class="comment">// åˆ¤æ–­xæ˜¯å¦ä¸ºå°¾èŠ‚ç‚¹</span></span><br><span class="line">    last = prev; <span class="comment">// å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹è®¾ç½®æˆå°¾ç»“ç‚¹</span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    next.prev = prev;</span><br><span class="line">    x.next = <span class="literal">null</span>;<span class="comment">//gc</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  x.item = <span class="literal">null</span>;<span class="comment">//gc</span></span><br><span class="line">  size--; <span class="comment">// é›†åˆçš„é•¿åº¦</span></span><br><span class="line">  modCount++; <span class="comment">// å¹¶å‘ä¿®æ”¹</span></span><br><span class="line">  <span class="keyword">return</span> element;<span class="comment">//è¿”å›åˆšåˆšåˆ é™¤çš„å…ƒç´ </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="ä½œä¸š"><a href="#ä½œä¸š" class="headerlink" title="ä½œä¸š"></a>ä½œä¸š</h1><blockquote>
<ol>
<li><p>æ‹¬å·åŒ¹é…</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">()</span><br><span class="line">[]</span><br><span class="line">{}</span><br><span class="line">()[]{}</span><br><span class="line">([{}])</span><br><span class="line">[()]{}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(]</span><br><span class="line">([)]{}</span><br><span class="line">â€‹~~~java</span><br></pre></td></tr></tbody></table></figure>


<p>arr = ( [ { } ] )</p>
<p>æ°¸è¿œå°†ç¬¬ä¸€ä¸ªå…ƒç´ å‹å…¥æ ˆé¡¶ push<br>ä»arrçš„ç¬¬2ä¸ªä½ç½®å¼€å§‹éå†<br>iä¸‹æ ‡å¯¹åº”çš„å…ƒç´ ,å’Œæ ˆé¡¶å…ƒç´ è¿›è¡Œæ¯”è¾ƒgetFast();<br>ä¸åŒ¹é… - ç»§ç»­å‹å…¥æ ˆé¡¶<br>åŒ¹é… - å¼¹å‡ºæ ˆé¡¶<br>é›†åˆæ˜¯å¦ä¸ºç©º isEmpty();</p>
<p>( [ ) ] { }</p>
<p>]<br>)<br>[<br>(</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Purcase</span>{ <span class="comment">//è´­ä¹°ç±»</span></span><br><span class="line">	<span class="keyword">private</span> String brand; <span class="comment">//å“ç‰Œ</span></span><br><span class="line">	<span class="keyword">private</span> String name; <span class="comment">//äº§å“å</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">double</span> cost; <span class="comment">// è´¹ç”¨</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ„é€ ,getter/setter,toString...</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">List&lt;Purcase&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">"å®æ´"</span>,<span class="string">"æ´—æ‰‹ç²‰"</span>,<span class="number">18.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">"è”åˆåˆ©å"</span>,<span class="string">"è‚¥çš‚"</span>,<span class="number">4.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">"å®æ´"</span>,<span class="string">"ç‰™è†"</span>,<span class="number">32.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">"å®æ´"</span>,<span class="string">"æ¯›å·¾"</span>,<span class="number">14.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">"æ´åˆ©"</span>,<span class="string">"æ´—é¢å¥¶"</span>,<span class="number">26.0</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">"å¥½è¿ª"</span>,<span class="string">"æ´—å‘æ°´"</span>,<span class="number">27.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p7</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">"å¤šèŠ¬"</span>,<span class="string">"æ²æµ´éœ²"</span>,<span class="number">38.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p8</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">"å®æ´"</span>,<span class="string">"æ´—æ´ç²¾"</span>,<span class="number">3.4</span>);</span><br><span class="line"></span><br><span class="line">list.add(p1);</span><br><span class="line">list.add(p2);</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">è¦æ±‚:å†™ä¸€ä¸ªç¨‹åº,æ‰“å°å‡ºå„å“ç‰Œæ‰€èŠ±è´¹çš„æ€»è´¹ç”¨â‘ .</span><br><span class="line">[å¯é€‰,æ’å¥½åºåå†æ‰“å°è¾“å‡º,æŒ‰èŠ±è´¹æ€»è´¹ç”¨çš„é™åºæ’åºâ‘¡]</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<blockquote>
<p>map =&gt; ç»Ÿè®¡æ¯ä¸ªéšæœºæ•°å‡ºç°çš„æ¬¡æ•°.      15ä¸ªéšæœºæ•°     1~5</p>
<p>â€œpython java 123 15901121 dfdfd  fdfdâ€</p>
</blockquote>
<h1 id="è´ªåƒè›‡çš„å®ç°æ­¥éª¤"><a href="#è´ªåƒè›‡çš„å®ç°æ­¥éª¤" class="headerlink" title="è´ªåƒè›‡çš„å®ç°æ­¥éª¤"></a>è´ªåƒè›‡çš„å®ç°æ­¥éª¤</h1><blockquote>
<ol>
<li><p>è¾“å‡ºä¸€ä¸ªä¸»ç•Œé¢</p>
<p>è›‡èº«(LinkedList-&gt;å­˜å‚¨äº†Nä¸ªNode) - é•¿åº¦,è›‡å¤´,æ–¹å‘</p>
<p><strong>éšæœºç”Ÿæˆnä¸ªé£Ÿç‰©</strong> - ä½¿ç”¨HashSetæ¥è¿›è¡Œå­˜å‚¨</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* * * * * * * * * * *</span><br><span class="line">* <span class="number">0</span></span><br><span class="line">*   # # # </span><br><span class="line">*     <span class="number">0</span>      <span class="number">0</span></span><br><span class="line">*</span><br><span class="line">*</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><p>åˆ›å»ºä¸€ä¸ªå¯¹è±¡Node(int x,int y);</p>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªç±»SnakeGame</p>
<p>3-1. åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç±»Snake - ç»´æŠ¤ä¸€ä¸ªLinkedList</p>
<p>3-2. Set<node> foods = new HashSet&lt;&gt;();//å­˜æ”¾é£Ÿç‰©</node></p>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="4">
<li><p>èµ°ä¸€æ­¥ç®—æ³•	</p>
<p>4-1. æ²¡æœ‰åƒåˆ°é£Ÿç‰©</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ç¡®å®šæ–°çš„æ–¹å‘ - w a s d</span><br><span class="line"><span class="number">2.</span> æ–°çš„åæ ‡Node(i,j)</span><br><span class="line"><span class="number">3.</span> addFirst - å°†æ–°çš„åæ ‡æ”¾å…¥åˆ°è›‡å¤´</span><br><span class="line"><span class="number">4.</span> åˆ¤æ–­æ–°çš„åæ ‡æ˜¯å¦å±äºfoods,å¦‚æœä¸å±äºremoveLast();<span class="comment">//åˆ é™¤æœ€åå°¾èŠ‚ç‚¹</span></span><br></pre></td></tr></tbody></table></figure>

<p>4-2. åƒåˆ°é£Ÿç‰©</p>
</li>
</ol>
</blockquote>
<h1 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h1><blockquote>
<p>HashSetå’ŒHashMap =&gt; å­˜æ”¾æ•°æ®çš„æ€§èƒ½ - HashMapæ›´é«˜ - HashSetå¯èƒ½æ˜¯è®¡ç®—æ•´ä¸ªå¯¹è±¡çš„hashCodeæ–¹æ³•</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;Book&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashSet</span><span class="params">()</span> {</span><br><span class="line">  map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">set.add(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//seté›†åˆçš„valueå°±æ˜¯mapé›†åˆçš„key</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> {</span><br><span class="line">  <span class="keyword">return</span> map.put(e, PRESENT)==<span class="literal">null</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h1><blockquote>
<p>çº¿ç¨‹ä¸å®‰å…¨çš„.</p>
</blockquote>
<blockquote>
<p>ç”¨åˆ°çš„æ•°æ®ç»“æ„</p>
<p>jdk8.0-å¼€å§‹<strong>æ¡¶æ•°ç»„ + å•å‘é“¾è¡¨ + çº¢é»‘æ ‘</strong></p>
<p><code>æ¡¶ - å“ˆå¸Œæ¡¶</code></p>
</blockquote>
<h2 id="putåº•å±‚æºç å‰–æ"><a href="#putåº•å±‚æºç å‰–æ" class="headerlink" title="putåº•å±‚æºç å‰–æ"></a>putåº•å±‚æºç å‰–æ</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;Integer,String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å®¹å› å­ - é¢„æ‰©å®¹</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">()</span> {</span><br><span class="line">  <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//putæ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> {</span><br><span class="line">  <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//é’ˆå¯¹keè¿›è¡Œä¸€ä¸ªhashç®—æ³• - æ‰°åŠ¨å‡½æ•°</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> {</span><br><span class="line">  <span class="type">int</span> h;</span><br><span class="line">  <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);<span class="comment">// è®©å“ˆå¸Œå€¼å’Œé«˜16ä½è¿›è¡Œå¼‚æˆ–è¿ç®—</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">                   <span class="type">boolean</span> evict)</span> {</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="type">int</span> n, i;</span><br><span class="line">  		  <span class="comment">//â‘ è¿›æ¥tableå’Œtabéƒ½æ˜¯null</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            <span class="comment">//â‘ å°±ä¼šæ‰§è¡Œæ‰©å®¹æ“ä½œ n = 16  tabåˆå§‹åŒ–å®Œæ¯•</span></span><br><span class="line">            n = (tab = resize()).length;</span><br><span class="line">  			<span class="comment">//â‘ hash - keyçš„æ‰°åŠ¨å‡½æ•°å¾—åˆ°å“ˆå¸Œå€¼</span></span><br><span class="line">  			<span class="comment">//(n - 1) &amp; hash =&gt; 1. ä¸‹æ ‡è‚¯å®šä¸ä¼šè¶Šç•Œ  2. å‡å°‘å“ˆå¸Œå†²çª</span></span><br><span class="line">  	    <span class="comment">//p = tab[å“ˆå¸Œä½ç½®]è‚¯å®šæ˜¯null</span></span><br><span class="line">        <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">            <span class="comment">//â‘ å¯¹è¿™ä¸ªä½ç½®è¿›è¡Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line">            <span class="comment">//å•å‘é“¾è¡¨</span></span><br><span class="line">            tab[i] = newNode(hash, key, value, <span class="literal">null</span>);<span class="comment">//æœ€åä¸€ä¸ªå‚æ•°æ˜¯next</span></span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            Node&lt;K,V&gt; e; K k;</span><br><span class="line">            <span class="comment">//p - å“ˆå¸Œå†²çªçš„ä½ç½®ä¸Šçš„Node</span></span><br><span class="line">            <span class="comment">//æ¯”è¾ƒnodeå¯¹è±¡çš„hashå€¼</span></span><br><span class="line">          </span><br><span class="line">             <span class="comment">//ä¿©ä¸ªç¡®å®æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">            <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">                ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                e = p;<span class="comment">//e = pæ˜¯æ—§çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">            <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">//OO - ä¸åŒå¯¹è±¡çš„hashCodeå€¼,ä¸ä¸€å®š </span></span><br><span class="line">                <span class="comment">// å“ˆå¸Œç¢°æ’äº†,ä½†æ˜¯å¹¶ä¸æ˜¯ä¿©ä¸ªç›¸åŒçš„å¯¹è±¡</span></span><br><span class="line">               <span class="comment">//b. ç›¸åŒå¯¹è±¡equalsè‚¯å®šè¿”å›true</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) {</span><br><span class="line">                    <span class="comment">//æŠŠå“ˆå¸Œå†²çªä½ç½®ä¸Šçš„æ—§èŠ‚ç‚¹pçš„nextæŒ‚è½½ä¸€ä¸ªæ–°çš„e</span></span><br><span class="line">                    <span class="keyword">if</span> ((e = p.next) == <span class="literal">null</span>) {<span class="comment">//â‘ è‚¯å®šä¸ºç©º</span></span><br><span class="line">                        p.next = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">                        <span class="comment">//å½“é“¾è¡¨é•¿åº¦å¼€å§‹&gt;=8çš„æ—¶å€™,å•å‘é“¾è¡¨ç»“æ„å°±ä¼šè½¬æ¢æˆçº¢é»‘æ ‘</span></span><br><span class="line">                        <span class="comment">//åˆ é™¤æ“ä½œ - å¦‚æœèŠ‚ç‚¹ä¸ªæ•°å°äºç­‰äº6çš„æ—¶å€™,å¼€å§‹è½¬æˆé“¾è¡¨ç»“æ„</span></span><br><span class="line">                        <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                            treeifyBin(tab, hash);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    }</span><br><span class="line">                    <span class="comment">//é“¾è¡¨çš„èŠ‚ç‚¹å¯èƒ½å’Œæ–°æ’å…¥çš„èŠ‚ç‚¹æ˜¯ä¸€ä¸ªç›¸åŒå¯¹è±¡</span></span><br><span class="line">                </span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    p = e;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="literal">null</span>) { <span class="comment">// existing mapping for key</span></span><br><span class="line">                <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;<span class="comment">//å°±æ˜¯æ—§çš„èŠ‚ç‚¹çš„value</span></span><br><span class="line">                <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)</span><br><span class="line">                    e.value = value;<span class="comment">//æ–°çš„valueèµ‹å€¼ç»™æ—§èŠ‚ç‚¹çš„value</span></span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">  </span><br><span class="line">  			</span><br><span class="line">        ++modCount;</span><br><span class="line">        <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">            resize();</span><br><span class="line">        afterNodeInsertion(evict);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ‰©å®¹resize()</code></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16</span></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() {</span><br><span class="line">  <span class="comment">//ç¬¬ä¸€æ¬¡è¿›æ¥oldTabå°±æ˜¯null</span></span><br><span class="line">  Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">  <span class="comment">//oldCap æ—§å®¹é‡ = 0</span></span><br><span class="line">  <span class="type">int</span> <span class="variable">oldCap</span> <span class="operator">=</span> (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">  <span class="comment">//oldThr = 0</span></span><br><span class="line">  <span class="type">int</span> <span class="variable">oldThr</span> <span class="operator">=</span> threshold;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//æ–°çš„å®¹é‡,æ–°çš„æ‰©å®¹å› å­</span></span><br><span class="line">  <span class="type">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) {</span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) {</span><br><span class="line">      threshold = Integer.MAX_VALUE;</span><br><span class="line">      <span class="keyword">return</span> oldTab;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">             oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">      newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">    newCap = oldThr;</span><br><span class="line">  <span class="keyword">else</span> {               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">    <span class="comment">//newCap = 16</span></span><br><span class="line">    newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">    <span class="comment">//newThr = 16*0.75f  =&gt; æ‰©å®¹çš„ä¸´ç•Œå€¼</span></span><br><span class="line">    newThr = (<span class="type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> (newThr == <span class="number">0</span>) {</span><br><span class="line">    <span class="type">float</span> <span class="variable">ft</span> <span class="operator">=</span> (<span class="type">float</span>)newCap * loadFactor;</span><br><span class="line">    newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="type">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">              (<span class="type">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">//threshold = 16*0.75f</span></span><br><span class="line">  threshold = newThr;</span><br><span class="line">  <span class="meta">@SuppressWarnings({"rawtypes","unchecked"})</span></span><br><span class="line">  <span class="comment">//newTab é•¿åº¦å°±æ˜¯16</span></span><br><span class="line">  Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> <span class="title class_">Node</span>[newCap];</span><br><span class="line">  table = newTab;</span><br><span class="line">  <span class="keyword">if</span> (oldTab != <span class="literal">null</span>) {</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; oldCap; ++j) {</span><br><span class="line">      Node&lt;K,V&gt; e;</span><br><span class="line">      <span class="keyword">if</span> ((e = oldTab[j]) != <span class="literal">null</span>) {</span><br><span class="line">        oldTab[j] = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (e.next == <span class="literal">null</span>)</span><br><span class="line">          newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">          ((TreeNode&lt;K,V&gt;)e).split(<span class="built_in">this</span>, newTab, j, oldCap);</span><br><span class="line">        <span class="keyword">else</span> { <span class="comment">// preserve order</span></span><br><span class="line">          Node&lt;K,V&gt; loHead = <span class="literal">null</span>, loTail = <span class="literal">null</span>;</span><br><span class="line">          Node&lt;K,V&gt; hiHead = <span class="literal">null</span>, hiTail = <span class="literal">null</span>;</span><br><span class="line">          Node&lt;K,V&gt; next;</span><br><span class="line">          <span class="keyword">do</span> {</span><br><span class="line">            next = e.next;</span><br><span class="line">            <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) {</span><br><span class="line">              <span class="keyword">if</span> (loTail == <span class="literal">null</span>)</span><br><span class="line">                loHead = e;</span><br><span class="line">              <span class="keyword">else</span></span><br><span class="line">                loTail.next = e;</span><br><span class="line">              loTail = e;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> {</span><br><span class="line">              <span class="keyword">if</span> (hiTail == <span class="literal">null</span>)</span><br><span class="line">                hiHead = e;</span><br><span class="line">              <span class="keyword">else</span></span><br><span class="line">                hiTail.next = e;</span><br><span class="line">              hiTail = e;</span><br><span class="line">            }</span><br><span class="line">          } <span class="keyword">while</span> ((e = next) != <span class="literal">null</span>);</span><br><span class="line">          <span class="keyword">if</span> (loTail != <span class="literal">null</span>) {</span><br><span class="line">            loTail.next = <span class="literal">null</span>;</span><br><span class="line">            newTab[j] = loHead;</span><br><span class="line">          }</span><br><span class="line">          <span class="keyword">if</span> (hiTail != <span class="literal">null</span>) {</span><br><span class="line">            hiTail.next = <span class="literal">null</span>;</span><br><span class="line">            newTab[j + oldCap] = hiHead;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> newTab;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="putè¿‡ç¨‹"><a href="#putè¿‡ç¨‹" class="headerlink" title="putè¿‡ç¨‹"></a>putè¿‡ç¨‹</h2><p><img src="/imgs/put.png"> </p>
<h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><blockquote>
<ol>
<li>é€šè¿‡æ¯”è¾ƒå™¨æ¥å£java.util.Comparator<t></t></li>
<li>é€šè¿‡java.lang.Comparable[I]</li>
</ol>
</blockquote>
<h1 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h1><blockquote>
<ol>
<li><p>Listå’ŒSetåŒºåˆ«</p>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1ã€List,Setéƒ½æ˜¯ç»§æ‰¿è‡ªCollectionæ¥å£</span><br><span class="line">2ã€Listç‰¹ç‚¹ï¼šå…ƒç´ æœ‰æ”¾å…¥é¡ºåºï¼Œå…ƒç´ å¯é‡å¤ ï¼ŒSetç‰¹ç‚¹ï¼šå…ƒç´ æ— æ”¾å…¥é¡ºåºï¼Œå…ƒç´ ä¸å¯é‡å¤ï¼Œé‡å¤å…ƒç´ ä¼šè¦†ç›–æ‰ï¼Œï¼ˆå…ƒç´ è™½ç„¶æ— æ”¾å…¥é¡ºåºï¼Œä½†æ˜¯å…ƒç´ åœ¨setä¸­çš„ä½ç½®æ˜¯æœ‰è¯¥å…ƒç´ çš„HashCodeå†³å®šçš„ï¼Œå…¶ä½ç½®å…¶å®æ˜¯å›ºå®šçš„ï¼ŒåŠ å…¥Set çš„Objectå¿…é¡»å®šä¹‰equals()æ–¹æ³• ï¼Œå¦å¤–listæ”¯æŒforå¾ªç¯ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¸‹æ ‡æ¥éå†ï¼Œä¹Ÿå¯ä»¥ç”¨è¿­ä»£å™¨ï¼Œä½†æ˜¯setåªèƒ½ç”¨è¿­ä»£ï¼Œå› ä¸ºä»–æ— åºï¼Œæ— æ³•ç”¨ä¸‹æ ‡æ¥å–å¾—æƒ³è¦çš„å€¼ã€‚ï¼‰ </span><br><span class="line">3.Setå’ŒListå¯¹æ¯”ï¼š </span><br><span class="line">Setï¼šæ£€ç´¢å…ƒç´ æ•ˆç‡ä½ä¸‹ï¼Œåˆ é™¤å’Œæ’å…¥æ•ˆç‡é«˜ï¼Œæ’å…¥å’Œåˆ é™¤ä¸ä¼šå¼•èµ·å…ƒç´ ä½ç½®æ”¹å˜ã€‚ </span><br><span class="line">Listï¼šå’Œæ•°ç»„ç±»ä¼¼ï¼ŒListå¯ä»¥åŠ¨æ€å¢é•¿ï¼ŒæŸ¥æ‰¾å…ƒç´ æ•ˆç‡é«˜ï¼Œæ’å…¥åˆ é™¤å…ƒç´ æ•ˆç‡ä½ï¼Œå› ä¸ºä¼šå¼•èµ·å…¶ä»–å…ƒç´ ä½ç½®æ”¹å˜ã€‚ </span><br></pre></td></tr></tbody></table></figure>


</li>
<li><p>ArrayListå’ŒLinkedListåŒºåˆ«</p>
</li>
</ol>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ArrayListåŸºäºåŠ¨æ€æ•°ç»„å®ç°çš„éçº¿ç¨‹å®‰å…¨çš„é›†åˆï¼›LinkedListåŸºäºé“¾è¡¨å®ç°çš„éçº¿ç¨‹å®‰å…¨çš„é›†åˆã€‚</span><br><span class="line">å¯¹äºéšæœºindexè®¿é—®çš„getå’Œsetæ–¹æ³•ï¼Œä¸€èˆ¬ArrayListçš„é€Ÿåº¦è¦ä¼˜äºLinkedListã€‚å› ä¸ºArrayListç›´æ¥é€šè¿‡æ•°ç»„ä¸‹æ ‡ç›´æ¥æ‰¾åˆ°å…ƒç´ ï¼›LinkedListè¦ç§»åŠ¨æŒ‡é’ˆéå†æ¯ä¸ªå…ƒç´ ç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚</span><br><span class="line">æ–°å¢å’Œåˆ é™¤å…ƒç´ ï¼Œä¸€èˆ¬LinkedListçš„é€Ÿåº¦è¦ä¼˜äºArrayListã€‚å› ä¸ºArrayListåœ¨æ–°å¢å’Œåˆ é™¤å…ƒç´ æ—¶ï¼Œå¯èƒ½æ‰©å®¹å’Œå¤åˆ¶æ•°ç»„ï¼›LinkedListå®ä¾‹åŒ–å¯¹è±¡éœ€è¦æ—¶é—´å¤–ï¼Œåªéœ€è¦ä¿®æ”¹æŒ‡é’ˆå³å¯ã€‚</span><br><span class="line">LinkedListé›†åˆä¸æ”¯æŒ é«˜æ•ˆçš„éšæœºéšæœºè®¿é—®ï¼ˆRandomAccessï¼‰</span><br><span class="line">ArrayListçš„ç©ºé—´æµªè´¹ä¸»è¦ä½“ç°åœ¨åœ¨liståˆ—è¡¨çš„ç»“å°¾é¢„ç•™ä¸€å®šçš„å®¹é‡ç©ºé—´ï¼Œè€ŒLinkedListçš„ç©ºé—´èŠ±è´¹åˆ™ä½“ç°åœ¨å®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½éœ€è¦æ¶ˆè€—ç›¸å½“çš„ç©ºé—´</span><br></pre></td></tr></tbody></table></figure>



<ol>
<li>ArrayListå’ŒVectoråŒºåˆ«</li>
</ol>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰åŒæ­¥æ€§ï¼š</span><br><span class="line">	Vectoræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯å®ƒçš„æ–¹æ³•ä¹‹é—´æ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œè€ŒArrayListæ˜¯çº¿ç¨‹åºä¸å®‰å…¨çš„ï¼Œå®ƒ                    </span><br><span class="line"></span><br><span class="line">çš„æ–¹æ³•ä¹‹é—´æ˜¯çº¿ç¨‹ä¸åŒæ­¥çš„ã€‚å¦‚æœåªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šè®¿é—®åˆ°é›†åˆï¼Œé‚£æœ€å¥½æ˜¯ä½¿ç”¨ArrayListï¼Œå› ä¸ºå®ƒä¸è€ƒè™‘çº¿ç¨‹                 </span><br><span class="line"></span><br><span class="line">å®‰å…¨ï¼Œæ•ˆç‡ä¼šé«˜äº›ï¼›å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹ä¼šè®¿é—®åˆ°é›†åˆï¼Œé‚£æœ€å¥½æ˜¯ä½¿ç”¨Vectorï¼Œå› ä¸ºä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å†å»è€ƒè™‘å’Œç¼–                  </span><br><span class="line"></span><br><span class="line">å†™çº¿ç¨‹å®‰å…¨çš„ä»£ç ã€‚</span><br><span class="line">ï¼ˆ2ï¼‰æ•°æ®å¢é•¿ï¼š</span><br><span class="line">	ArrayListä¸Vectoréƒ½æœ‰ä¸€ä¸ªåˆå§‹çš„å®¹é‡å¤§å°ï¼Œå½“å­˜å‚¨è¿›å®ƒä»¬é‡Œé¢çš„å…ƒç´ çš„ä¸ªæ•°è¶…è¿‡äº†å®¹é‡æ—¶ï¼Œå°±éœ€                </span><br><span class="line"></span><br><span class="line">è¦å¢åŠ ArrayListä¸Vectorçš„å­˜å‚¨ç©ºé—´ï¼Œæ¯æ¬¡è¦å¢åŠ å­˜å‚¨ç©ºé—´æ—¶ï¼Œä¸æ˜¯åªå¢åŠ ä¸€ä¸ªå­˜å‚¨å•å…ƒï¼Œè€Œæ˜¯å¢åŠ å¤šä¸ªå­˜                      </span><br><span class="line"></span><br><span class="line">å‚¨å•å…ƒï¼Œæ¯æ¬¡å¢åŠ çš„å­˜å‚¨å•å…ƒçš„ä¸ªæ•°åœ¨å†…å­˜ç©ºé—´åˆ©ç”¨ä¸ç¨‹åºæ•ˆç‡ä¹‹é—´è¦å–å¾—ä¸€å®šçš„å¹³è¡¡ã€‚Vectoré»˜è®¤å¢é•¿ä¸ºåŸ                              </span><br><span class="line">æ¥ä¸¤å€ï¼Œè€ŒArrayListçš„å¢é•¿ç­–ç•¥åœ¨æ–‡æ¡£ä¸­æ²¡æœ‰æ˜ç¡®è§„å®šï¼ˆä»æºä»£ç çœ‹åˆ°çš„æ˜¯å¢é•¿ä¸ºåŸæ¥çš„1.5å€ï¼‰ã€‚                          </span><br><span class="line"></span><br><span class="line">ArrayListä¸Vectoréƒ½å¯ä»¥è®¾ç½®åˆå§‹çš„ç©ºé—´å¤§å°ï¼ŒVectorè¿˜å¯ä»¥è®¾ç½®å¢é•¿çš„ç©ºé—´å¤§å°ï¼Œè€ŒArrayListæ²¡æœ‰æ              </span><br><span class="line"></span><br><span class="line">ä¾›è®¾ç½®å¢é•¿ç©ºé—´çš„æ–¹æ³•ã€‚</span><br></pre></td></tr></tbody></table></figure>



<ol>
<li>HashSetå’ŒHashMapåŒºåˆ«</li>
</ol>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(1)HashSetå®ç°äº†Setæ¥å£, ä»…å­˜å‚¨å¯¹è±¡; HashMapå®ç°äº† Mapæ¥å£, å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹.</span><br><span class="line"></span><br><span class="line">(2)HashSetåº•å±‚å…¶å®æ˜¯ç”¨HashMapå®ç°å­˜å‚¨çš„, HashSetå°è£…äº†ä¸€ç³»åˆ—HashMapçš„æ–¹æ³•. ä¾é HashMapæ¥å­˜å‚¨å…ƒç´ å€¼,(åˆ©ç”¨hashMapçš„keyé”®è¿›è¡Œå­˜å‚¨), è€Œvalueå€¼é»˜è®¤ä¸ºObjectå¯¹è±¡. æ‰€ä»¥HashSetä¹Ÿä¸å…è®¸å‡ºç°é‡å¤å€¼, åˆ¤æ–­æ ‡å‡†å’ŒHashMapåˆ¤æ–­æ ‡å‡†ç›¸åŒ, ä¸¤ä¸ªå…ƒç´ çš„hashCodeç›¸ç­‰å¹¶ä¸”é€šè¿‡equals()æ–¹æ³•è¿”å›true.</span><br><span class="line">(3)å½“ä½¿ç”¨æ— å‚æ„é€ åˆ›å»º HashSetå¯¹è±¡æ—¶, å…¶å®è°ƒç”¨äº† HashMapçš„æ— å‚æ„é€ åˆ›å»ºäº†ä¸€ä¸ª HashMapå¯¹è±¡, æ‰€ä»¥ HashSet çš„åˆå§‹åŒ–å®¹é‡ä¹Ÿä¸º16, è´Ÿè½½å› å­ä¹Ÿä¸º 0.75.</span><br></pre></td></tr></tbody></table></figure>



<ol>
<li>TreeSetå’ŒTreeMapåŒºåˆ«</li>
</ol>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">TreeMap å’Œ TreeSet æ˜¯ Java Collection Framework çš„ä¸¤ä¸ªé‡è¦æˆå‘˜ï¼Œå…¶ä¸­ TreeMap æ˜¯ Map æ¥å£çš„å¸¸ç”¨å®ç°ç±»ï¼Œè€Œ TreeSet æ˜¯ Set æ¥å£çš„å¸¸ç”¨å®ç°ç±»ã€‚è™½ç„¶ TreeMap å’ŒTreeSet å®ç°çš„æ¥å£è§„èŒƒä¸åŒï¼Œä½† TreeSet åº•å±‚æ˜¯é€šè¿‡ TreeMap æ¥å®ç°çš„ï¼ˆå¦‚åŒHashSetåº•å±‚æ˜¯æ˜¯é€šè¿‡HashMapæ¥å®ç°çš„ä¸€æ ·ï¼‰ï¼Œå› æ­¤äºŒè€…çš„å®ç°æ–¹å¼å®Œå…¨ä¸€æ ·ã€‚è€Œ TreeMap çš„å®ç°å°±æ˜¯çº¢é»‘æ ‘ç®—æ³•</span><br><span class="line"></span><br><span class="line">TreeSetå’ŒTreeMapçš„å…³ç³»</span><br><span class="line"></span><br><span class="line">ã€€ã€€ä¸HashSetå®Œå…¨ç±»ä¼¼ï¼ŒTreeSeté‡Œé¢ç»å¤§éƒ¨åˆ†æ–¹æ³•éƒ½å¸‚ç›´æ¥è°ƒç”¨TreeMapæ–¹æ³•æ¥å®ç°çš„ã€‚</span><br><span class="line"></span><br><span class="line">ç›¸åŒç‚¹ï¼š</span><br><span class="line"></span><br><span class="line">TreeMapå’ŒTreeSetéƒ½æ˜¯éåŒæ­¥é›†åˆï¼Œå› æ­¤ä»–ä»¬ä¸èƒ½åœ¨å¤šçº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œä¸è¿‡å¯ä»¥ä½¿ç”¨æ–¹æ³•Collections.synchroinzedMap()æ¥å®ç°åŒæ­¥</span><br><span class="line">è¿è¡Œé€Ÿåº¦éƒ½è¦æ¯”Hashé›†åˆæ…¢ï¼Œä»–ä»¬å†…éƒ¨å¯¹å…ƒç´ çš„æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸ºO(logN)ï¼Œè€ŒHashMap/HashSetåˆ™ä¸ºO(1)ã€‚</span><br><span class="line">TreeMapå’ŒTreeSetéƒ½æ˜¯æœ‰åºçš„é›†åˆï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä»¬å­˜å‚¨çš„å€¼éƒ½æ˜¯æ‹å¥½åºçš„ã€‚</span><br><span class="line">ä¸åŒç‚¹ï¼š</span><br><span class="line"></span><br><span class="line">æœ€ä¸»è¦çš„åŒºåˆ«å°±æ˜¯TreeSetå’ŒTreeMapåˆ†åˆ«å®ç°Setå’ŒMapæ¥å£</span><br><span class="line">TreeSetåªå­˜å‚¨ä¸€ä¸ªå¯¹è±¡ï¼Œè€ŒTreeMapå­˜å‚¨ä¸¤ä¸ªå¯¹è±¡Keyå’ŒValueï¼ˆä»…ä»…keyå¯¹è±¡æœ‰åºï¼‰</span><br><span class="line">TreeSetä¸­ä¸èƒ½æœ‰é‡å¤å¯¹è±¡ï¼Œè€ŒTreeMapä¸­å¯ä»¥å­˜åœ¨</span><br><span class="line">TreeMapçš„åº•å±‚é‡‡ç”¨çº¢é»‘æ ‘çš„å®ç°ï¼Œå®Œæˆæ•°æ®æœ‰åºçš„æ’å…¥ï¼Œæ’åºã€‚</span><br></pre></td></tr></tbody></table></figure>



<ol>
<li>HashMapå’ŒHashtable[çº¿ç¨‹å®‰å…¨]åŒºåˆ«</li>
</ol>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹å®‰å…¨æ€§ä¸åŒã€‚HashMapçº¿ç¨‹ä¸å®‰å…¨ï¼›Hashtable ä¸­çš„æ–¹æ³•æ˜¯Synchronizeçš„ã€‚</span><br><span class="line">keyã€valueæ˜¯å¦å…è®¸nullã€‚HashMapçš„keyå’Œvalueéƒ½æ˜¯å¯ä»¥æ˜¯nullï¼Œkeyåªå…è®¸ä¸€ä¸ªnullï¼›Hashtableçš„keyå’Œvalueéƒ½ä¸å¯ä¸ºnullã€‚</span><br><span class="line">è¿­ä»£å™¨ä¸åŒã€‚HashMapçš„Iteratoræ˜¯fail-fastè¿­ä»£å™¨ï¼›Hashtableè¿˜ä½¿ç”¨äº†enumeratorè¿­ä»£å™¨ã€‚</span><br><span class="line">hashçš„è®¡ç®—æ–¹å¼ä¸åŒã€‚HashMapè®¡ç®—äº†hashå€¼ï¼›Hashtableä½¿ç”¨äº†keyçš„hashCodeæ–¹æ³•ã€‚</span><br><span class="line">é»˜è®¤åˆå§‹å¤§å°å’Œæ‰©å®¹æ–¹å¼ä¸åŒã€‚HashMapé»˜è®¤åˆå§‹å¤§å°16ï¼Œå®¹é‡å¿…é¡»æ˜¯2çš„æ•´æ•°æ¬¡å¹‚ï¼Œæ‰©å®¹æ—¶å°†å®¹é‡å˜ä¸ºåŸæ¥çš„2å€ï¼›Hashtableé»˜è®¤åˆå§‹å¤§å°11ï¼Œæ‰©å®¹æ—¶å°†å®¹é‡å˜ä¸ºåŸæ¥çš„2å€åŠ 1ã€‚</span><br><span class="line">æ˜¯å¦æœ‰containsæ–¹æ³•ã€‚HashMapæ²¡æœ‰containsæ–¹æ³•ï¼›HashtableåŒ…å«containsæ–¹æ³•ï¼Œç±»ä¼¼äºcontainsValueã€‚</span><br><span class="line">çˆ¶ç±»ä¸åŒã€‚HashMapç»§æ‰¿è‡ªAbstractMapï¼›Hashtableç»§æ‰¿è‡ªDictionaryã€‚</span><br></pre></td></tr></tbody></table></figure>



<ol>
<li>Collectionå’ŒCollections[é›†åˆå·¥å…·ç±»]åŒºåˆ«</li>
</ol>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1ã€java.util.Collection æ˜¯ä¸€ä¸ªé›†åˆæ¥å£ã€‚å®ƒæä¾›äº†å¯¹é›†åˆå¯¹è±¡è¿›è¡ŒåŸºæœ¬æ“ä½œçš„é€šç”¨æ¥å£æ–¹æ³•ã€‚Collectionæ¥å£åœ¨Java ç±»åº“ä¸­æœ‰å¾ˆå¤šå…·ä½“çš„å®ç°ã€‚Collectionæ¥å£çš„æ„ä¹‰æ˜¯ä¸ºå„ç§å…·ä½“çš„é›†åˆæä¾›äº†æœ€å¤§åŒ–çš„ç»Ÿä¸€æ“ä½œæ–¹å¼ã€‚</span><br><span class="line"></span><br><span class="line">Listï¼ŒSetï¼ŒQueueæ¥å£éƒ½ç»§æ‰¿Collectionã€‚</span><br><span class="line">ç›´æ¥å®ç°è¯¥æ¥å£çš„ç±»åªæœ‰AbstractCollectionç±»ï¼Œè¯¥ç±»ä¹Ÿåªæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæä¾›äº†å¯¹é›†åˆç±»æ“ä½œçš„ä¸€äº›åŸºæœ¬å®ç°ã€‚Listå’ŒSetçš„å…·ä½“å®ç°ç±»åŸºæœ¬ä¸Šéƒ½ç›´æ¥æˆ–é—´æ¥çš„ç»§æ‰¿äº†è¯¥ç±»ã€‚</span><br><span class="line"></span><br><span class="line">2ã€java.util.Collections æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ã€‚ å®ƒåŒ…å«æœ‰å„ç§æœ‰å…³é›†åˆæ“ä½œçš„é™æ€æ–¹æ³•ï¼ˆå¯¹é›†åˆçš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰ï¼‰ï¼Œå¤§å¤šæ•°æ–¹æ³•éƒ½æ˜¯ç”¨æ¥å¤„ç†çº¿æ€§è¡¨çš„ã€‚æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼ŒæœåŠ¡äºJavaçš„Collectionæ¡†æ¶ã€‚</span><br></pre></td></tr></tbody></table></figure>


</blockquote>
<h1 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h1><blockquote>
<ol>
<li><p>åˆ©ç”¨é€šè¿‡java.lang.Comparable[I]</p>
<p>å¯¹è±¡å»å®ç°è¿™ä¸ªæ¥å£,å¹¶ä¸”é‡å†™comparaToæ–¹æ³•</p>
</li>
<li><p>åˆ©ç”¨æ„é€ å™¨ä¸­å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒå™¨æ¥å£  =&gt; æ›´åŠ çµæ´»ä¸€ç‚¹</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">TreeSet</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> E&gt; comparator)</span> {</span><br><span class="line">  <span class="built_in">this</span>(<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;(comparator));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h1 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h1><h2 id="æ³›å‹ç¬¦å·"><a href="#æ³›å‹ç¬¦å·" class="headerlink" title="æ³›å‹ç¬¦å·"></a>æ³›å‹ç¬¦å·</h2><blockquote>
<p>? </p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;?&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="literal">null</span>);<span class="comment">//åªèƒ½æ·»åŠ null</span></span><br></pre></td></tr></tbody></table></figure>

<p>K,V - é”®,å€¼</p>
<p>T - ç±»å‹</p>
<p>E - å…ƒç´ </p>
</blockquote>
<h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><blockquote>
<ol>
<li><p>æ³›å‹ç±»</p>
</li>
<li><p>æ³›å‹æ–¹æ³•</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">find</span><span class="params">(T t)</span>{</span><br><span class="line">  System.out.println(<span class="string">"find:"</span>+t);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; T <span class="title function_">get</span><span class="params">(T t)</span>{</span><br><span class="line">  System.out.println(<span class="string">"find:"</span>+t);</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">find2</span><span class="params">(T t)</span>{</span><br><span class="line">  System.out.println(<span class="string">"find:"</span>+t);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="æ³›å‹å¥½å¤„"><a href="#æ³›å‹å¥½å¤„" class="headerlink" title="æ³›å‹å¥½å¤„"></a>æ³›å‹å¥½å¤„</h2><blockquote>
<p>1ã€ç±»å‹å®‰å…¨</p>
<p>æ³›å‹çš„ä¸»è¦ç›®æ ‡æ˜¯æé«˜Javaç¨‹åºçš„ç±»å‹å®‰å…¨ã€‚é€šè¿‡çŸ¥é“ä½¿ç”¨æ³›å‹å®šä¹‰çš„å˜é‡çš„ç±»å‹é™åˆ¶ï¼Œç¼–è¯‘å™¨å¯ä»¥åœ¨éå¸¸é«˜çš„å±‚æ¬¡ä¸ŠéªŒè¯ç±»å‹å‡è®¾ã€‚æ²¡æœ‰æ³›å‹ï¼Œè¿™äº›å‡è®¾å°±åªå­˜åœ¨äºç³»ç»Ÿå¼€å‘äººå‘˜çš„å¤´è„‘ä¸­ã€‚</p>
<p>é€šè¿‡åœ¨å˜é‡å£°æ˜ä¸­æ•è·è¿™ä¸€é™„åŠ çš„ç±»å‹ä¿¡æ¯ï¼Œæ³›å‹å…è®¸ç¼–è¯‘å™¨å®æ–½è¿™äº›é™„åŠ çš„ç±»å‹çº¦æŸã€‚ç±»å‹é”™è¯¯å°±å¯ä»¥åœ¨ç¼–è¯‘æ—¶è¢«æ•è·äº†ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶å½“ä½œClassCastExceptionå±•ç¤ºå‡ºæ¥ã€‚å°†ç±»å‹æ£€æŸ¥ä»è¿è¡Œæ—¶æŒªåˆ°ç¼–è¯‘æ—¶æœ‰åŠ©äºJavaå¼€å‘äººå‘˜æ›´æ—©ã€æ›´å®¹æ˜“åœ°æ‰¾åˆ°é”™è¯¯ï¼Œå¹¶å¯æé«˜ç¨‹åºçš„å¯é æ€§ã€‚</p>
<p>2ã€æ¶ˆé™¤å¼ºåˆ¶ç±»å‹è½¬æ¢</p>
<p>æ³›å‹çš„ä¸€ä¸ªé™„å¸¦å¥½å¤„æ˜¯ï¼Œæ¶ˆé™¤æºä»£ç ä¸­çš„è®¸å¤šå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚è¿™ä½¿å¾—ä»£ç æ›´åŠ å¯è¯»ï¼Œå¹¶ä¸”å‡å°‘äº†å‡ºé”™æœºä¼šã€‚å°½ç®¡å‡å°‘å¼ºåˆ¶ç±»å‹è½¬æ¢å¯ä»¥æé«˜ä½¿ç”¨æ³›å‹ç±»çš„ä»£ç çš„ç´¯èµç¨‹åº¦ï¼Œä½†æ˜¯å£°æ˜æ³›å‹å˜é‡æ—¶å´ä¼šå¸¦æ¥ç›¸åº”çš„ç´¯èµç¨‹åº¦ã€‚åœ¨ç®€å•çš„ç¨‹åºä¸­ä½¿ç”¨ä¸€æ¬¡æ³›å‹å˜é‡ä¸ä¼šé™ä½ä»£ç ç´¯èµç¨‹åº¦ã€‚ä½†æ˜¯å¯¹äºå¤šæ¬¡ä½¿ç”¨æ³›å‹å˜é‡çš„å¤§å‹ç¨‹åºæ¥è¯´ï¼Œåˆ™å¯ä»¥ç´¯ç§¯èµ·æ¥é™ä½ç´¯èµç¨‹åº¦ã€‚æ‰€ä»¥æ³›å‹æ¶ˆé™¤äº†å¼ºåˆ¶ç±»å‹è½¬æ¢ä¹‹åï¼Œä¼šä½¿å¾—ä»£ç åŠ æ¸…æ™°å’Œç­’æ´ã€‚</p>
<p>3ã€æ›´é«˜çš„è¿è¡Œæ•ˆç‡</p>
<p>åœ¨éæ³›å‹ç¼–ç¨‹ä¸­ï¼Œå°†ç­’å•ç±»å‹ä½œä¸ºObjectä¼ é€’æ—¶ä¼šå¼•èµ·Boxingï¼ˆè£…ç®±ï¼‰å’ŒUnboxingï¼ˆæ‹†ç®±ï¼‰æ“ä½œï¼Œè¿™ä¸¤ä¸ªè¿‡ç¨‹éƒ½æ˜¯å…·æœ‰å¾ˆå¤§å¼€é”€çš„ã€‚å¼•å…¥æ³›å‹åï¼Œå°±ä¸å¿…è¿›è¡ŒBoxingå’ŒUnboxingæ“ä½œäº†ï¼Œæ‰€ä»¥è¿è¡Œæ•ˆç‡ç›¸å¯¹è¾ƒé«˜ï¼Œç‰¹åˆ«åœ¨å¯¹é›†åˆæ“ä½œéå¸¸é¢‘ç¹çš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªç‰¹ç‚¹å¸¦æ¥çš„æ€§èƒ½æå‡æ›´åŠ æ˜æ˜¾ã€‚</p>
<p>4ã€æ½œåœ¨çš„æ€§èƒ½æ”¶ç›Š</p>
<p>æ³›å‹ä¸ºè¾ƒå¤§çš„ä¼˜åŒ–å¸¦æ¥å¯èƒ½ã€‚åœ¨æ³›å‹çš„åˆå§‹å®ç°ä¸­ï¼Œç¼–è¯‘å™¨å°†å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆæ²¡æœ‰æ³›å‹çš„è¯ï¼ŒJavaç³»ç»Ÿå¼€å‘äººå‘˜ä¼šæŒ‡å®šè¿™äº›å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼‰æ’å…¥ç”Ÿæˆçš„å­—èŠ‚ç ä¸­ã€‚ä½†æ˜¯æ›´å¤šç±»å‹ä¿¡æ¯å¯ç”¨äºç¼–è¯‘å™¨è¿™ä¸€äº‹å®ï¼Œä¸ºæœªæ¥ç‰ˆæœ¬çš„JVMçš„ä¼˜åŒ–å¸¦æ¥å¯èƒ½ã€‚</p>
</blockquote>
<h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Overridde</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">save</span><span class="params">(Student s)</span>{</span><br><span class="line">  <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> HibernateUtil.getSession();</span><br><span class="line"></span><br><span class="line">  <span class="type">Transaction</span> <span class="variable">tx</span> <span class="operator">=</span> session.beginTransaction();</span><br><span class="line"></span><br><span class="line">  tx.save(s);</span><br><span class="line"></span><br><span class="line">  tx.commit();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Overridde</span></span><br><span class="line"><span class="keyword">public</span> Student <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span>{</span><br><span class="line">  <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> HibernateUtil.getSession();</span><br><span class="line"></span><br><span class="line">  <span class="type">Transaction</span> <span class="variable">tx</span> <span class="operator">=</span> session.beginTransaction();</span><br><span class="line"></span><br><span class="line">  <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> session.get(Student.class,id);</span><br><span class="line"></span><br><span class="line">  tx.commit();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸šåŠ¡æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ITeacherDao</span>{</span><br><span class="line">    Teacher <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">  </span><br><span class="line">    List&lt;Teacher&gt; <span class="title function_">loadAll</span><span class="params">()</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="type">int</span> <span class="title function_">save</span><span class="params">(Teacher t)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸šåŠ¡æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span>{</span><br><span class="line">    Student <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">  </span><br><span class="line">    List&lt;Student&gt; <span class="title function_">loadAll</span><span class="params">()</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="type">int</span> <span class="title function_">save</span><span class="params">(Student s)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//è€ƒè™‘æŠ½ç¦»å‡ºé¡¶çº§çš„æ¥å£å‡ºæ¥</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IBaseDao</span>&lt;T&gt; {</span><br><span class="line">    T <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">    </span><br><span class="line">    List&lt;T&gt; <span class="title function_">loadAll</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> <span class="title function_">save</span><span class="params">(T t)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¡¶çº§æ¥å£çš„å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseDaoImpl</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">IBaseDao</span>&lt;T&gt; {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span> {</span><br><span class="line">        <span class="comment">//å…·ä½“çš„å®ç°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">loadAll</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">//å…·ä½“çš„å®ç°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">save</span><span class="params">(T t)</span> {</span><br><span class="line">        <span class="comment">//å…·ä½“çš„å®ç°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¶å®šä¸šåŠ¡æ¥å£ç‰¹æœ‰çš„åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> <span class="keyword">extends</span> <span class="title class_">IBaseDao</span>&lt;Student&gt;{  </span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>;  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentDaoImpl</span> <span class="keyword">extends</span> <span class="title class_">BaseDaoImpl</span>&lt;Student&gt; <span class="keyword">implements</span> <span class="title class_">IStudentDao</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> {</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æŒ‡å®šä¸Šé™å’Œä¸‹é™"><a href="#æŒ‡å®šä¸Šé™å’Œä¸‹é™" class="headerlink" title="æŒ‡å®šä¸Šé™å’Œä¸‹é™"></a>æŒ‡å®šä¸Šé™å’Œä¸‹é™</h2><blockquote>
<ol>
<li><p>æŒ‡å®šä¸‹é™</p>
<p>æ³›å‹å‚æ•°å¯ä»¥æ˜¯E,ä¹Ÿå¯ä»¥æ˜¯Eçš„çˆ¶ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">? <span class="built_in">super</span> E</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŒ‡å®šä¸Šé™</p>
<p>æ³›å‹å‚æ•°å¯ä»¥æ˜¯E,ä¹Ÿå¯ä»¥æ˜¯Eçš„å­ç±»</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">? <span class="keyword">extends</span> <span class="title class_">E</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<blockquote>
<p>æ³›å‹æ˜¯æ²¡æœ‰å¤šæ€çš„.</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/collection/" rel="tag">collection</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-sqlå¸¸ç”¨æŸ¥è¯¢â€˜" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/08/08/sql%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2%E2%80%98/" class="article-date">
  	<time datetime="2022-08-08T00:30:09.000Z" itemprop="datePublished">2022-08-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/08/sql%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2%E2%80%98/">
        sqlå¸¸ç”¨æŸ¥è¯¢â€˜
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="SQLæŸ¥è¯¢ç»ƒä¹ "><a href="#SQLæŸ¥è¯¢ç»ƒä¹ " class="headerlink" title="SQLæŸ¥è¯¢ç»ƒä¹ "></a>SQLæŸ¥è¯¢ç»ƒä¹ </h1><blockquote>
<ol>
<li><p><strong>æŸ¥è¯¢id=1è¯¾ç¨‹æ¯”id=2è¯¾ç¨‹æˆç»©é«˜çš„å­¦ç”Ÿçš„ä¿¡æ¯[å­¦ç”Ÿidå’Œå­¦ç”Ÿçš„å§“å]åŠè¯¾ç¨‹åˆ†æ•°</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname,sc1.score from student s join sc sc1 on s.id=sc1.sid join sc sc2 on sc1.sid=sc2.sid where sc1.cid=1 and sc2.cid=2 and sc1.score &gt;sc2.score; </span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢åŒæ—¶å­˜åœ¨1 è¯¾ç¨‹å’Œ2è¯¾ç¨‹çš„æƒ…å†µ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname,sc1.score from student s join sc sc1 on s.id=sc1.sid join sc sc2 on sc1.sid=sc2.sid where  sc2.cid =2 and sc1.cid=1 ;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å­˜åœ¨1 è¯¾ç¨‹ä½†å¯èƒ½ä¸å­˜åœ¨2è¯¾ç¨‹çš„æƒ…å†µ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname,sc1.score from student s join sc sc1 on s.id=sc1.sid  where  sc1.cid=1 ;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>æŸ¥è¯¢ä¸å­˜åœ¨1è¯¾ç¨‹ä½†å­˜åœ¨2è¯¾ç¨‹çš„æƒ…å†µ</strong> (<strong>ä¸å­˜åœ¨æ—¶æ˜¾ç¤ºä¸º null</strong>)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sc2.sid ,sc2.cid ,sc1.score è¯¾ç¨‹1,sc2.score è¯¾ç¨‹2 from (select *from sc where cid=1 ) sc1  RIGHT join (select *from sc where cid=2 ) sc2 on sc1.sid=sc2.sid where sc1.cid is null and sc2.cid=2;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº 60 åˆ†çš„åŒå­¦çš„å­¦ç”Ÿç¼–å·å’Œå­¦ç”Ÿå§“åå’Œå¹³å‡æˆç»©</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname,avg(sc.score) from student s join sc sc on s.id=sc.sid group by s.id having avg(sc.score)&gt;60 ; </span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢åœ¨ SC è¡¨å­˜åœ¨æˆç»©çš„å­¦ç”Ÿä¿¡æ¯</p>
</li>
</ol>
  <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct s.id,s.sname from student s join sc sc on s.id=sc.sid where exists(select 1 from sc where score is not null);</span><br></pre></td></tr></tbody></table></figure>

<ol start="7">
<li><p>æŸ¥è¯¢æ‰€æœ‰åŒå­¦çš„å­¦ç”Ÿç¼–å·ã€å­¦ç”Ÿå§“åã€é€‰è¯¾æ€»æ•°ã€æ‰€æœ‰è¯¾ç¨‹çš„æ€»æˆç»©</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id ,s.sname,count(sc.cid),sum(sc.score) from student s join sc sc where sc.sid=s.id group by s.id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢ã€Œæã€å§“è€å¸ˆçš„<strong>æ•°é‡</strong></p>
<p><code>æŸ¥è¯¢æè€å¸ˆçš„å¸¦è¿‡çš„å­¦ç”Ÿçš„æ•°é‡/æˆè¯¾çš„æ•°é‡</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•ä¸€.select (select count( c.id) 'æˆè¯¾æ•°' from teacher t join course c on c.tid=t.id join sc sc on sc.cid=c.id  where t.tname like 'æ%') æˆè¯¾æ•°,(select count( sc.sid) 'å­¦ç”Ÿæ•°' from teacher t join course c on c.tid=t.id join sc sc on sc.cid=c.id  where t.tname like 'æ%')  å¸¦è¿‡çš„å­¦ç”Ÿ;select (select count(distinct c.id) 'æˆè¯¾æ•°' from teacher t join course c on c.tid=t.id join sc sc on sc.cid=c.id  where t.tname like 'æ%') æˆè¯¾æ•°ï¼›</span><br><span class="line"></span><br><span class="line">æ–¹æ³•2. select t.tname è€å¸ˆå§“å, count(distinct s.id) å­¦ç”Ÿæ•°é‡,count(sc.cid) æˆè¯¾æ•°é‡ from student s join sc sc on sc.sid=s.id join course c on c.id=sc.cid join teacher t on t.id=c.tid where t.tname like 'æ%' group by t.id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å­¦è¿‡ã€Œå¼ ä¸‰ã€è€å¸ˆæˆè¯¾çš„<strong>åŒå­¦çš„ä¿¡æ¯</strong></p>
</li>
</ol>
  <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•ä¸€.select s.id,s.sname from student s join sc sc on sc.sid=s.id where sc.cid=</span><br><span class="line">(select  c.id from teacher t left join  course c on c.tid=t.id where t.tname='å¼ ä¸‰')</span><br><span class="line"></span><br><span class="line"> æ–¹æ³•äºŒ.select  distinct s.*  from student s join sc sc on sc.sid=s.id join course c on c.id=sc.cid join teacher t on t.id=c.tid where t.tname='å¼ ä¸‰' ;</span><br></pre></td></tr></tbody></table></figure>

<ol start="10">
<li>æŸ¥è¯¢æ²¡æœ‰å­¦å…¨æ‰€æœ‰è¯¾ç¨‹çš„<strong>åŒå­¦çš„ä¿¡æ¯</strong></li>
</ol>
  <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname from student s join sc sc on sc.sid=s.id  GROUP BY s.id HAVING count(*)!=(select count(*) from course);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<ol start="11">
<li><strong>æŸ¥è¯¢è‡³å°‘æœ‰ä¸€é—¨è¯¾ä¸å­¦å·ä¸º1çš„åŒå­¦æ‰€å­¦ç›¸åŒçš„åŒå­¦çš„ä¿¡æ¯</strong></li>
</ol>
   <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname from student s join sc sc on sc.sid=s.id where sc.cid in (select sc1.cid from sc sc1 where sc1.sid=1);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<ol start="12">
<li>æŸ¥è¯¢å’Œid=1çš„åŒå­¦å­¦ä¹ çš„è¯¾ç¨‹ å®Œå…¨ç›¸åŒçš„å…¶ä»–<strong>åŒå­¦çš„ä¿¡æ¯ï¼ˆé‡è¦ï¼‰</strong> - <em><strong>éå¸¸é‡è¦,éå¸¸é‡è¦,éå¸¸é‡è¦,éå¸¸é‡è¦,éå¸¸é‡è¦!</strong></em></li>
</ol>
   <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname,s.age,s.sex from student s where s.id in(select sc.sid from sc where sc.sid&lt;&gt;1 and sc.cid in(select sc.cid from sc where sc.sid=1) group by sc.sid having count(*)=(select count(*) from sc where sc.sid=1));</span><br></pre></td></tr></tbody></table></figure>

<ol start="13">
<li><p>æŸ¥è¯¢æ²¡å­¦è¿‡â€å¼ ä¸‰â€è€å¸ˆè®²æˆçš„ä»»ä¸€é—¨è¯¾ç¨‹çš„<strong>å­¦ç”Ÿå§“å</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct s.id ID ,s.sname å­¦ç”Ÿå§“å from sc sc2  right join student s on s.id= sc2.sid where s.id not in(select sc.sid from sc where sc.cid=(  select  c.id from teacher t left join  course c on c.tid=t.id where t.tname='å¼ ä¸‰'));</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢ä¸¤é—¨åŠå…¶ä»¥ä¸Šä¸åŠæ ¼è¯¾ç¨‹çš„åŒå­¦çš„<strong>å­¦å·ï¼Œå§“ååŠå…¶å¹³å‡æˆç»©</strong></p>
</li>
</ol>
   <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.sname å§“å,s.id å­¦å·,avg(sc.score) å¹³å‡åˆ† from student  s left join sc sc on s.id=sc.sid where sc.score&lt;60 group by s.id having count(*)&gt;=2 ;</span><br></pre></td></tr></tbody></table></figure>

<ol start="15">
<li>æ£€ç´¢â€ 01 â€œè¯¾ç¨‹åˆ†æ•°å°äº 60ï¼ŒæŒ‰åˆ†æ•°é™åºæ’åˆ—çš„<strong>å­¦ç”Ÿä¿¡æ¯</strong></li>
</ol>
   <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.sname å§“å,s.id å­¦å·,sc.score  from student  s left join sc sc on s.id=sc.sid where sc.score&lt;60  and sc.cid='01' order by  3 desc;</span><br></pre></td></tr></tbody></table></figure>

<ol start="16">
<li><p>æŒ‰å¹³å‡æˆç»©ä»é«˜åˆ°ä½æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿçš„æ‰€æœ‰è¯¾ç¨‹çš„<strong>æˆç»©ä»¥åŠå¹³å‡æˆç»©</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id ID,s.sname å§“å,coalesce(sc.cid,'æœªé€‰') è¯¾ç¨‹ç¼–å·, coalesce(sc.score,0) åˆ†æ•°,coalesce((select avg(sc2.score) from sc sc2 where sc2.sid=s.id),0) å¹³å‡åˆ† from student  s left join sc sc on s.id=sc.sid order by 5 desc; </span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>æŸ¥è¯¢å„ç§‘æˆç»©å‰ä¸‰åçš„è®°å½•</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select  s.id id,s.sname å§“å,sc.cid è¯¾ç¨‹å·, sc.score åˆ†æ•° from student  s  join sc sc on s.id=sc.sid where exists (select 1 from sc sc1 where sc.cid=sc1.cid and sc.score&lt;sc1.score  having count(*)&lt;3) order by 4 desc, 3 desc; </span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹è¢«é€‰ä¿®çš„å­¦ç”Ÿæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select c.id è¯¾ç¨‹å·,c.cname è¯¾ç¨‹å,count(sc.sid) å­¦ç”Ÿæ•° from sc  right join course c on c.id=sc.cid group by sc.cid;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å‡ºåªé€‰ä¿®ä¸¤é—¨è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·å’Œå§“å</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname from student s join sc sc on sc.sid=s.id group by s.id having count(sc.cid)=2;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢ç”·ç”Ÿã€å¥³ç”Ÿäººæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.sex æ€§åˆ«,count(s.sex) äººæ•° from student s group by s.sex;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢åå­—ä¸­å«æœ‰ã€Œé£ã€å­—çš„å­¦ç”Ÿä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student s where s.sname like '%é£%';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢<strong>åŒååŒæ€§</strong>å­¦ç”Ÿåå•ï¼Œå¹¶ç»Ÿè®¡åŒååŒæ€§äººæ•°</p>
</li>
</ol>
  <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student s where exists (select 1 from student s2 where s2.sname=s.sname having count(*)&gt;=2);</span><br></pre></td></tr></tbody></table></figure>

<ol start="23">
<li>æŸ¥è¯¢ 1990 å¹´å‡ºç”Ÿçš„å­¦ç”Ÿåå•</li>
</ol>
   <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select *from student s where year(s.age)=1990; </span><br></pre></td></tr></tbody></table></figure>

<ol start="24">
<li><p>æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹çš„å¹³å‡æˆç»©ï¼Œç»“æœæŒ‰å¹³å‡æˆç»©é™åºæ’åˆ—ï¼Œå¹³å‡æˆç»©ç›¸åŒæ—¶ï¼ŒæŒ‰è¯¾ç¨‹ç¼–å·å‡åºæ’åˆ—</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select c.cname è¯¾ç¨‹å,sc.cid è¯¾ç¨‹id,avg(sc.score) å¹³å‡æˆç»© from course c left join sc sc on sc.cid=c.id group by c.id order by  3 desc,2;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº 85 çš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·ã€å§“åå’Œå¹³å‡æˆç»©</p>
</li>
</ol>
   <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id id,s.sname å§“å,coalesce(avg(sc.score),0) å¹³å‡æˆç»© from student s left join sc sc on s.id=sc.sid group by s.id having å¹³å‡æˆç»©&gt;85;</span><br></pre></td></tr></tbody></table></figure>

<ol start="26">
<li><p>æŸ¥è¯¢è¯¾ç¨‹åç§°ä¸ºã€Œæ•°å­¦ã€ï¼Œä¸”åˆ†æ•°ä½äº 60 çš„å­¦ç”Ÿå§“åå’Œåˆ†æ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id id,s.sname å§“å,sc.score åˆ†æ•° from student s join sc sc on s.id=sc.sid join course c on c.id=sc.cid where c.cname='æ•°å­¦' and sc.score&lt;60;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢ä»»ä½•ä¸€é—¨è¯¾ç¨‹æˆç»©åœ¨ 70 åˆ†ä»¥ä¸Šçš„å§“åã€è¯¾ç¨‹åç§°å’Œåˆ†æ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id id,s.sname å§“å ,sc.cid è¯¾ç¨‹å ,sc.score åˆ†æ•° from student s left join sc sc on s.id=sc.sid where sc.score&gt;70;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å­˜åœ¨ä¸åŠæ ¼çš„è¯¾ç¨‹</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sc.cid ,c.cname from sc sc join course c on c.id=sc.cid where sc.score&lt;60 group by sc.cid ;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢è¯¾ç¨‹ç¼–å·ä¸º 01 ä¸”è¯¾ç¨‹æˆç»©åœ¨ 80 åˆ†ä»¥ä¸Šçš„å­¦ç”Ÿçš„å­¦å·å’Œå§“å</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname from student s join sc sc on sc.sid=s.id where sc.cid=1 and sc.score&gt;80 group by s.id,s.sname;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ±‚æ¯é—¨è¯¾ç¨‹çš„å­¦ç”Ÿäººæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sc.cid ,count(sc.sid) from sc group by sc.cid ;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å‡è®¾<strong>æˆç»©ä¸é‡å¤</strong>ï¼ŒæŸ¥è¯¢é€‰ä¿®ã€Œå¼ ä¸‰ã€è€å¸ˆæ‰€æˆè¯¾ç¨‹çš„å­¦ç”Ÿä¸­ï¼Œæˆç»©æœ€é«˜çš„å­¦ç”Ÿä¿¡æ¯åŠå…¶æˆç»©</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname,sc.score from student s join sc on sc.sid=s.id join course c on c.id=sc.cid join teacher t on t.id=c.tid and t.tname ='å¼ ä¸‰' where exists (select * from sc sc2 where sc.cid=sc2.cid and sc.score&lt;sc2.score having count(*)&lt;1) ;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>å‡è®¾æˆç»©æœ‰é‡å¤çš„æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢é€‰ä¿®ã€Œå¼ ä¸‰ã€è€å¸ˆæ‰€æˆè¯¾ç¨‹çš„å­¦ç”Ÿä¸­ï¼Œæˆç»©æœ€é«˜çš„å­¦ç”Ÿä¿¡æ¯åŠå…¶æˆç»©</strong></p>
</li>
</ol>
   <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student s join sc on sc.sid=s.id join course c on c.id=sc.cid join teacher t on t.id=c.tid and t.tname ='å¼ ä¸‰' where exists (select * from sc sc2 where sc.cid=sc2.cid and sc.score&gt;=sc2.score having count(*)=(select count(sc3.cid) from sc sc3 where sc3.cid=sc.cid)) ;</span><br></pre></td></tr></tbody></table></figure>

<ol start="33">
<li><p>æŸ¥è¯¢<strong>ä¸åŒè¯¾ç¨‹æˆç»©ç›¸åŒ</strong>çš„å­¦ç”Ÿçš„å­¦ç”Ÿç¼–å·ã€è¯¾ç¨‹ç¼–å·ã€å­¦ç”Ÿæˆç»©</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select s.id,s.sname,sc.cid,sc.score from student s join sc sc on sc.sid=s.id join sc sc2 on sc.sid=sc2.sid where sc.score=sc2.score and</span><br><span class="line">sc.cid!=sc2.cid;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡æ¯é—¨è¯¾ç¨‹çš„å­¦ç”Ÿé€‰ä¿®äººæ•°ï¼ˆè¶…è¿‡ 5 äººçš„è¯¾ç¨‹æ‰ç»Ÿè®¡ï¼‰</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sc.cid,count(*) from sc group by sc.cid having count(*)&gt;5</span><br></pre></td></tr></tbody></table></figure>



<ol start="34">
<li>æ£€ç´¢è‡³å°‘é€‰ä¿®ä¸¤é—¨è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·</li>
</ol>
  <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id from student s join sc on sc.sid=s.id  group by s.id having count(sc.cid)&gt;=2;</span><br></pre></td></tr></tbody></table></figure>

<ol start="36">
<li>æŸ¥è¯¢é€‰ä¿®äº†å…¨éƒ¨è¯¾ç¨‹çš„å­¦ç”Ÿä¿¡æ¯</li>
</ol>
  <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.id from student s join sc on sc.sid=s.id  group by s.id having count(sc.cid)=(select count(c.id) from course c );  </span><br></pre></td></tr></tbody></table></figure>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/interview/" rel="tag">interview</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2022 ape_li
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/preccrep/hexo-theme-jelly" target="_blank">Jelly</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>