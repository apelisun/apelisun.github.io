<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>mysql3 - ape_li</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="null">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <meta name="description" content="DBè®¾è®¡ æŒ‡å¯¼dbè®¾è®¡çš„æ€æƒ³,é¿å…è¡¨ä¸­å‡ºç°å¤§é‡çš„å†—ä½™çš„æ•°æ®.ä½†æ˜¯å®é™…å¼€å‘ä¸­è¡¨ä¸­æ˜¯å…è®¸å‡ºç°å†—ä½™çš„å­—æ®µçš„. å†—ä½™æ•°æ®çš„å¥½å¤„ - å®‰å…¨,æ–¹ä¾¿æŸ¥è¯¢.åå¤„-&gt;deleteå’Œupdateæ“ä½œ    1NF - ç¬¬ä¸€èŒƒå¼-ä¿è¯åˆ—çš„åŸå­æ€§,ä¿è¯åˆ—ä¸å¯å†åˆ‡å‰² s_emp(id,name) - å‘ç°nameä¸å…·å¤‡åŸå­æ€§,å¯ä»¥è¢«å†æ¬¡åˆ‡å‰²(fist_name,last_name) s_ord(id,address)">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql3">
<meta property="og:url" content="https://apelisun.github.io/2022/08/09/mysql3/index.html">
<meta property="og:site_name" content="ape_li">
<meta property="og:description" content="DBè®¾è®¡ æŒ‡å¯¼dbè®¾è®¡çš„æ€æƒ³,é¿å…è¡¨ä¸­å‡ºç°å¤§é‡çš„å†—ä½™çš„æ•°æ®.ä½†æ˜¯å®é™…å¼€å‘ä¸­è¡¨ä¸­æ˜¯å…è®¸å‡ºç°å†—ä½™çš„å­—æ®µçš„. å†—ä½™æ•°æ®çš„å¥½å¤„ - å®‰å…¨,æ–¹ä¾¿æŸ¥è¯¢.åå¤„-&gt;deleteå’Œupdateæ“ä½œ    1NF - ç¬¬ä¸€èŒƒå¼-ä¿è¯åˆ—çš„åŸå­æ€§,ä¿è¯åˆ—ä¸å¯å†åˆ‡å‰² s_emp(id,name) - å‘ç°nameä¸å…·å¤‡åŸå­æ€§,å¯ä»¥è¢«å†æ¬¡åˆ‡å‰²(fist_name,last_name) s_ord(id,address)">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="c:/Users/liming/Desktop/zang.png">
<meta property="og:image" content="c:/Users/liming/Desktop/no.png">
<meta property="og:image" content="c:/Users/liming/Desktop/huan.png">
<meta property="og:image" content="c:/Users/liming/Desktop/repeat.png">
<meta property="article:published_time" content="2022-08-09T13:23:13.000Z">
<meta property="article:modified_time" content="2022-08-10T03:49:53.353Z">
<meta property="article:author" content="ape_li">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="meet DB">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:/Users/liming/Desktop/zang.png">
    
<link rel="stylesheet" href="lib/fancybox/fancybox.css">
<link rel="stylesheet" href="lib/justifiedGallery/justifiedGallery.min.css">
<link rel="stylesheet" href="lib/mdui_043tiny/mdui.css">


    <link rel="stylesheet" href="../../../../lib/iconfont/iconfont.css?v=1660125027000">
    
    <link rel="stylesheet" href="../../../../css/style.css?v=1660125027000">

    
        
            <link rel="stylesheet" href="../../../../custom.css?v=1660125027000">
        
    
<meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="atom.xml" title="ape_li" type="application/atom+xml">
</head>

<body class="mdui-drawer-body-left">
    <div id="nexmoe-background">
        <div class="nexmoe-bg" style="background-image: url(https://i.dawnlab.me/b5a7e61560facdd5b8aa9683fce147d7.png)"></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="../../../../index.html" title="ape_li" class="mdui-btn mdui-btn-icon"><img src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/avatar.png" alt="ape_li"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="../../../../index.html" title="ape_li">
            <img src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/avatar.png" alt="ape_li" alt="ape_li">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>æ–‡ç« </span>10</div>
        <div><span>æ ‡ç­¾</span>13</div>
        <div><span>åˆ†ç±»</span>0</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="../../../../index.html" title="å›åˆ°é¦–é¡µ">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                å›åˆ°é¦–é¡µ
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="../../../../archive.html" title="æ–‡ç« å½’æ¡£">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                æ–‡ç« å½’æ¡£
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="../../../../PY.html" title="æˆ‘çš„æœ‹å‹">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                æˆ‘çš„æœ‹å‹
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="../../../../donate.html" title="ç»™æˆ‘èµåŠ©">
            <i class="mdui-list-item-icon nexmoefont icon-coffee"></i>
            <div class="mdui-list-item-content">
                ç»™æˆ‘èµåŠ©
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="../../../../about.html" title="å…³äºåšä¸»">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                å…³äºåšä¸»
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
    
        
        <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://cn.bing.com/search?q=site:nexmoe.com" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="æœç´¢"></label>
            </form>
         
    </div>
</div>




    
        
        <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="https://jq.qq.com/?_wv=1027&k=5CfKHun"
			target="_blank"
			mdui-tooltip="{content: 'QQç¾¤'}"
			style="
				color: rgb(249, 174, 8);
				background-color: rgba(249, 174, 8, .1);
			"
		>
			<i
				class="nexmoefont icon-QQ"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://space.bilibili.com/20238211"
			target="_blank"
			mdui-tooltip="{content: 'å“”å“©å“”å“©'}"
			style="
				color: rgb(231, 106, 141);
				background-color: rgba(231, 106, 141, .1);
			"
		>
			<i
				class="nexmoefont icon-bilibili"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://github.com/nexmoe/"
			target="_blank"
			mdui-tooltip="{content: 'GitHub'}"
			style="
				color: rgb(25, 23, 23);
				background-color: rgba(25, 23, 23, .1);
			"
		>
			<i
				class="nexmoefont icon-github"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://www.zhihu.com/people/nexmoe"
			target="_blank"
			mdui-tooltip="{content: 'çŸ¥ä¹'}"
			style="
				color: rgb(30, 136, 229);
				background-color: rgba(30, 136, 229, .1);
			"
		>
			<i
				class="nexmoefont icon-zhihu"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://twitter.com/nexmoe"
			target="_blank"
			mdui-tooltip="{content: 'Twitter'}"
			style="
				color: rgb(59, 151, 239);
				background-color: rgba(59, 151, 239, .1);
			"
		>
			<i
				class="nexmoefont icon-twitter"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://nexmoe.com/atom.xml"
			target="_blank"
			mdui-tooltip="{content: 'RSS'}"
			style="
				color: rgb(247, 132, 34);
				background-color: rgba(247, 132, 34, .1);
			"
		>
			<i
				class="nexmoefont icon-rss"
			></i> </a
		>
	</div>
</div>

    
        
        

    
        
        
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="../../../../tags/B-%E6%A0%91/" style="font-size: 10px;">B+æ ‘</a> <a href="../../../../tags/area/" style="font-size: 10px;">area</a> <a href="../../../../tags/collection/" style="font-size: 10px;">collection</a> <a href="../../../../tags/homework/" style="font-size: 10px;">homework</a> <a href="../../../../tags/index/" style="font-size: 10px;">index</a> <a href="../../../../tags/interview/" style="font-size: 10px;">interview</a> <a href="../../../../tags/java/" style="font-size: 10px;">java</a> <a href="../../../../tags/meet-DB/" style="font-size: 10px;">meet DB</a> <a href="../../../../tags/msql/" style="font-size: 10px;">msql</a> <a href="../../../../tags/mysql/" style="font-size: 20px;">mysql</a> <a href="../../../../tags/procedure/" style="font-size: 10px;">procedure</a> <a href="../../../../tags/view/" style="font-size: 10px;">view</a> <a href="../../../../tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">æ•°æ®åº“åŸºç¡€</a>
    </div>
    
      <script>
        var maxTagcloud = parseInt(17);
        var tags_length = parseInt(13);
        var tags_arr = [];
        for(var i = 0; i < tags_length; i++){
          tags_arr.push(i);
        }
        tags_arr.sort(function (l, r) {
          return Math.random() > 0.5 ? -1 : 1;
        });
        tags_arr = tags_arr.slice(0, maxTagcloud < tags_length ? tags_length - maxTagcloud : 0);
        for(var tag_i = 0; tag_i < tags_arr.length; tag_i++){
          document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display = 'none';
        }
      </script>
    
  </div>

    
        
        
        
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ–‡ç« å½’æ¡£</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2022/">2022</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>



    
        
        
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="../%E5%82%A8%E5%AD%98%E5%87%BD%E6%95%B0%E8%A7%A6%E5%8F%91%E5%99%A8/">å‚¨å­˜å‡½æ•°è§¦å‘å™¨</a>
          </li>
        
          <li>
            <a href="../B+%E6%A0%91/">B+æ ‘</a>
          </li>
        
          <li>
            <a href="../sql%E4%B9%A0%E9%A2%981/">sqlä¹ é¢˜1</a>
          </li>
        
          <li>
            <a href="">mysql3</a>
          </li>
        
          <li>
            <a href="../mysql2/">mysql2</a>
          </li>
        
      </ul>
    </div>
  </div>

    
        
        <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-link">
		<ul>
        
            <li>
                <a href="https://xiaoshu.app/" target="_blank" >
                    <img src="https://xsm.nexmoe.com/images/Infinite/Snipaste_2022-05-18_20-46-50.png" alt="å°èˆ’åŒå­¦"></img>
                    <p>å°èˆ’åŒå­¦</p>
                </a>
            </li>
        
            <li>
                <a href="https://nexmoe.com/" target="_blank" >
                    <img src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/avatar.png" alt="æŠ˜å½±è½»æ¢¦"></img>
                    <p>æŠ˜å½±è½»æ¢¦</p>
                </a>
            </li>
        
		</ul>
    </div>
</div>
<style>
.nexmoe-widget-wrap .nexmoe-link ul li a {
    text-align : center;
}
.nexmoe-widget-wrap .nexmoe-link ul li a img {
    max-width : 100%;
}
.nexmoe-widget-wrap .nexmoe-link ul li a p {
    margin: 10px 0;
}
</style>

    
</aside>
    <div class="nexmoe-copyright">
        &copy; 2022 ape_li
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <br><a target="_blank" href="https://beian.miit.gov.cn/">é„‚ICPå¤‡2020018486å·</a> <br><a target="_blank" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"> <img src="https://i.dawnlab.me/c0268c1e6cfd0863d6ba35be1575941a.png" width="150px"></a>
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
            <div class="nexmoe-post">

  <article>
      
          <div class="nexmoe-post-cover" style="padding-bottom: 56.71874999999999%;"> 
              <img data-fancybox="gallery" src="https://i.dawnlab.me/b5a7e61560facdd5b8aa9683fce147d7.png" alt="mysql3" loading="lazy">
              <h1>mysql3</h1>
          </div>
      
      
      <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2022å¹´08æœˆ09æ—¥</a>
</div>
      

      <h1 id="DBè®¾è®¡"><a href="#DBè®¾è®¡" class="headerlink" title="DBè®¾è®¡"></a>DBè®¾è®¡</h1><blockquote>
<p>æŒ‡å¯¼dbè®¾è®¡çš„æ€æƒ³,é¿å…è¡¨ä¸­å‡ºç°å¤§é‡çš„å†—ä½™çš„æ•°æ®.ä½†æ˜¯å®é™…å¼€å‘ä¸­è¡¨ä¸­æ˜¯å…è®¸å‡ºç°å†—ä½™çš„å­—æ®µçš„.</p>
<p>å†—ä½™æ•°æ®çš„å¥½å¤„ - å®‰å…¨,æ–¹ä¾¿æŸ¥è¯¢.åå¤„-&gt;deleteå’Œupdateæ“ä½œ</p>
</blockquote>
<blockquote>
<ol>
<li><p>1NF - ç¬¬ä¸€èŒƒå¼-ä¿è¯åˆ—çš„åŸå­æ€§,ä¿è¯åˆ—ä¸å¯å†åˆ‡å‰²</p>
<p>s_emp(id,name) - å‘ç°nameä¸å…·å¤‡åŸå­æ€§,å¯ä»¥è¢«å†æ¬¡åˆ‡å‰²(fist_name,last_name)</p>
<p>s_ord(id,address) - addressæ˜¾ç¤ºä¸ºçœå¸‚åŒº - æ±Ÿè‹çœè‹å·å¸‚å›­åŒº</p>
<p>addresså†æ¬¡åˆ†æˆ(province,city,area)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä¸»è¦æ˜¯ä¸ºäº†æŸ¥è¯¢.</span><br><span class="line"></span><br><span class="line">select * from s_ord where address like '%è‹å·%';</span><br><span class="line"></span><br><span class="line">select * from s_ord where city = 'è‹å·';</span><br><span class="line"></span><br><span class="line">-- address,cityåŠ ç´¢å¼•.</span><br><span class="line">-- æ¨¡ç³ŠæŸ¥è¯¢å¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆ.ä½†æ˜¯ç²¾ç¡®åŒ¹é…æ˜¯èµ°ç´¢å¼•çš„.</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>2NF - åŸºäº1NF,è¦æ±‚éå…³é”®åˆ—è¦å…¨éƒ¨ä¾èµ–äºå…³é”®åˆ—.  ä¸å­˜åœ¨éå…³é”®åˆ—éƒ¨åˆ†ä¾èµ–äºå…³é”®åˆ—</p>
<p>å…³é”®åˆ— - ä¸»é”®åˆ— - éç©ºä¸”å”¯ä¸€ - tableä¸­çš„idè®¾ç½®æˆä¸»é”®åˆ—.</p>
<p>student(sid,sname,cid,cname);//å…³é”®åˆ—(sid,cid) - ç¡®å®šå”¯ä¸€çš„å…ƒç»„(è¡Œ) - å¤åˆä¸»é”®</p>
<p>sname,cname - éå…³é”®åˆ—.</p>
<p>(sid,cid) -&gt; å”¯ä¸€ç¡®å®š -&gt; sname/cname</p>
<p>sid -&gt; sname,cid -&gt; cname</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">student(sid,sname)</span><br><span class="line">course(cid,cname);</span><br><span class="line">sc(sid,cid,kpi);//(sid,cid) -&gt; kpi</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>3NF- åŸºäº2NF,è¦æ±‚éå…³é”®åˆ—ä¸èƒ½ä¼ é€’ä¾èµ–äºå…³é”®åˆ—.</p>
<p>student(sid,sname,uid,uv_name,u_phone);</p>
<p>u_phoneä¼ é€’ä¾èµ–äºsid - <code>åŸå› sid -&gt; uid -&gt; u_phone</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">student(sid,sname,uid);//uidå°±æ˜¯foreign key å¤–é”®åˆ—</span><br><span class="line">university(uid,u_name,u_phone);</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><blockquote>
<ol>
<li>ç”¨æˆ·è¡¨t_user</li>
<li>è§†é¢‘è¡¨t_video</li>
<li>è¯„è®ºè¡¨å’Œå›å¤è¡¨è®¾è®¡</li>
</ol>
</blockquote>
<blockquote>
<p>ç”¨æˆ·å¯¹è§†é¢‘è¿›è¡Œè¯„è®º(t_comment)å’Œå›å¤(t_repy)çš„åœºæ™¯:</p>
<p>tom å‘å¸ƒäº† æç¬‘çš„è§†é¢‘</p>
<p>admin è¯„è®º:  ğŸ˜ğŸ˜</p>
<p>â€‹             liè¯„è®ºadmin: ä½ ç¬‘ä»€ä¹ˆ!</p>
<p>â€‹			 leiå›å¤@li: ç®¡ä½ ä»€ä¹ˆäº‹æƒ…!</p>
<p>â€‹			 xå›å¤@li: ä½ æƒ³è¡¨è¾¾ä»€ä¹ˆ!</p>
<p>â€‹			 yå›å¤@x: â€¦.</p>
<p>â€‹			 k è¯„è®ºadmin:ä½ ç¬‘ä»€ä¹ˆ!</p>
<p>jack  è¯„è®º: ğŸ˜„</p>
</blockquote>
<p><code>t_user</code></p>
<table>
<thead>
<tr>
<th>id</th>
<th>usernmae</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>tom</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>admin</td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>li</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>lei</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>x</td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>y</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>k</td>
<td></td>
</tr>
</tbody></table>
<p><code>t_video</code></p>
<p>ä¸€ä¸ªç”¨æˆ·å¯ä»¥å‘å¸ƒå¤šä¸ªè§†é¢‘</p>
<table>
<thead>
<tr>
<th>id</th>
<th>video</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>ä½©æ´›è¥¿</td>
<td>1</td>
</tr>
</tbody></table>
<p><code>t_comment</code></p>
<table>
<thead>
<tr>
<th>id</th>
<th>video_id</th>
<th>content</th>
<th>comment_id</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>ğŸ˜ğŸ˜</td>
<td></td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>ä½ ç¬‘ä»€ä¹ˆ!</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>ä½ ç¬‘ä»€ä¹ˆ!</td>
<td>1</td>
<td>7</td>
</tr>
</tbody></table>
<p><code>t_reply</code></p>
<table>
<thead>
<tr>
<th>id</th>
<th>comment_id</th>
<th>conent</th>
<th>reply_id</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>2</td>
<td>ç®¡ä½ ä»€ä¹ˆäº‹æƒ…!</td>
<td></td>
<td>4</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>ä½ æƒ³è¡¨è¾¾ä»€ä¹ˆ!</td>
<td></td>
<td>5</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>â€¦</td>
<td>2</td>
<td>6</td>
</tr>
</tbody></table>
<h1 id="DDLè¯­è¨€"><a href="#DDLè¯­è¨€" class="headerlink" title="DDLè¯­è¨€"></a>DDLè¯­è¨€</h1><blockquote>
<p>Data Definition Language - æ•°æ®å®šä¹‰è¯­è¨€.</p>
<p>åŒ…æ‹¬çš„å‘½ä»¤:create drop alter comment rename truncate</p>
</blockquote>
<h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><blockquote>
<ol>
<li><p>æ•°å­—ç±»å‹</p>
<ul>
<li>æ•´æ•° - int/bigint</li>
<li>å°æ•° - float/double/decimal</li>
</ul>
<p><code>è¦ç‚¹</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">	id int(7)</span><br><span class="line">);</span><br><span class="line">æ­¤å¤„çš„7å¹¶ä¸æ˜¯ä»£è¡¨æ­¤åˆ—çš„æœ€å¤§é•¿åº¦.è¯¯åŒº:æœ€å¤§å¯ä¿å­˜çš„å€¼æ˜¯9999999</span><br><span class="line">å®é™…ä¸Šè¯¥åˆ—å¯ä»¥å­˜å‚¨çš„æœ€å¤§å€¼æ˜¯ç”±ç±»å‹å†³å®šäº†.</span><br><span class="line"></span><br><span class="line">é…ç½®zerofill  0å¡«å……</span><br><span class="line">create table t_type(</span><br><span class="line">	id int(7) zerofill</span><br><span class="line">);</span><br><span class="line">insert into t_type values(1);</span><br><span class="line"></span><br><span class="line">ä¸è¶³7ä½,ä¼šé‡‡ç”¨0æ¥å¡«å……</span><br><span class="line"></span><br><span class="line">+---------+</span><br><span class="line">| id      |</span><br><span class="line">+---------+</span><br><span class="line">| 0000001 |</span><br><span class="line">+---------+</span><br><span class="line"></span><br><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">	c1 float(5,2),</span><br><span class="line">  c2 double(5,2),</span><br><span class="line">  c3 decimal(5,2)</span><br><span class="line">);</span><br><span class="line">float(m,n) =&gt; mæ€»é•¿åº¦,nä»£è¡¨çš„å°æ•°ç‚¹</span><br><span class="line">insert into t_type(c1) values(12.345);</span><br><span class="line">mysql&gt; select * from t_type;</span><br><span class="line"></span><br><span class="line">-- å°æ•°ä¿ç•™2ä½,å¹¶ä¸”å››èˆäº”å…¥</span><br><span class="line">+-------+------+------+</span><br><span class="line">| c1    | c2   | c3   |</span><br><span class="line">+-------+------+------+</span><br><span class="line">| 12.35 | NULL | NULL |</span><br><span class="line">+-------+------+------+</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_type(c2) values(123.5); //ok</span><br><span class="line">mysql&gt; select * from t_type;</span><br><span class="line">+-------+--------+------+</span><br><span class="line">| c1    | c2     | c3   |</span><br><span class="line">+-------+--------+------+</span><br><span class="line">| 12.35 |   NULL | NULL |</span><br><span class="line">|  NULL | 123.50 | NULL |</span><br><span class="line">+-------+--------+------+</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_type(c2) values(1234.5);</span><br><span class="line"></span><br><span class="line">`åŸå› :1234.5 =&gt; 1234.50 å·²ç»è¶…è¿‡5ä½äº†`</span><br><span class="line">ERROR 1264 (22003): Out of range value for column 'c2' at row 1</span><br><span class="line"></span><br><span class="line">float/double =&gt; éæ ‡å‡†  decimalæ ‡å‡† - å¯¹ç²¾åº¦æœ‰ç‰¹åˆ«è¦æ±‚çš„</span><br><span class="line"></span><br><span class="line">insert into t_type(c3) values(123.589);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å…³äºæ—¥æœŸç±»å‹</p>
<p>date </p>
<p>datetime</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">  id int,</span><br><span class="line">	create_date date default now()</span><br><span class="line">);</span><br><span class="line">ERROR 1067 (42000): Invalid default value for 'create_date'</span><br><span class="line"></span><br><span class="line">å¦‚æœæŸä¸ªåˆ—æœŸæœ›é»˜è®¤å€¼æ˜¯now(),ä¸€å®šè¦è®¾ç½®æˆdatetime</span><br><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">  id int,</span><br><span class="line">	create_date datetime default now()</span><br><span class="line">);</span><br><span class="line">insert into t_type(id) values(1);</span><br><span class="line"></span><br><span class="line">-- æ»¡è¶³æ—¥æœŸèƒ½å¤Ÿæ”¯æŒçš„å­—ç¬¦ä¸²æ ¼å¼</span><br><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">  id int,</span><br><span class="line">	create_date date default '2012-09-08 12:12:12'</span><br><span class="line">);</span><br><span class="line">insert into t_type(id) values(1);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å­—ç¬¦ä¸²ç±»å‹</p>
<ul>
<li><p>charå’ŒvarcharåŒºåˆ«</p>
<p>char(n),varchar(n) =&gt; ä»£è¡¨çš„å­—ç¬¦çš„ä¸ªæ•°</p>
<p>åŒºåˆ«: charæ˜¯å®šé•¿,varcharæ˜¯å¯å˜é•¿.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">   s1 char(2),</span><br><span class="line">   s2 varchar(2)</span><br><span class="line">);</span><br><span class="line">insert into t_type(s1) values('ab');</span><br><span class="line"></span><br><span class="line">insert into t_type(s2) values('abc');</span><br><span class="line"></span><br><span class="line">char(2) =&gt; å®é™…å­˜å‚¨1ä¸ª'a',å®é™…æ¶ˆè€—äº†2ä¸ª</span><br><span class="line">varchar(2) =&gt; å‡è®¾'a',å®é™…ä»…ä»…æ¶ˆè€—äº†1ä¸ª,æœ€å¤§æ¶ˆè€—2ä¸ª.</span><br><span class="line">varcharæ›´åŠ èŠ‚çº¦ç©ºé—´.  charæ•ˆç‡ä¼šæ›´é«˜ä¸€ç‚¹ - ä¸æ¨èç”¨char</span><br><span class="line"></span><br><span class="line">-- oracleä¸­æ•°æ®ä¸­</span><br><span class="line">drop table t_type;</span><br><span class="line">create table t_type(</span><br><span class="line">   s1 char(2)</span><br><span class="line">);</span><br><span class="line">insert into t_type(s1) values('a');</span><br><span class="line"></span><br><span class="line">-- oracleæŸ¥è¯¢ä¸ºempty</span><br><span class="line">-- mysqlä¸­ç©ºç›´æ¥æ¯”è¾ƒçš„æ—¶å€™å‰”é™¤,å¤§å°å†™æ¯”è¾ƒéƒ½æ˜¯ä¸€æ ·çš„.</span><br><span class="line">select * from t_type where s1='a';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>text - 0-65 535 bytes - é•¿æ–‡æœ¬</p>
</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="çº¦æŸç±»å‹"><a href="#çº¦æŸç±»å‹" class="headerlink" title="çº¦æŸç±»å‹"></a>çº¦æŸç±»å‹</h2><blockquote>
<ol>
<li><p>ä¸»é”®çº¦æŸ primary key éç©ºä¸”å”¯ä¸€</p>
<p>ä¸»é”®åˆ—å¯ä»¥æ˜¯ç”±å¤šåˆ—å…±åŒç»„æˆ - ç¬¦åˆä¸»é”®åˆ—</p>
<p>ä½†æ˜¯è¡¨ä¸­åªèƒ½å‡ºç°ä¸€ä¸ªä¸»é”®</p>
</li>
<li><p>å¤–é”®çº¦æŸ foreign key </p>
<ul>
<li><p>å¤–é”®åˆ—å…è®¸ä¸ºnull</p>
</li>
<li><p>å¤–é”®åˆ—æ˜¯å¤šå‡ºç°åœ¨å¤šçš„ä¸€æ–¹ä¸­.å»ºç«‹è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»çš„</p>
</li>
<li><p>å¼€å‘ä¸­ä¸éœ€è¦è®¾ç½®å¤–é”® - é€ æˆè¡¨ä¸è¡¨ä¹‹é—´çš„è€¦åˆ. </p>
<p>è¡¨å’Œè¡¨ä¹‹é—´çš„å…³ç³»æ˜¯åœ¨â€å¿ƒä¸­â€!</p>
</li>
</ul>
</li>
<li><p>éç©ºçº¦æŸ - not null</p>
</li>
<li><p>å”¯ä¸€çº¦æŸ - unique</p>
</li>
<li><p>default - é»˜è®¤å€¼</p>
</li>
<li><p>mysqlä¸­ä¸æ”¯æŒè‡ªæ£€çº¦æŸ,oracleä¸­æ”¯æŒçš„checkæ£€æŸ¥çº¦æŸ.ä½†æ˜¯mysqlä¸­å¯ä»¥ä½¿ç”¨è§¦å‘å™¨æ¥å®ç°.</p>
</li>
</ol>
</blockquote>
<h1 id="åˆ›å»ºè¡¨è¯­æ³•"><a href="#åˆ›å»ºè¡¨è¯­æ³•" class="headerlink" title="åˆ›å»ºè¡¨è¯­æ³•"></a>åˆ›å»ºè¡¨è¯­æ³•</h1><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">DROP table è¡¨å;</span><br><span class="line">-- çº¦æŸåˆ—çº§æ·»åŠ </span><br><span class="line">CREATE TABLE è¡¨å(</span><br><span class="line">	åˆ—å æ•°æ®ç±»å‹(n) çº¦æŸç±»å‹ COMMNET 'æ³¨é‡Š',</span><br><span class="line">  åˆ—å æ•°æ®ç±»å‹(n) çº¦æŸç±»å‹ COMMNET 'æ³¨é‡Š'</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">engine æŒ‡å®šå­˜å‚¨å¼•æ“,é»˜è®¤çš„å°±æ˜¯innodb(å¤–é”®çº¦æŸ,äº‹åŠ¡,è¡Œé”,è¡¨é”)</span><br><span class="line">ä¹‹å‰çš„ç‰ˆæœ¬åº”è¯¥æ˜¯myisam(ä»…ä»…æ”¯æŒè¡¨é”)</span><br><span class="line"></span><br><span class="line">-- çº¦æŸè¡¨çº§</span><br><span class="line">-- çº¦æŸå‘½åè§„èŒƒ:è¡¨å_åˆ—å_çº¦æŸç±»å‹ç¼©å†™</span><br><span class="line">CREATE TABLE è¡¨å(</span><br><span class="line">	åˆ—å æ•°æ®ç±»å‹(n) COMMNET 'æ³¨é‡Š',</span><br><span class="line">  åˆ—å æ•°æ®ç±»å‹(n) COMMNET 'æ³¨é‡Š',</span><br><span class="line">  [CONSTRAINT çº¦æŸåç§°] çº¦æŸç±»å‹(åˆ—å),</span><br><span class="line">  [CONSTRAINT çº¦æŸåç§°] çº¦æŸç±»å‹(åˆ—å)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="åˆ—çº§æ·»åŠ æ–¹å¼"><a href="#åˆ—çº§æ·»åŠ æ–¹å¼" class="headerlink" title="åˆ—çº§æ·»åŠ æ–¹å¼"></a>åˆ—çº§æ·»åŠ æ–¹å¼</h2><blockquote>
<p>ç›´æ¥åœ¨åˆ—çš„åé¢çš„å¢åŠ å…³äºè¯¥åˆ—çš„çº¦æŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">username varchar(20) unique not null,</span><br><span class="line">	birthday date default '1991-09-08'</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into t_user(id) values(1);</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="è¡¨çº§æ·»åŠ æ–¹å¼"><a href="#è¡¨çº§æ·»åŠ æ–¹å¼" class="headerlink" title="è¡¨çº§æ·»åŠ æ–¹å¼"></a>è¡¨çº§æ·»åŠ æ–¹å¼</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">-- not nullä»…ä»…æ”¯æŒåˆ—çº§æ·»åŠ </span><br><span class="line">drop table t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int(7),</span><br><span class="line">  username varchar(20) not null,</span><br><span class="line"> 	birthday date,</span><br><span class="line">  constraint t_user_id_pk primary key(id),</span><br><span class="line">  constraint t_user_username_uq unique(username)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- çº¦æŸå - æé«˜é”™çš„å¯è¯»æ€§</span><br><span class="line">insert into t_user(id) values(1);</span><br><span class="line"></span><br><span class="line">-- æ•°æ®å­—å…¸ - æè¿°è¡¨çš„è¡¨</span><br><span class="line">-- æ•°æ®å­—å…¸å°±æ˜¯ç”¨æ¥å­˜æ”¾ç”¨æˆ·ä¿¡æ¯/ç”¨æˆ·åˆ›å»ºçš„è¿™è¡¨çš„ä¿¡æ¯.</span><br><span class="line">show tables;</span><br><span class="line">desc è¡¨å;</span><br><span class="line"></span><br><span class="line">-- ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ•°æ®åº“mysql</span><br><span class="line">use information_schema</span><br><span class="line"></span><br><span class="line">-- TABLE_CONSTRAINTS è¡¨å - æ•°æ®å­—å…¸ - ä¸“é—¨å­˜å‚¨æ¯ä¸ªç”¨æˆ·çš„è¡¨çš„çº¦æŸä¿¡æ¯</span><br><span class="line">desc table_constraints</span><br><span class="line">+--------------------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field              | Type         | Null | Key | Default | Extra |</span><br><span class="line">+--------------------+--------------+------+-----+---------+-------+</span><br><span class="line">| CONSTRAINT_CATALOG | varchar(512) | NO   |     |         |       |</span><br><span class="line">| CONSTRAINT_SCHEMA  | varchar(64)  | NO   |     |         |       |</span><br><span class="line">| CONSTRAINT_NAME    | varchar(64)  | NO   |     |         |       |</span><br><span class="line">| TABLE_SCHEMA       | varchar(64)  | NO   |     |         |       |</span><br><span class="line">| TABLE_NAME         | varchar(64)  | NO   |     |         |       |</span><br><span class="line">| CONSTRAINT_TYPE    | varchar(64)  | NO   |     |         |       |</span><br><span class="line">+--------------------+--------------+------+-----+---------+-------+</span><br><span class="line">CONSTRAINT_NAME - çº¦æŸåç§°</span><br><span class="line">TABLE_NAME - è¡¨å</span><br><span class="line">CONSTRAINT_TYPE - çº¦æŸç±»å‹</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å‡ºT_USERè¡¨ä¸­çš„çº¦æŸä¿¡æ¯</span><br><span class="line">select constraint_name,constraint_type,table_name from table_constraints</span><br><span class="line">where table_name='T_USER' and table_schema='dy';</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢t_userè¡¨ä¸­çš„æ‰€æœ‰çš„åˆ—çš„åç§°ä»¥åŠåˆ—çš„æ•°æ®ç±»å‹</span><br><span class="line">select column_name,column_type,data_type,column_key from columns where table_schema='dy' and table_name='t_user';</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å»ºè¡¨çš„å…¶ä»–è¯­æ³•"><a href="#å»ºè¡¨çš„å…¶ä»–è¯­æ³•" class="headerlink" title="å»ºè¡¨çš„å…¶ä»–è¯­æ³•"></a>å»ºè¡¨çš„å…¶ä»–è¯­æ³•</h2><blockquote>
<ol>
<li><p>åˆ©ç”¨ä¸€å¼ å·²ç»å­˜åœ¨çš„è¡¨æ¥æ„å»ºå¦å¤–ä¸€å¼ è¡¨</p>
<ul>
<li><p>ä¿ç•™åŸæ¥è¡¨ä¸­çš„æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int(7),</span><br><span class="line">  username varchar(20) not null,</span><br><span class="line"> 	birthday date,</span><br><span class="line">  constraint t_user_id_pk primary key(id),</span><br><span class="line">  constraint t_user_username_uq unique(username)</span><br><span class="line">);</span><br><span class="line">insert into t_user values(1,'tom','2021-09-08');</span><br><span class="line">insert into t_user values(2,'jack','2022-09-08');</span><br><span class="line"></span><br><span class="line">-- å…‹éš†</span><br><span class="line">CREATE TABLE è¡¨å AS SELECTæŸ¥è¯¢è¯­å¥;</span><br><span class="line"></span><br><span class="line">create table t_user_copy as select * from t_user;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ä¿ç•™åŸè¡¨çš„ç»“æ„,ä½†æ˜¯ä¸ä¿ç•™æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user_copy;</span><br><span class="line">     </span><br><span class="line">create table t_user_copy as select * from t_user where 1=2;</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><p>æŸ¥çœ‹å»ºè¡¨è¯­å¥-DDL</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table è¡¨å;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å¦‚æœæ˜¯ä¸€ä¸ª1:n</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">drop table t_ord;</span><br><span class="line">drop table t_customer;</span><br><span class="line">create table t_customer(</span><br><span class="line">	id int(7),</span><br><span class="line">  cname varchar(20) not null,</span><br><span class="line">  constraint t_customer_id_pk primary key(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table t_ord(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  ord_no varchar(20) not null unique,</span><br><span class="line">  total double(7,2),</span><br><span class="line">  customer_id int(7),</span><br><span class="line">  constraint t_ord_customer_id_fk foreign key(customer_id) references t_customer(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- ä¸€å®šæ˜¯çˆ¶çº§è¡¨t_customer</span><br><span class="line">-- åˆ è¡¨ - å…ˆåˆ é™¤å­è¡¨,å¤šçš„ä¸€æ–¹,å¤–é”®æ‰€åœ¨çš„é‚£å¼ è¡¨.</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>n:n</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">drop table t_sc;</span><br><span class="line">drop table t_student;</span><br><span class="line">drop table t_course;</span><br><span class="line">   </span><br><span class="line">create table t_student(</span><br><span class="line">	id int primary key</span><br><span class="line">);</span><br><span class="line">create table t_course(</span><br><span class="line">	id int primary key</span><br><span class="line">);</span><br><span class="line">create table t_sc(</span><br><span class="line">	sid int,</span><br><span class="line">  cid int,</span><br><span class="line">  primary key(sid,cid),</span><br><span class="line">  foreign key(sid) references t_student(id),</span><br><span class="line">  foreign key(cid) references t_course(id)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="è‡ªå­¦çš„çŸ¥è¯†ç‚¹"><a href="#è‡ªå­¦çš„çŸ¥è¯†ç‚¹" class="headerlink" title="è‡ªå­¦çš„çŸ¥è¯†ç‚¹"></a>è‡ªå­¦çš„çŸ¥è¯†ç‚¹</h2><blockquote>
<p>å››ç§åˆ†åŒºæ–¹å¼ - æµ‹è¯•</p>
</blockquote>
<h1 id="DMLæ“ä½œ"><a href="#DMLæ“ä½œ" class="headerlink" title="DMLæ“ä½œ"></a>DMLæ“ä½œ</h1><h2 id="insertè¯­å¥"><a href="#insertè¯­å¥" class="headerlink" title="insertè¯­å¥"></a>insertè¯­å¥</h2><blockquote>
<ul>
<li><p>ç»™è¡¨ä¸­æ‰€æœ‰çš„åˆ—éƒ½æ’å…¥æ•°æ®,ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯é¡ºåº/ç±»å‹/çº¦æŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into è¡¨å values(åˆ—1,åˆ—2,åˆ—3);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»™æŒ‡å®šçš„åˆ—æ’å…¥æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into è¡¨å(åˆ—å1,åˆ—å2) values(åˆ—1,åˆ—2);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¹é‡æ’å…¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into è¡¨å values(åˆ—1,åˆ—2,åˆ—3),(åˆ—1,åˆ—2,åˆ—3),(åˆ—1,åˆ—2,åˆ—3);</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</blockquote>
<h2 id="deleteè¯­å¥"><a href="#deleteè¯­å¥" class="headerlink" title="deleteè¯­å¥"></a>deleteè¯­å¥</h2><blockquote>
<ul>
<li><p>delete from è¡¨å;//åˆ é™¤è¡¨ä¸­çš„æ•°æ®</p>
</li>
<li><p>delete from è¡¨å where æ¡ä»¶;</p>
</li>
<li><p>å¤–é”®çº¦æŸä¼šå¯¹deleteäº§ç”Ÿå½±å“,ä¸€å®šæ˜¯å…ˆåˆ é™¤å­è®°å½•,ç„¶åæ‰èƒ½å¤Ÿåˆ é™¤çˆ¶è®°å½•.</p>
<p>å…ˆåˆ é™¤å¤šçš„ä¸€æ–¹,ç„¶åæ‰èƒ½å¤Ÿåˆ é™¤ä¸€çš„ä¸€æ–¹.</p>
</li>
<li><p>çº§è”åˆ é™¤ - åˆ é™¤çš„ä¸€æ–¹ä¹‹å‰å…ˆå°†è¿™ä¸ªä¸€æ–¹çš„å­è®°å½•å…¨éƒ¨åˆ é™¤</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">drop table t_ord;</span><br><span class="line">drop table t_customer;</span><br><span class="line">create table t_customer(</span><br><span class="line">	id int(7),</span><br><span class="line">  cname varchar(20) not null,</span><br><span class="line">  constraint t_customer_id_pk primary key(id)</span><br><span class="line">);</span><br><span class="line">insert into t_customer values(1,'admin');</span><br><span class="line">insert into t_customer values(2,'tom');</span><br><span class="line"></span><br><span class="line">create table t_ord(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  ord_no varchar(20) not null unique,</span><br><span class="line">  total double(7,2),</span><br><span class="line">  customer_id int(7),</span><br><span class="line">  constraint t_ord_customer_id_fk foreign key(customer_id) references t_customer(id) on delete cascade</span><br><span class="line">);</span><br><span class="line">insert into t_ord values(1,'1001',300,1);</span><br><span class="line">insert into t_ord values(2,'1002',300,null);</span><br></pre></td></tr></tbody></table></figure>


<p>delete from t_customer where id=1;</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</blockquote>
<h2 id="updateè¯­å¥"><a href="#updateè¯­å¥" class="headerlink" title="updateè¯­å¥"></a>updateè¯­å¥</h2><blockquote>
<ul>
<li>update è¡¨ set åˆ—å=åˆ—å€¼,åˆ—å2=åˆ—å€¼;//æ›´æ–°è¡¨ä¸­æ‰€æœ‰è¡Œ</li>
<li>update è¡¨ set åˆ—å=åˆ—å€¼,åˆ—å2=åˆ—å€¼ WHEREæ¡ä»¶;//</li>
</ul>
</blockquote>
<h2 id="truncateå’Œdeleteå’Œdrop"><a href="#truncateå’Œdeleteå’Œdrop" class="headerlink" title="truncateå’Œdeleteå’Œdrop"></a>truncateå’Œdeleteå’Œdrop</h2><p><code>å…±åŒç‚¹</code></p>
<blockquote>
<p>1.truncateå’Œä¸å¸¦whereå­å¥çš„deleteã€ä»¥åŠdropéƒ½ä¼šåˆ é™¤è¡¨å†…çš„æ•°æ®ã€‚</p>
<p>2.dropã€truncateéƒ½æ˜¯DDLè¯­å¥(æ•°æ®å®šä¹‰è¯­è¨€),æ‰§è¡Œåä¼šè‡ªåŠ¨æäº¤ã€‚</p>
</blockquote>
<p><code>ä¸åŒç‚¹</code></p>
<blockquote>
<p> delete è¯­å¥æ˜¯æ•°æ®åº“æ“ä½œè¯­è¨€(dml)ï¼Œè¿™ä¸ªæ“ä½œä¼šæ”¾åˆ° rollback segement ä¸­ï¼Œäº‹åŠ¡æäº¤ä¹‹åæ‰ç”Ÿæ•ˆï¼›å¦‚æœæœ‰ç›¸åº”çš„ triggerï¼Œæ‰§è¡Œçš„æ—¶å€™å°†è¢«è§¦å‘ã€‚</p>
<p> <strong>truncate</strong>ã€drop æ˜¯æ•°æ®åº“å®šä¹‰è¯­è¨€(ddl)ï¼Œæ“ä½œç«‹å³ç”Ÿæ•ˆï¼ŒåŸæ•°æ®ä¸æ”¾åˆ° rollback segment ä¸­ï¼Œ<strong>ä¸èƒ½å›æ»š</strong>ï¼Œæ“ä½œä¸è§¦å‘ trigger</p>
</blockquote>
<blockquote>
<p>é€Ÿåº¦ï¼Œä¸€èˆ¬æ¥è¯´: drop&gt; truncate &gt; delete</p>
</blockquote>
<h1 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h1><blockquote>
<ul>
<li>limit m  // å‰mè¡Œ</li>
<li>limit m,n //   mä»ä¸‹æ ‡0å¼€å§‹(ç¬¬ä¸€è¡Œ),næ˜¾ç¤ºè¡Œæ•°</li>
</ul>
</blockquote>
<h2 id="åˆ†é¡µçš„å…¬å¼"><a href="#åˆ†é¡µçš„å…¬å¼" class="headerlink" title="åˆ†é¡µçš„å…¬å¼"></a>åˆ†é¡µçš„å…¬å¼</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Page&lt;Book&gt; <span class="title function_">page</span><span class="params">(Integer pageNum,Integer pageSize)</span>{</span><br><span class="line">    <span class="comment">// limit (pageNum-1)*pageSize,pageSize</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">//1,3    0</span></span><br><span class="line">    <span class="comment">//2,2    3</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜"><a href="#åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜" class="headerlink" title="åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜"></a>åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜</h2><blockquote>
<p>limit m,n å…¶ä¸­çš„må«åšåç§»é‡. åç§»é‡è¶Šå¤§,åˆ†é¡µçš„æ€§èƒ½è¶Šä½.</p>
<p>æ¯”å¦‚è¡¨1-100000,æ­£å¥½id=1,10000</p>
<p>select * from è¡¨ where id&gt;æ¡ä»¶ limit 2;</p>
<p>æ¡ä»¶æŸ¥è¯¢(å‡å°‘åç§»é‡) + limit</p>
</blockquote>
<h1 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h1><blockquote>
<p>ç”¨æ¥æ‰§è¡Œä¸€ç»„SQL,æ˜¯dbä¸­å®Œæˆ<strong>ä¸šåŠ¡çš„åŸºæœ¬å•ä½.</strong></p>
</blockquote>
<h2 id="äº‹åŠ¡ACIDç‰¹æ€§"><a href="#äº‹åŠ¡ACIDç‰¹æ€§" class="headerlink" title="äº‹åŠ¡ACIDç‰¹æ€§"></a>äº‹åŠ¡ACIDç‰¹æ€§</h2><blockquote>
<ol>
<li><p>åŸå­æ€§ï¼ˆAtomicity) - äº‹åŠ¡ä¸å¯å†åˆ†å‰².</p>
<p>äº‹åŠ¡è¦ä¹ˆåŒæ—¶æˆåŠŸ,åŒæ—¶å¤±è´¥ - æ¯”å¦‚è½¬è´¦ä¸šåŠ¡.</p>
</li>
<li><p>ä¸€è‡´æ€§(Consistency) - äº‹åŠ¡ä¸€æ—¦æäº¤.å†…å­˜ä¸­çš„æ•°æ®è¦å’Œç£ç›˜ä¸Šçš„æ•°æ®è¦ä¸€è‡´,ä¿è¯æ•°æ®çš„å®Œæ•´æ€§.</p>
<p>æ¯”å¦‚tom-500,jack-500.æ— è®ºè½¬å¤šå°‘,è½¬å¤šå°‘æ¬¡.åæ­£æ€»çš„é’±æ˜¯1000</p>
</li>
<li><p>éš”ç¦»æ€§(isolation): äº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´çš„å½¼æ­¤éš”ç¦»çš„,äº’ä¸å¹²æ‰°çš„.ä¸€ä¸ªäº‹åŠ¡çš„ç»“æŸ,æ„å‘³ç€ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„å¼€å§‹.</p>
</li>
<li><p>æŒä¹…æ€§(Durability) - äº‹åŠ¡ä¸€æ—¦æäº¤,æ•°æ®åº”è¯¥æ°¸ä¹…ä¿å­˜åœ¨ç£ç›˜ä¸­.å³ä½¿å‘ç”Ÿä¸€äº›æ•…éšœ,åº”è¯¥å¯ä»¥ç”¨ä¸€äº›æ¢å¤çš„æŠ€æœ¯è¿›è¡Œæ¢å¤.</p>
</li>
</ol>
</blockquote>
<h2 id="äº‹åŠ¡çš„åˆ†ç±»"><a href="#äº‹åŠ¡çš„åˆ†ç±»" class="headerlink" title="äº‹åŠ¡çš„åˆ†ç±»"></a>äº‹åŠ¡çš„åˆ†ç±»</h2><blockquote>
<ol>
<li>æœ¬åœ°äº‹åŠ¡ - ä¸€ä¸ªé¡¹ç›®(å•ä½“æ¶æ„)è¿æ¥ä¸€ä¸ªæ•°æ®åº“</li>
<li>åˆ†å¸ƒå¼äº‹åŠ¡ <ul>
<li>æ¶ˆæ¯ä¸­é—´ä»¶ - rabbitmq,rocketmq</li>
<li>é˜¿é‡Œçš„æ¡†æ¶seata</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h2><blockquote>
<ol>
<li><p>â‘  Serializable (ä¸²è¡ŒåŒ–)ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„å‘ç”Ÿã€‚</p>
<p>é”è¡¨.</p>
</li>
<li><p>â‘¡ Repeatable read (å¯é‡å¤è¯»)ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»çš„å‘ç”Ÿã€‚</p>
</li>
<li><p>â‘¢ Read committed (è¯»å·²æäº¤)ï¼šå¯é¿å…è„è¯»çš„å‘ç”Ÿã€‚</p>
<p>ä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®.</p>
</li>
<li><p>â‘£ Read uncommitted (è¯»æœªæäº¤)ï¼šæœ€ä½çº§åˆ«ï¼Œä»»ä½•æƒ…å†µéƒ½æ— æ³•ä¿è¯ã€‚äº§ç”Ÿè„è¯».</p>
<p>ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»å–åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡å°šæœªæäº¤çš„æ•°æ®</p>
</li>
</ol>
</blockquote>
<h2 id="æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«"><a href="#æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«" class="headerlink" title="æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«"></a>æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«</h2><p><code>mysqlé»˜è®¤çš„æ˜¯å¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">select @@tx_isolation;</span><br><span class="line"></span><br><span class="line">+-----------------+</span><br><span class="line">| @@tx_isolation  |</span><br><span class="line">+-----------------+</span><br><span class="line">| REPEATABLE-READ |</span><br><span class="line">+-----------------+</span><br><span class="line"></span><br><span class="line">ä¸´æ—¶è®¾ç½®ä¸€ä¸‹å½“å‰ä¼šè¯çš„äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</span><br><span class="line">set session transaction isolation level read uncommitted;</span><br></pre></td></tr></tbody></table></figure>

<h1 id="äº‹åŠ¡TCLå‘½ä»¤"><a href="#äº‹åŠ¡TCLå‘½ä»¤" class="headerlink" title="äº‹åŠ¡TCLå‘½ä»¤"></a>äº‹åŠ¡TCLå‘½ä»¤</h1><blockquote>
<p>begin(å¼€å¯ä¸€ä¸ªäº‹åŠ¡),commit(æäº¤ä¸€ä¸ªäº‹åŠ¡),savepoint äº‹åŠ¡ç‚¹</p>
<p>set autocommit=0;//æ‰‹åŠ¨å¼€å¯ä¸€ä¸ªäº‹åŠ¡</p>
<p>DMLæ“ä½œé»˜è®¤éƒ½æ˜¯ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡.</p>
</blockquote>
<h2 id="è¡¥å……ä¸€ç‚¹"><a href="#è¡¥å……ä¸€ç‚¹" class="headerlink" title="è¡¥å……ä¸€ç‚¹"></a>è¡¥å……ä¸€ç‚¹</h2><blockquote>
<ol>
<li><p>rollback - å›æ»šäº‹åŠ¡ - ç»“æŸä¸€ä¸ªäº‹åŠ¡</p>
<p>ä¸èƒ½å›æ»šå·²ç»commitä¹‹åçš„äº‹åŠ¡.</p>
</li>
<li><p>savepoint äº‹åŠ¡ç‚¹</p>
<p>rollback to äº‹åŠ¡ç‚¹</p>
<p>å¦‚æœä¹ˆæœ‰è®¾ç½®äº‹åŠ¡ç‚¹ - å›æ»šå½“å‰äº‹åŠ¡ä¸­æ‰€æœ‰çš„æ“ä½œ.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; begin;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_acc set balance=balance+1000 where id=1;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; savepoint t1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_acc set balance=balance+1000 where id=2;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; rollback to t1;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h1 id="å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜"><a href="#å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜" class="headerlink" title="å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜"></a>å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜</h1><blockquote>
<p>å¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œæ“ä½œçš„æ—¶å€™,ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">drop table t_acc;</span><br><span class="line">create table t_acc(</span><br><span class="line">	id int,</span><br><span class="line">balance double(7,2)</span><br><span class="line">);</span><br><span class="line">insert into t_acc values(1,10000),(2,10000);</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="è„è¯»"><a href="#è„è¯»" class="headerlink" title="è„è¯»"></a>è„è¯»</h2><blockquote>
<p>ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ²¡æœ‰æäº¤çš„æ•°æ® - ç»å¯¹ä¸å…è®¸çš„.</p>
<p><img src="C:/Users/liming/Desktop/zang.png">  </p>
</blockquote>
<h2 id="ä¸å¯é‡å¤è¯»"><a href="#ä¸å¯é‡å¤è¯»" class="headerlink" title="ä¸å¯é‡å¤è¯»"></a>ä¸å¯é‡å¤è¯»</h2><blockquote>
<p>set session transaction isolation level read committed;</p>
<p>ä¸€ä¸ªäº‹åŠ¡Aåœ¨è¯»å–ä¸€æ¬¡ä¹‹å,å¦å¤–ä¸€ä¸ªäº‹åŠ¡Båœ¨è¿›è¡Œupdateæ“ä½œ.å¹¶ä¸”commit.</p>
<p>Aäº‹åŠ¡åœ¨æ²¡æœ‰è‡ªå·±æ²¡æœ‰æäº¤ä¹‹å‰,è¯»å–åˆ°äº†Bäº‹åŠ¡æäº¤ä¹‹åçš„æ•°æ®.å¯¼è‡´Aäº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åˆ°çš„ç»“æœä¸ä¸€æ ·.</p>
<p><img src="C:/Users/liming/Desktop/no.png"> </p>
</blockquote>
<h2 id="å¹»è¯»"><a href="#å¹»è¯»" class="headerlink" title="å¹»è¯»"></a>å¹»è¯»</h2><blockquote>
<p>å®ƒå’Œä¸å¯é‡å¤è¯»ç±»ä¼¼.ä¾§é‡ç‚¹ä¸åŒ.ä¸å¯é‡å¤è¯»å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨æŸ¥è¯¢.å¦å¤–ä¸€ä¸ªäº‹åŠ¡åœ¨ä¿®æ”¹(update)</p>
<p>å¹»è¯»å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨ä¿®æ”¹.å¦å¤–ä¸€ä¸ªäº‹åŠ¡åœ¨æ’å…¥(insert).</p>
<p>set session transaction isolation level read committed;</p>
<p><img src="C:/Users/liming/Desktop/huan.png"> </p>
</blockquote>
<blockquote>
<p>äº‹åŠ¡Aåœ¨ä¿®æ”¹,äº‹åŠ¡B-insertå¹¶ä¸”æäº¤äº†.äº‹åŠ¡Aåœ¨æœ¬äº‹åŠ¡ä¸­å†æ¬¡æŸ¥è¯¢,å‘ç°äº†å¥½åƒæœ‰â€æ›´æ–°å¤±è´¥â€çš„æ•°æ®.å°±åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·.</p>
</blockquote>
<h2 id="å¯é‡å¤è¯»"><a href="#å¯é‡å¤è¯»" class="headerlink" title="å¯é‡å¤è¯»"></a>å¯é‡å¤è¯»</h2><blockquote>
<p>é»˜è®¤çš„éš”ç¦»çº§åˆ«</p>
<p>set session transaction isolation level repeatable read;</p>
</blockquote>
<blockquote>
<p>äº‹åŠ¡Aè¯»å–ä¸€æ¬¡,äº‹åŠ¡Bæ‰§è¡Œupdateæ“ä½œ.äº‹åŠ¡Aåœ¨æ²¡æœ‰ç»“æŸå½“å‰äº‹åŠ¡ä¹‹å‰,å¤šæ¬¡è¯»å–åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„.</p>
<p>å¿…é¡»è¦commitä¹‹å,æ‰èƒ½å¤Ÿè¯»å–åˆ°Bäº‹åŠ¡æäº¤ä¹‹åçš„ä¿®æ”¹æ•°æ®.</p>
<p><img src="C:/Users/liming/Desktop/repeat.png"> </p>
</blockquote>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table>
<thead>
<tr>
<th></th>
<th>è„è¯»</th>
<th>ä¸å¯é‡å¤è¯»</th>
<th>å¹»è¯»</th>
</tr>
</thead>
<tbody><tr>
<td>è¯»æœªæäº¤</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
<tr>
<td>è¯»å·²æäº¤</td>
<td>Ã—</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
<tr>
<td>å¯é‡å¤è¯»</td>
<td>Ã—</td>
<td>Ã—</td>
<td>âˆš</td>
</tr>
<tr>
<td>ä¸²è¡ŒåŒ–</td>
<td>Ã—</td>
<td>Ã—</td>
<td>Ã—</td>
</tr>
</tbody></table>

      <p><img data-fancybox="gallery" src="https://i.dawnlab.me/53a8c7cf3ad77a0f0a456ce2c6afe88a.png"  alt="53a8c7cf3ad77a0f0a456ce2c6afe88a.png" data-caption="53a8c7cf3ad77a0f0a456ce2c6afe88a.png" loading="lazy"></p>
  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>ape_li<br>
        <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://apelisun.github.io/2022/08/09/mysql3/" title="https:&#x2F;&#x2F;apelisun.github.io&#x2F;2022&#x2F;08&#x2F;09&#x2F;mysql3&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;apelisun.github.io&#x2F;2022&#x2F;08&#x2F;09&#x2F;mysql3&#x2F;</a><br>
        
            <strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬æ–‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> åè®®è¿›è¡Œè®¸å¯
        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
    
        <a class="nexmoefont icon-tag-fill -none-link" href="../../../../tags/meet-DB/" rel="tag">meet DB</a> <a class="nexmoefont icon-tag-fill -none-link" href="../../../../tags/mysql/" rel="tag">mysql</a>
    
</div>

  
      <div class="nexmoe-post-footer">
          è¯·åœ¨ä½ çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®è¯„è®ºæ¡†æ’æ§½
      </div>
  
</div>
            <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#DB%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.</span> <span class="toc-text">DBè®¾è®¡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">1.1.</span> <span class="toc-text">ç»ƒä¹ </span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DDL%E8%AF%AD%E8%A8%80"><span class="toc-number">2.</span> <span class="toc-text">DDLè¯­è¨€</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text">æ•°æ®ç±»å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.</span> <span class="toc-text">çº¦æŸç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E8%AF%AD%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">åˆ›å»ºè¡¨è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E7%BA%A7%E6%B7%BB%E5%8A%A0%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">åˆ—çº§æ·»åŠ æ–¹å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E7%BA%A7%E6%B7%BB%E5%8A%A0%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">è¡¨çº§æ·»åŠ æ–¹å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8%E7%9A%84%E5%85%B6%E4%BB%96%E8%AF%AD%E6%B3%95"><span class="toc-number">3.3.</span> <span class="toc-text">å»ºè¡¨çš„å…¶ä»–è¯­æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AD%A6%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">3.4.</span> <span class="toc-text">è‡ªå­¦çš„çŸ¥è¯†ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DML%E6%93%8D%E4%BD%9C"><span class="toc-number">4.</span> <span class="toc-text">DMLæ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#insert%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.1.</span> <span class="toc-text">insertè¯­å¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#delete%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.2.</span> <span class="toc-text">deleteè¯­å¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#update%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.3.</span> <span class="toc-text">updateè¯­å¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#truncate%E5%92%8Cdelete%E5%92%8Cdrop"><span class="toc-number">4.4.</span> <span class="toc-text">truncateå’Œdeleteå’Œdrop</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-number">5.</span> <span class="toc-text">åˆ†é¡µ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E7%9A%84%E5%85%AC%E5%BC%8F"><span class="toc-number">5.1.</span> <span class="toc-text">åˆ†é¡µçš„å…¬å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98"><span class="toc-number">5.2.</span> <span class="toc-text">åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">6.</span> <span class="toc-text">äº‹åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1ACID%E7%89%B9%E6%80%A7"><span class="toc-number">6.1.</span> <span class="toc-text">äº‹åŠ¡ACIDç‰¹æ€§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">6.2.</span> <span class="toc-text">äº‹åŠ¡çš„åˆ†ç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">6.3.</span> <span class="toc-text">äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">6.4.</span> <span class="toc-text">æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1TCL%E5%91%BD%E4%BB%A4"><span class="toc-number">7.</span> <span class="toc-text">äº‹åŠ¡TCLå‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E4%B8%80%E7%82%B9"><span class="toc-number">7.1.</span> <span class="toc-text">è¡¥å……ä¸€ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E4%BA%8B%E5%8A%A1%E5%B9%B6%E5%8F%91%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">8.</span> <span class="toc-text">å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%84%8F%E8%AF%BB"><span class="toc-number">8.1.</span> <span class="toc-text">è„è¯»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="toc-number">8.2.</span> <span class="toc-text">ä¸å¯é‡å¤è¯»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BB%E8%AF%BB"><span class="toc-number">8.3.</span> <span class="toc-text">å¹»è¯»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="toc-number">8.4.</span> <span class="toc-text">å¯é‡å¤è¯»</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">9.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
        </div>
    </div>
    <div id="nexmoe-search-space">
	<div class="search-container">
		<div class="search-header">
			<div class="search-input-container">
				<input
					class="search-input"
					type="text"
					placeholder="æœç´¢"
					oninput="sinput();"
				/>
			</div>
			<a class="search-close" onclick="sclose();">Ã—</a>
		</div>
		<div class="search-body"></div>
	</div>
</div>

    
<script src="lib/mdui_043tiny/mdui.js"></script>
<script src="lib/jquery.min.js"></script>
<script src="lib/justifiedGallery/jquery.justifiedGallery.min.js"></script>
<script src="lib/fancybox/fancybox.umd.js"></script>


 

<script async src="../../../../js/app.js?v=1660125027021"></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2058306854838448" crossorigin="anonymous"></script>

<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
