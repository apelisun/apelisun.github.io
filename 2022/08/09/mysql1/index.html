<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>mysql1 | ape_li</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="æ•°æ®åº“ä»‹ç» æŒ‰ç…§ä¸€å®šçš„æ•°æ®ç»“æ„æ¥ç»„ç»‡,ç®¡ç†å’Œå­˜å‚¨æ•°æ®çš„ä»“åº“ ç”¨ä»“åº“çš„æ–¹å¼æ¥ç®¡ç†æ•°æ®çš„.ä¸€ä¸ªä»“åº“ä¸‹ä¼šæœ‰å¾ˆå¤šè¡¨.ä¸€ä¸ªè¡¨ç”±è¡Œå’Œåˆ—æ„æˆ.  æ•°æ®çš„åˆ†ç±»  å…³ç³»å‹æ•°æ®åº“  è¡¨æ ¼å‹æ•°æ®åº“ - æœ‰è¡Œå’Œåˆ—æ¥æ„æˆä¸€å¼ è¡¨,è¡¨ä¸­å­˜æ”¾æ•°æ® å¸¸è§çš„äº§å“:MS-sqlserver,ä¸»æµçš„å…è´¹çš„Oracle-mysql(ä¸­å°å‹çš„åº”ç”¨),æ”¶è´¹çš„Oracle-oracle(å¤§å‹çš„åº”ç”¨)  nosql - ä¸ä»…ä»…æ˜¯sql - éå…³ç³»">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql1">
<meta property="og:url" content="https://apelisun.github.io/2022/08/09/mysql1/index.html">
<meta property="og:site_name" content="ape_li">
<meta property="og:description" content="æ•°æ®åº“ä»‹ç» æŒ‰ç…§ä¸€å®šçš„æ•°æ®ç»“æ„æ¥ç»„ç»‡,ç®¡ç†å’Œå­˜å‚¨æ•°æ®çš„ä»“åº“ ç”¨ä»“åº“çš„æ–¹å¼æ¥ç®¡ç†æ•°æ®çš„.ä¸€ä¸ªä»“åº“ä¸‹ä¼šæœ‰å¾ˆå¤šè¡¨.ä¸€ä¸ªè¡¨ç”±è¡Œå’Œåˆ—æ„æˆ.  æ•°æ®çš„åˆ†ç±»  å…³ç³»å‹æ•°æ®åº“  è¡¨æ ¼å‹æ•°æ®åº“ - æœ‰è¡Œå’Œåˆ—æ¥æ„æˆä¸€å¼ è¡¨,è¡¨ä¸­å­˜æ”¾æ•°æ® å¸¸è§çš„äº§å“:MS-sqlserver,ä¸»æµçš„å…è´¹çš„Oracle-mysql(ä¸­å°å‹çš„åº”ç”¨),æ”¶è´¹çš„Oracle-oracle(å¤§å‹çš„åº”ç”¨)  nosql - ä¸ä»…ä»…æ˜¯sql - éå…³ç³»">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-09T13:22:47.000Z">
<meta property="article:modified_time" content="2022-08-10T03:46:46.267Z">
<meta property="article:author" content="ape_li">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="æ•°æ®åº“åŸºç¡€">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="ape_li" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
				<img lazy-src="/img/header.jpg" class="js-avatar">
			
		</a>

		<hgroup>
			<h1 class="header-author"><a href="/">ape_li</a></h1>
		</hgroup>

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">ä¸»é¡µ</a></li>
				        
							<li><a href="/archives">ç›®å½•</a></li>
				        
						</ul>
					</nav>
					<nav class="half-header-menu">
						<a class="hide">Home</a>
						<a>Tags</a>
						<a>Links</a>
						<a>About</a>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
						<!-- music -->
						
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/B-%E6%A0%91/" style="font-size: 10px;">B+æ ‘</a> <a href="/tags/area/" style="font-size: 10px;">area</a> <a href="/tags/collection/" style="font-size: 10px;">collection</a> <a href="/tags/homework/" style="font-size: 10px;">homework</a> <a href="/tags/index/" style="font-size: 10px;">index</a> <a href="/tags/interview/" style="font-size: 10px;">interview</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/meet-DB/" style="font-size: 10px;">meet DB</a> <a href="/tags/msql/" style="font-size: 10px;">msql</a> <a href="/tags/mysql/" style="font-size: 20px;">mysql</a> <a href="/tags/procedure/" style="font-size: 10px;">procedure</a> <a href="/tags/view/" style="font-size: 10px;">view</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">æ•°æ®åº“åŸºç¡€</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/">github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">I&#39;m a developer.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/header.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/archives">ç›®å½•</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-mysql1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/08/09/mysql1/" class="article-date">
  	<time datetime="2022-08-09T13:22:47.000Z" itemprop="datePublished">2022-08-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      mysql1
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/" rel="tag">æ•°æ®åº“åŸºç¡€</a></li></ul>
	</div>

        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="æ•°æ®åº“ä»‹ç»"><a href="#æ•°æ®åº“ä»‹ç»" class="headerlink" title="æ•°æ®åº“ä»‹ç»"></a>æ•°æ®åº“ä»‹ç»</h1><blockquote>
<p>æŒ‰ç…§ä¸€å®šçš„æ•°æ®ç»“æ„æ¥ç»„ç»‡,ç®¡ç†å’Œå­˜å‚¨æ•°æ®çš„ä»“åº“</p>
<p>ç”¨ä»“åº“çš„æ–¹å¼æ¥ç®¡ç†æ•°æ®çš„.ä¸€ä¸ªä»“åº“ä¸‹ä¼šæœ‰å¾ˆå¤šè¡¨.ä¸€ä¸ªè¡¨ç”±è¡Œå’Œåˆ—æ„æˆ.</p>
</blockquote>
<h2 id="æ•°æ®çš„åˆ†ç±»"><a href="#æ•°æ®çš„åˆ†ç±»" class="headerlink" title="æ•°æ®çš„åˆ†ç±»"></a>æ•°æ®çš„åˆ†ç±»</h2><blockquote>
<ol>
<li><p>å…³ç³»å‹æ•°æ®åº“ </p>
<p><code>è¡¨æ ¼å‹æ•°æ®åº“ - æœ‰è¡Œå’Œåˆ—æ¥æ„æˆä¸€å¼ è¡¨,è¡¨ä¸­å­˜æ”¾æ•°æ®</code></p>
<p>å¸¸è§çš„äº§å“:MS-sqlserver,ä¸»æµçš„å…è´¹çš„Oracle-mysql(ä¸­å°å‹çš„åº”ç”¨),æ”¶è´¹çš„Oracle-oracle(å¤§å‹çš„åº”ç”¨)</p>
</li>
<li><p>nosql - ä¸ä»…ä»…æ˜¯sql - éå…³ç³»å‹æ•°æ®åº“</p>
<ul>
<li>é”®å€¼å¯¹æ•°æ®åº“ - redis</li>
<li>æ–‡æ¡£å‹æ•°æ®åº“ - mongodb</li>
<li>åˆ—å¼æ•°æ®åº“ - hbase</li>
<li>å›¾å½¢æ•°æ®åº“</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹"><a href="#æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹" class="headerlink" title="æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹"></a>æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹</h2><blockquote>
<ol>
<li><p>serverå’Œclient</p>
<p>å½“æˆ‘ä»¬å®‰è£…å¥½dbä¹‹å,è‡ªå¸¦å®‰è£…å¥½äº†mysql-serverç«¯å’Œmysql-clientç«¯</p>
<p><code>dbæ­£å¸¸ä½¿ç”¨,ä¸€å®šè¦ä¿éšœmysql-serverç«¯å¤„äºè¿è¡ŒçŠ¶æ€</code></p>
<ul>
<li><p>å³å‡»è®¡ç®—æœº - ç®¡ç† - æœåŠ¡ - æœåŠ¡å’Œåº”ç”¨ç¨‹åº - ğŸ‘‰ğŸ»å³è¾¹çª—å£ - Mysql - å¯åŠ¨æ–¹å¼è®¾ç½®å¼€å¯è‡ªå¯.</p>
</li>
<li><p>å¯ä»¥é€šè¿‡ç»ˆç«¯è¾“å…¥å‘½ä»¤æ¥å¯åŠ¨mysql-serverç«¯</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br><span class="line">net stop mysql</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>mysql-clientå®¢æˆ·ç«¯<ul>
<li>ç¬¬ä¸‰æ–¹çš„æ”¶è´¹navicat</li>
<li>idea</li>
<li>javaä»£ç </li>
<li>è‡ªå¸¦çš„æ§åˆ¶å°</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="ä¸“ä¸šæœ¯è¯­"><a href="#ä¸“ä¸šæœ¯è¯­" class="headerlink" title="ä¸“ä¸šæœ¯è¯­"></a>ä¸“ä¸šæœ¯è¯­</h2><blockquote>
<ol>
<li><p>DB - DataBase æ•°æ®åº“</p>
</li>
<li><p>DBA - æ•°æ®åº“ç®¡ç†å‘˜(ä¾§é‡äºè¿ç»´),DE - æ•°æ®åº“ç ”å‘å·¥ç¨‹å¸ˆ</p>
</li>
<li><p>DBMS - æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ,å®‰è£…åœ¨æ“ä½œç³»ç»Ÿ.ç”¨æˆ·é€šè¿‡dbmsæ¥æ“ä½œdb,dbaé€šè¿‡dbmsæ¥ç®¡ç†db,ä¿è¯dbåœ¨7*24hé«˜æ•ˆè¿è½¬</p>
<p><code>äºº - dbms - db(os)</code></p>
</li>
<li><p>RDBMS - å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ </p>
</li>
<li><p>DBS - æ•°æ®åº“ç³»ç»Ÿ,å¤§çš„èŒƒç•´,dbs = dba+db+dbms</p>
</li>
</ol>
</blockquote>
<h2 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h2><blockquote>
<p><code>å‰æ:mysqlå®‰è£…å¹¶ä¸”é…ç½®å¥½äº†ç¯å¢ƒå˜é‡</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uç”¨æˆ·å -på¯†ç </span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -proot</span><br></pre></td></tr></tbody></table></figure>

<p><code>ä¿®æ”¹å¯†ç </code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">alter user 'ç”¨æˆ·å'@'dbæ‰€åœ¨ä¸»æœºip' identified by 'æ–°çš„å¯†ç ';</span><br><span class="line"></span><br><span class="line">use mysql</span><br><span class="line"></span><br><span class="line">alter user 'root'@'localhost' identified by 'root';</span><br><span class="line"></span><br><span class="line">-- é€€å‡ºé‡æ–°ç™»å½•</span><br><span class="line">exit;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="å¯¼å…¥è„šæœ¬"><a href="#å¯¼å…¥è„šæœ¬" class="headerlink" title="å¯¼å…¥è„šæœ¬"></a>å¯¼å…¥è„šæœ¬</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">-- 1. åˆ›å»ºæ•°æ®åº“  create dabatase æ•°æ®åº“å</span><br><span class="line">create database dy;</span><br><span class="line"></span><br><span class="line">-- æŸ¥çœ‹æ‰€æœ‰çš„db</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">-- 2. ä½¿ç”¨æ•°æ®åº“</span><br><span class="line">use dy</span><br><span class="line"></span><br><span class="line">-- 3. å¯¼å…¥è„šæœ¬ - .sqlä¸ºåç¼€çš„sqlæ–‡ä»¶</span><br><span class="line">-- 3-1. åœ¨dyæ•°æ®åº“ä¸­ç”Ÿæˆ5å¼ è¡¨</span><br><span class="line">-- 3-2. æ¯å¼ è¡¨ä¸­æ¨¡æ‹Ÿä¸€äº›æ•°æ®</span><br><span class="line">source è„šæœ¬æ–‡ä»¶çš„ç»å¯¹è·¯å¾„;</span><br><span class="line"></span><br><span class="line">-- 4. æŸ¥çœ‹è¯¥åº“ä¸‹æ‰€æœ‰çš„è¡¨</span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">+--------------+</span><br><span class="line">| Tables_in_dy |</span><br><span class="line">+--------------+</span><br><span class="line">| s_customer   |</span><br><span class="line">| s_dept       |</span><br><span class="line">| s_emp        |</span><br><span class="line">| s_ord        |</span><br><span class="line">| s_region     |</span><br><span class="line">+--------------+</span><br><span class="line"></span><br><span class="line">--5. æŸ¥çœ‹è¡¨ç»“æ„</span><br><span class="line">desc s_emp</span><br></pre></td></tr></tbody></table></figure>

<h2 id="è®¾ç½®æ•°æ®åº“ç¼–ç "><a href="#è®¾ç½®æ•°æ®åº“ç¼–ç " class="headerlink" title="è®¾ç½®æ•°æ®åº“ç¼–ç "></a>è®¾ç½®æ•°æ®åº“ç¼–ç </h2><blockquote>
<ol>
<li><p>æŸ¥çœ‹ç¼–ç </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">show variables like 'character_set%';</span><br><span class="line"></span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                     |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                      |</span><br><span class="line">| character_set_connection | utf8                                                      |</span><br><span class="line">| character_set_database   | utf8                                                      |</span><br><span class="line">| character_set_filesystem | binary                                                    |</span><br><span class="line">| character_set_results    | utf8                                                      |</span><br><span class="line">| character_set_server     | utf8                                                      |</span><br><span class="line">| character_set_system     | utf8                                                      |</span><br><span class="line">| character_sets_dir       | /usr/local/mysql-5.7.28-macos10.14-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ä¿®æ”¹ç¼–ç </p>
<p>2-1. ä¸´æ—¶ä¿®æ”¹ - setå‘½ä»¤ - ä»…ä»…æ˜¯å¯¹å½“å‰ä¼šè¯(ä¸€æ¬¡è¿æ¥,çª—å£)æœ‰æ•ˆ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set names utf8;</span><br></pre></td></tr></tbody></table></figure>

<p>2-2. æ°¸ä¹…ç”Ÿæ•ˆ - æ‰¾åˆ°<strong>my.iniæ–‡ä»¶</strong></p>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">character_set_server</span>=utf8</span><br></pre></td></tr></tbody></table></figure>

<p>éœ€è¦é‡å¯mysql-server(mysqlæœåŠ¡å™¨ç«¯),æ‰èƒ½ç”Ÿæ•ˆ.</p>
<ol>
<li><p>é€šè¿‡guiæ–¹å¼</p>
</li>
<li><p>é€šè¿‡å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net stop mysql</span><br><span class="line">net start mysql</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</li>
</ol>
</blockquote>
<h2 id="SQLä»‹ç»"><a href="#SQLä»‹ç»" class="headerlink" title="SQLä»‹ç»"></a>SQLä»‹ç»</h2><blockquote>
<p>SQL æ˜¯ Structured Query Language çš„ç¼©å†™ï¼Œä¸­æ–‡è¯‘ä¸ºâ€œç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€â€ã€‚SQL æ˜¯ä¸€ç§è®¡ç®—æœºè¯­è¨€ï¼Œç”¨æ¥å­˜å‚¨ã€æ£€ç´¢å’Œä¿®æ”¹å…³ç³»å‹æ•°æ®åº“ä¸­å­˜å‚¨çš„æ•°æ®ã€‚</p>
<p>â‘ mysql-clientè¾“å…¥åˆæ³•çš„sqlè¯­å¥,å¦‚æœsqléæ³•,ç›´æ¥æŠ¥é”™</p>
<p>â‘¡è¾“å…¥å›è½¦- å®¢æˆ·ç«¯å°†sqlè¯­å¥å‘é€åˆ°mysql-serverç«¯,ç¼–è¯‘å’Œè§£æsqlè¯­å¥çš„.</p>
<p>â‘¢mysql-serverå°†æ‰§è¡Œå®Œsqlè¯­å¥çš„ç»“æœè¿”å›åˆ°mysql-clientè¿›è¡Œå±•ç¤º.</p>
</blockquote>
<h3 id="æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»"><a href="#æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»" class="headerlink" title="æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»"></a>æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»</h3><blockquote>
<ol>
<li><p>DDL(Data Definition Language) - æ•°æ®å®šä¹‰è¯­è¨€</p>
<p>create drop alter truncate rename comment(æ³¨é‡Š)</p>
</li>
<li><p>DML(Data Manipulation Language) - æ•°æ®æ“çºµè¯­è¨€</p>
<p>update delete insert</p>
</li>
<li><p>DQL(Data Query Language) - æ•°æ®æŸ¥è¯¢è¯­è¨€</p>
<p>select</p>
</li>
<li><p>TCL/DTL(Transaction Control Language):äº‹åŠ¡æ§åˆ¶è¯­è¨€</p>
<p>commit savepoint rollback</p>
</li>
</ol>
</blockquote>
<h1 id="ç®€å•æŸ¥è¯¢"><a href="#ç®€å•æŸ¥è¯¢" class="headerlink" title="ç®€å•æŸ¥è¯¢"></a>ç®€å•æŸ¥è¯¢</h1><blockquote>
<ol>
<li><p>æŸ¥è¯¢çš„æœ¬è´¨</p>
<ul>
<li>åˆ°å“ªé‡ŒæŸ¥</li>
<li>æŸ¥ä»€ä¹ˆ</li>
</ul>
</li>
<li><p>è¯­æ³• - å…³é”®å­—æ˜¯å¤§å°å†™ä¸æ•æ„Ÿ</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> åˆ—å<span class="number">1</span>,åˆ—å<span class="number">2</span>,..åˆ—n</span><br><span class="line"><span class="keyword">FROM</span> è¡¨å;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="åˆ—å–åˆ«å"><a href="#åˆ—å–åˆ«å" class="headerlink" title="åˆ—å–åˆ«å"></a>åˆ—å–åˆ«å</h2><blockquote>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—,è–ªæ°´ä»¥åŠèŒç§°.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary,title from s_emp;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼ä¸€</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1 åˆ—åˆ«å,åˆ—å2 åˆ—åˆ«å,..åˆ—n</span><br><span class="line">FROM è¡¨å;</span><br><span class="line"></span><br><span class="line">select first_name åå­—,salary è–ªæ°´,title èŒç§° from s_emp;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼äºŒ</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1 as åˆ—åˆ«å,åˆ—å2 as åˆ—åˆ«å,..åˆ—n</span><br><span class="line">FROM è¡¨å;</span><br><span class="line"></span><br><span class="line">select first_name as åå­—,salary as è–ªæ°´,title as èŒç§° from s_emp;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼ä¸‰</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åˆ—åˆ«åä¸­é—´æœ‰ç©ºæ ¼,éœ€è¦ä½¿ç”¨åŒå¼•å·æ¥åŒ…è£¹æ ¼å¼</span><br><span class="line">select first_name "å å­—",salary "è–ª æ°´",title as "èŒ ç§°" from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢æ‰€æœ‰åˆ—*</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- æ ¼å¼åŒ–è¾“å‡º</span><br><span class="line">select * from s_emp;</span><br><span class="line">   </span><br><span class="line">select * from s_emp \G;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="å»é‡å…³é”®å­—"><a href="#å»é‡å…³é”®å­—" class="headerlink" title="å»é‡å…³é”®å­—"></a>å»é‡å…³é”®å­—</h2><blockquote>
<p>distinct</p>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­æ‰€æœ‰çš„èŒç§°çš„ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct title from s_emp;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="åˆ—çš„è®¡ç®—"><a href="#åˆ—çš„è®¡ç®—" class="headerlink" title="åˆ—çš„è®¡ç®—"></a>åˆ—çš„è®¡ç®—</h2><blockquote>
<p>åˆ—æ˜¯å…è®¸è®¡ç®—çš„</p>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—,å¹´è–ª(ä¸å¸¦ææˆcommission_pct)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*12 å¹´è–ª from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—,å¹´è–ª(å¸¦ææˆcommission_pct)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+commission_pct/100)*12 å¹´è–ª from s_emp;</span><br><span class="line">   </span><br><span class="line">æŸ¥è¯¢å‡ºæ¥åªæœ‰5ä¸ªäººæœ‰å¹´è–ª,åŸå› æ˜¯å› ä¸ºåªæœ‰5ä¸ªäººæœ‰ææˆ.å…¶ä»–äººçš„ææˆéƒ½æ˜¯nullå€¼</span><br><span class="line">mysql - nullå€¼è®¡ç®—çš„ç»“æœè¿˜æ˜¯ä¸€ä¸ªnullå€¼</span><br><span class="line">   </span><br><span class="line">ä½¿ç”¨åˆ°mysqlä¸­æä¾›çš„ç©ºå€¼ç½®æ¢å‡½æ•°</span><br><span class="line">coalesce(m,n) - å¦‚æœmä¸ºnull,è¿”å›n,å¦åˆ™è¿”å›m</span><br><span class="line">   </span><br><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><blockquote>
<ol>
<li><p>æ‰¾å‡ºå‘˜å·¥çš„å§“å,å·¥èµ„ä»¥åŠå…¥èŒæ—¥æœŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select last_name,first_name,salary,start_date from s_emp;</span><br><span class="line"></span><br><span class="line">-- åˆ—çš„æ‹¼æ¥ concat(m,n,a,b,c,..)</span><br><span class="line">-- mysqlä¸­çš„å­—ç¬¦ä¸²ç»Ÿä¸€ä½¿ç”¨å•å¼•å·</span><br><span class="line">select concat(last_name,'  ',first_name) å§“å,salary,start_date from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºæ‰€æœ‰çš„å®¢æˆ·åä»¥åŠä»–çš„è”ç³»æ–¹å¼</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select name,phone from s_customer;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å§“åçš„æ—¶å€™</span><br><span class="line">-- è”¡æ ¹èŠ± - è”¡**</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºæ¯ä¸ªè®¢å•çš„è´¹ç”¨,æ”¯ä»˜æ–¹å¼ä»¥åŠå‡ºè´§æ—¥æœŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select total,payment_type,date_ordered from s_ord;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1,åˆ—å2,..åˆ—n</span><br><span class="line">FROM è¡¨å</span><br><span class="line">WHERE æ¡ä»¶è¡¨è¾¾å¼;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h3><p><code>æ¯”è¾ƒè¿ç®—ç¬¦</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; &lt; &gt;= &lt;= != &lt;&gt; =</span><br></pre></td></tr></tbody></table></figure>

<p><code>å…¶ä»–è¿ç®—ç¬¦</code></p>
<blockquote>
<ol>
<li>between â€¦  and ..  åœ¨â€¦åˆ°â€¦ä¹‹é—´</li>
<li>in(é›†åˆ) - åœ¨æŸä¸ªé›†åˆå†…</li>
<li>not in(é›†åˆ) - ä¸åœ¨æŸä¸ªé›†åˆå†…</li>
<li>is - åˆ¤æ–­æ˜¯å¦ä¸ºnull,åˆ¤æ–­nullå€¼ä¸èƒ½ç”¨=</li>
<li>is not - åˆ¤æ–­æ˜¯å¦ä¸ä¸ºnull</li>
</ol>
</blockquote>
<p><code>é€»è¾‘è¿æ¥ç¬¦</code></p>
<blockquote>
<ol>
<li>and æ¡ä»¶åŒæ—¶æˆç«‹,è¿”å›true</li>
<li>or æœ‰ä¸€ä¸ªæ¡ä»¶æˆç«‹,å°±è¿”å›true</li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -1"><a href="#ç»ƒä¹ -1" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>æŸ¥è¯¢éƒ¨é—¨ç¼–å·(dept_id)ä¸º41,42,45çš„å‘˜å·¥æ‰¾å‡ºæ¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select first_name,dept_id from s_emp</span><br><span class="line">where dept_id=41 or dept_id=42 or dept_id=45;</span><br><span class="line"></span><br><span class="line">select first_name,dept_id from s_emp where dept_id in(41,42,45);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢æ²¡æœ‰ææˆçš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,commission_pct from s_emp where commission_pct is null;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºå·¥èµ„åœ¨[1200,1500]ä¹‹é—´çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary from s_emp where salary between 1200 and 1500;</span><br><span class="line"></span><br><span class="line">-- æ›´åŠ çµæ´»</span><br><span class="line">select first_name,salary from s_emp where salary&gt;=1200 and salary&lt;=1500;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥æ‰¾å·¥èµ„å¤§äº1500å¹¶ä¸”æ²¡æœ‰ææˆçš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary from s_emp where salary&gt;1500 and commission_pct is null;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥æ‰¾å¹´è–ª(åŒ…æ‹¬ææˆ)è¶…è¿‡15000çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 _year from s_emp</span><br><span class="line">where salary*(1+coalesce(commission_pct,0)/100)*12&gt;15000;</span><br><span class="line"></span><br><span class="line">-- ç»™åˆ—å–åˆ«åçš„æ„ä¹‰</span><br><span class="line">-- å­æŸ¥è¯¢ - æŸ¥è¯¢çš„ç»“æœä½œä¸ºè™šæ‹Ÿè¡¨ - å­æŸ¥è¯¢ä¸€å®šè¦æ”¾åœ¨()ä¸­</span><br><span class="line">select * from X where _year&gt;15000;</span><br><span class="line"></span><br><span class="line">æŸ¥è¯¢çš„ç»“æœæ¥æ›¿ä»£X,å­æŸ¥è¯¢çš„ç»“æœä½œä¸ºè¡¨çš„è¯ - éœ€è¦ç»™è¡¨å–åˆ«å</span><br><span class="line">select * from (select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 _year from s_emp) core_ where _year&gt;15000;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºé™¤äº†41éƒ¨é—¨çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select first_name,dept_id from s_emp where dept_id &lt;&gt; 41;</span><br><span class="line"></span><br><span class="line">select first_name,dept_id from s_emp where dept_id not in(41);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºäºšæ´²åŒºåŸŸçš„ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- mysqlä¸­é‡‡ç”¨å•å¼•å·</span><br><span class="line">select * from s_region where name='Asia';</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h2><blockquote>
<p>å¤§å°å†™ä¸æ•æ„Ÿçš„</p>
</blockquote>
<blockquote>
<ol>
<li>å…³é”®å­—like</li>
<li>å ä½ç¬¦<ul>
<li>% ä»£è¡¨çš„ä»»æ„å¤šä¸ªä»»æ„å­—ç¬¦</li>
<li>_ ä»£è¡¨çš„æ˜¯ä»»æ„å•ä¸ªå­—ç¬¦</li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="è½¬ä¹‰å­—ç¬¦"><a href="#è½¬ä¹‰å­—ç¬¦" class="headerlink" title="è½¬ä¹‰å­—ç¬¦"></a>è½¬ä¹‰å­—ç¬¦</h3><blockquote>
<ul>
<li><p>first_nameåç§°æ­£å¥½åŒ…å«äº†%æˆ–è€…_</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update s_emp set first_name='Mar%k' where id=4;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢first_nameåŒ…å«%çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- å®šä¹‰è½¬ä¹‰å­—ç¬¦,é»˜è®¤çš„æ˜¯\</span><br><span class="line">select first_name from s_emp where first_name like '%\%%';</span><br><span class="line">  </span><br><span class="line">-- è‡ªå®šä¹‰è½¬ä¹‰å­—ç¬¦,ç”¨escape æ–°çš„è½¬ä¹‰å­—ç¬¦</span><br><span class="line">select first_name from s_emp where first_name like '%?%%' escape '?';</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</blockquote>
<h3 id="ç»ƒä¹ -2"><a href="#ç»ƒä¹ -2" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>æŸ¥è¯¢first_nameåŒ…å«mçš„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name from s_emp where first_name like '%m%';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢ä»¥Cå¼€å¤´çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name from s_emp where first_name like 'C%';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢ç¬¬ä¸‰ä¸ªå­—æ¯æ˜¯â€™eâ€™çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name from s_emp where first_name like '__e%';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢å…¥èŒæ—¶é—´æ˜¯6æœˆä»½çš„å‘˜å·¥ - æ¨¡ç³ŠæŸ¥è¯¢ - ä¸æ˜¯æ­£è§„çš„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,start_date from s_emp where start_date like '%-06-%';</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1,åˆ—å2,..åˆ—n</span><br><span class="line">FROM è¡¨å</span><br><span class="line">WHERE æ¡ä»¶è¡¨è¾¾å¼</span><br><span class="line">ORDER Byè¯­å¥ [asc|desc]</span><br><span class="line"></span><br><span class="line">ascå¯ä»¥çœç•¥ä¸å†™ - å‡åº</span><br><span class="line">descå¿…é¡»è¦å†™ - é™åº</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<ol>
<li><p>æ ¹æ®å¹´è–ªé™åºæ’åˆ—</p>
<p><code>æ–¹å¼ä¸€: order by åˆ—å</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 from s_emp </span><br><span class="line">order by salary*(1+coalesce(commission_pct,0)/100)*12 desc;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼äºŒ:</code> order by åˆ—åˆ«å</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp </span><br><span class="line">order by å¹´è–ª desc;</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ–¹å¼ä¸‰: order by åˆ—çš„åºå·</code>  åˆ—çš„åºå·ä»1å¼€å§‹ =&gt; æ¨èæ–¹å¼</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp </span><br><span class="line">order by 2 desc;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ ¹æ®å¹´è–ªé™åºæ’.å¦‚æœå¹´è–ªä¸€æ ·,åˆ™ç»§ç»­æŒ‰ç…§first_nameå‡åºæ’åˆ—</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp </span><br><span class="line">order by 2 desc,1;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="è½¬æ¢å‡½æ•°"><a href="#è½¬æ¢å‡½æ•°" class="headerlink" title="è½¬æ¢å‡½æ•°"></a>è½¬æ¢å‡½æ•°</h2><h3 id="æ•°å­—å’Œå­—ç¬¦ä¸²"><a href="#æ•°å­—å’Œå­—ç¬¦ä¸²" class="headerlink" title="æ•°å­—å’Œå­—ç¬¦ä¸²"></a>æ•°å­—å’Œå­—ç¬¦ä¸²</h3><blockquote>
<ol>
<li><p>å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select '1'+0;</span><br><span class="line"></span><br><span class="line">mysqlä¸­å­—ç¬¦æ•°å­—é‡åˆ°æ•°å­—è¿›è¡Œ+,è‡ªåŠ¨å°†å­—ç¬¦è½¬æ¢æˆæ•°å­—æ¥è¿›è¡Œè®¡ç®—.</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸² - concatå‡½æ•° - æ‹¼æ¥åˆ é™¤</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select concat(1,2);  // 12</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h3 id="å­—ç¬¦ä¸²å’Œæ—¥æœŸ"><a href="#å­—ç¬¦ä¸²å’Œæ—¥æœŸ" class="headerlink" title="å­—ç¬¦ä¸²å’Œæ—¥æœŸ"></a>å­—ç¬¦ä¸²å’Œæ—¥æœŸ</h3><blockquote>
<p>å…³äºæ—¥æœŸæ¨¡æ¿</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(åœ¨formatå­—ç¬¦ä¸²ä¸­å¯ç”¨æ ‡å¿—ç¬¦:  </span><br><span class="line">ã€€%m æœˆåå­—(januaryâ€¦â€¦december)    </span><br><span class="line">ã€€%w æ˜ŸæœŸåå­—(sundayâ€¦â€¦saturday)    </span><br><span class="line">ã€€%d æœ‰è‹±è¯­å‰ç¼€çš„æœˆä»½çš„æ—¥æœŸ(1st, 2nd, 3rd, ç­‰ç­‰ã€‚ï¼‰    </span><br><span class="line">ã€€%Y å¹´, æ•°å­—, 4 ä½    </span><br><span class="line">ã€€%y å¹´, æ•°å­—, 2 ä½    </span><br><span class="line">ã€€%a ç¼©å†™çš„æ˜ŸæœŸåå­—(sunâ€¦â€¦sat)    </span><br><span class="line">ã€€%d æœˆä»½ä¸­çš„å¤©æ•°, æ•°å­—(00â€¦â€¦31)    </span><br><span class="line">ã€€%e æœˆä»½ä¸­çš„å¤©æ•°, æ•°å­—(0â€¦â€¦31)    </span><br><span class="line">ã€€%m æœˆ, æ•°å­—(01â€¦â€¦12)    </span><br><span class="line">ã€€%c æœˆ, æ•°å­—(1â€¦â€¦12)    </span><br><span class="line">ã€€%b ç¼©å†™çš„æœˆä»½åå­—(janâ€¦â€¦dec)    </span><br><span class="line">ã€€%j ä¸€å¹´ä¸­çš„å¤©æ•°(001â€¦â€¦366)    </span><br><span class="line">ã€€%H 24æ—¶åˆ¶å°æ—¶(00â€¦â€¦23)    </span><br><span class="line">ã€€%k å°æ—¶(0â€¦â€¦23)    </span><br><span class="line">ã€€%h 12æ—¶å°æ—¶(01â€¦â€¦12)    </span><br><span class="line">ã€€%i å°æ—¶(01â€¦â€¦12)    </span><br><span class="line">ã€€%l å°æ—¶(1â€¦â€¦12)    </span><br><span class="line">ã€€%i åˆ†é’Ÿ, æ•°å­—(00â€¦â€¦59)    </span><br><span class="line">ã€€%r æ—¶é—´,12 å°æ—¶(hh:mm:ss [ap]m)    </span><br><span class="line">ã€€%t æ—¶é—´,24 å°æ—¶(hh:mm:ss)    </span><br><span class="line">ã€€%s ç§’(00â€¦â€¦59)       </span><br><span class="line">ã€€%p amæˆ–pm    </span><br><span class="line">ã€€%w ä¸€ä¸ªæ˜ŸæœŸä¸­çš„å¤©æ•°(0=sunday â€¦â€¦6=saturday ï¼‰  </span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<blockquote>
<ol>
<li><p>è·å–å½“å‰ç³»ç»Ÿçš„æ—¥æœŸ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select now();</span><br><span class="line"></span><br><span class="line">+---------------------+</span><br><span class="line">| now()               |</span><br><span class="line">+---------------------+</span><br><span class="line">| 2022-08-05 11:09:49 |</span><br><span class="line">+---------------------+</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ—¥æœŸè½¬æ¢æˆæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸² - date_format(æ—¥æœŸ,æ¨¡æ¿)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ¨¡æ¿  %Y   %m    %d  %H  %i   %s</span><br><span class="line"></span><br><span class="line">select date_format(now(),'%Y/%m/%d %H:%i:%s');</span><br><span class="line"></span><br><span class="line">select date_format(now(),'%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%iåˆ†%sç§’');</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å­—ç¬¦ä¸²è½¬æˆæ—¥æœŸ - str_to_date(å­—ç¬¦ä¸²,æ¨¡æ¿) - å­—ç¬¦ä¸²æ ¼å¼è¦å’Œæ¨¡æ¿çš„æ ¼å¼åŒ¹é…</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ é™¤è¡¨</span><br><span class="line">drop table tt;</span><br><span class="line">-- åˆ›å»ºè¡¨</span><br><span class="line">create table tt(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  name varchar(20),</span><br><span class="line">  birthday date</span><br><span class="line">);</span><br><span class="line">   </span><br><span class="line">-- date - å¹´æœˆæ—¥</span><br><span class="line">-- æ’å…¥æ•°æ®</span><br><span class="line">-- mysqlä¸­é»˜è®¤æ”¯æŒçš„æ ¼å¼ - ä¼šå°†å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æˆdateç±»å‹</span><br><span class="line">insert into tt values(1,'admin','2022-09-01');//ok</span><br><span class="line">insert into tt values(2,'tom','2022/09/01');//ok</span><br><span class="line">insert into tt values(3,'jack','20221001');//ok</span><br><span class="line">   </span><br><span class="line">-- ä¸æ”¯æŒçš„æ—¶å€™</span><br><span class="line">insert into tt values(4,'jack','aa');</span><br><span class="line">ERROR 1292 (22007): Incorrect date value: 'aa' for column 'birthday' at row 1</span><br><span class="line">   </span><br><span class="line">insert into tt values(4,'jack','01-05-2022');</span><br><span class="line">ERROR 1292 (22007): Incorrect date value: '01-05-2022' for column 'birthday' at row 1</span><br><span class="line">   </span><br><span class="line">-- éè¦ä½¿ç”¨'01-05-2022'å­—ç¬¦ä¸²æ ¼å¼çš„,æ‰éœ€è¦ä½¿ç”¨str_to_dateå‡½æ•°è¿›è¡Œè½¬æ¢</span><br><span class="line">insert into tt values(4,'jack',str_to_date('01-05-2022','%d-%m-%Y'));</span><br></pre></td></tr></tbody></table></figure>

<p><code>å¯¼å…¥è„šæœ¬çš„æ—¶å€™ - å¤±è´¥åœºæ™¯ - å­—ç¬¦ä¸²æ—¥æœŸæ ¼å¼ä¸æ”¯æŒ</code></p>
</li>
</ol>
</blockquote>
<h1 id="å•è¡Œå‡½æ•°"><a href="#å•è¡Œå‡½æ•°" class="headerlink" title="å•è¡Œå‡½æ•°"></a>å•è¡Œå‡½æ•°</h1><blockquote>
<ul>
<li><p>select å‡½æ•°(å‚æ•°);</p>
</li>
<li><p>å‡½æ•°æ˜¯å¯ä»¥åº”ç”¨åœ¨æŸ¥è¯¢åˆ—ä¸Šçš„.</p>
</li>
<li><p>å‡½æ•°æ˜¯å…è®¸åµŒå¥—ä½¿ç”¨çš„.</p>
</li>
</ul>
</blockquote>
<h2 id="1-å­—ç¬¦ä¸²å‡½æ•°"><a href="#1-å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="1. å­—ç¬¦ä¸²å‡½æ•°"></a>1. å­—ç¬¦ä¸²å‡½æ•°</h2><blockquote>
<ol>
<li><p>instr(str,substr) - è¿”å›å­—ç¬¦ä¸²substråœ¨å­—ç¬¦ä¸²strç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®(strä¸åŒ…å«substræ—¶è¿”å›0)</p>
</li>
<li><p>lpad(str,len,padstr) - ç”¨å­—ç¬¦ä¸²padstrå¡«è¡¥strå·¦ç«¯ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlenå¹¶è¿”å› </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select lpad('ab',5,'cd');//cdcab</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>rpad(str,len,padstr) - ç”¨å­—ç¬¦ä¸²padstrå¡«è¡¥strå³ç«¯ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlenå¹¶è¿”å›</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select rpad('ab',5,'cd');//abcdc   5ä»£è¡¨çš„æ˜¯æ€»çš„é•¿åº¦</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>left(str,len) - è¿”å›å­—ç¬¦ä¸²strçš„å·¦ç«¯lenä¸ªå­—ç¬¦ </p>
</li>
<li><p>right(str,len) - è¿”å›å­—ç¬¦ä¸²strçš„å³ç«¯lenä¸ªå­—ç¬¦ </p>
</li>
<li><p>substring(str,pos,len) - è¿”å›å­—ç¬¦ä¸²strçš„ä½ç½®posèµ·lenä¸ªå­—ç¬¦  </p>
</li>
<li><p>substring(str,pos) - è¿”å›å­—ç¬¦ä¸²strçš„ä½ç½®posèµ·åé¢çš„å­ä¸² </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åºå·ä»1å¼€å§‹</span><br><span class="line">select substring('mysql',2);  //ysql</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ltrim(str) - è¿”å›åˆ é™¤äº†å·¦ç©ºæ ¼çš„å­—ç¬¦ä¸²str  </p>
</li>
<li><p>rtrim(str)  - è¿”å›åˆ é™¤äº†å³ç©ºæ ¼çš„å­—ç¬¦ä¸²str  </p>
</li>
<li><p>space(n) - è¿”å›ç”±nä¸ªç©ºæ ¼å­—ç¬¦ç»„æˆçš„ä¸€ä¸ªå­—ç¬¦ä¸²  </p>
</li>
<li><p><em><strong>replace(str,from_str,to_str)  - ç”¨å­—ç¬¦ä¸²to_stræ›¿æ¢å­—ç¬¦ä¸²strä¸­çš„å­ä¸²from_strå¹¶è¿”å›</strong></em></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select replace('i love java','java','mysql');</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>reverse(str) - é¢ å€’å­—ç¬¦ä¸²strçš„å­—ç¬¦é¡ºåºå¹¶è¿”å›</p>
</li>
<li><p>insert(str,pos,len,newstr) - æŠŠå­—ç¬¦ä¸²strç”±ä½ç½®posèµ·lenä¸ªå­—ç¬¦é•¿çš„å­ä¸²æ›¿æ¢ä¸ºå­—ç¬¦ä¸²</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select insert('xxxxx',1,2,'**');</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>lower(str) - è¿”å›å°å†™çš„å­—ç¬¦ä¸²str  </p>
</li>
<li><p>upper(str) - è¿”å›å¤§å†™çš„å­—ç¬¦ä¸²str</p>
</li>
<li><p>char_length(str) -  ä¸ç®¡æ±‰å­—è¿˜æ˜¯æ•°å­—æˆ–è€…æ˜¯å­—æ¯éƒ½ç®—æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚</p>
</li>
<li><p>length(str);//æ±‰å­—å 3ä¸ª,å…¶ä»–å 1ä¸ª.</p>
</li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -3"><a href="#ç»ƒä¹ -3" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>é…åˆè¡¨ - å°†first_nameå…¨éƒ¨è½¬æ¢æˆå¤§å†™</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,upper(first_name) from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>first_name  - æ¨¡æ‹Ÿé“¶è¡Œè´¦æˆ·æ˜¾ç¤º,åªæ˜¾ç¤ºé¦–å­—æ¯,å…¶ä½™æ¯ä¸ªå­—æ¯ç”¨*è¡¨ç¤º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- substringå’Œrpad</span><br><span class="line">select first_name,rpad(substring(first_name,1,1),char_length(first_name),'*') from s_emp;</span><br><span class="line"></span><br><span class="line">-- concat + substring + rpad</span><br><span class="line">select first_name,concat(substring(first_name,1,1),rpad('*',char_length(first_name)-1,'*')) from s_emp;</span><br><span class="line"></span><br><span class="line">-- replace + substring + rpad</span><br><span class="line">select first_name,replace(first_name,substring(first_name,2),rpad('*',char_length(first_name)-1,'*'))</span><br><span class="line">from s_emp;</span><br><span class="line"></span><br><span class="line">-- insert + rpad</span><br><span class="line">select first_name,insert(first_name,2,char_length(first_name)-1,rpad('*',char_length(first_name)-1,'*'))</span><br><span class="line">from s_emp;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="2-æ•°å­—å‡½æ•°"><a href="#2-æ•°å­—å‡½æ•°" class="headerlink" title="2. æ•°å­—å‡½æ•°"></a>2. æ•°å­—å‡½æ•°</h2><blockquote>
<ol>
<li>abs(n) - æ±‚ç»å¯¹å€¼</li>
<li>mod(n,m) - å–æ¨¡è¿ç®—,è¿”å›nè¢«mé™¤çš„ä½™æ•°(åŒ%æ“ä½œç¬¦)</li>
<li><strong>floor(n) - è¿”å›ä¸å¤§äºnçš„æœ€å¤§æ•´æ•°å€¼</strong> - å‘ä¸‹å–æ•´  </li>
<li><strong>ceiling(n) - è¿”å›ä¸å°äºnçš„æœ€å°æ•´æ•°å€¼</strong>  - å‘ä¸Šå–æ•´ </li>
<li>round(n[,d]) - è¿”å›nçš„å››èˆäº”å…¥å€¼,ä¿ç•™dä½å°æ•°(dçš„é»˜è®¤å€¼ä¸º0)</li>
<li>pow(x,y) - è¿”å›å€¼xçš„yæ¬¡å¹‚  </li>
<li>sqrt(n) - è¿”å›éè´Ÿæ•°nçš„å¹³æ–¹æ ¹</li>
<li>pi() - è¿”å›åœ†å‘¨ç‡  </li>
<li>rand() - è¿”å›åœ¨èŒƒå›´[0åˆ°1.0)å†…çš„éšæœºæµ®ç‚¹å€¼</li>
<li>truncate(n,d) - ä¿ç•™æ•°å­—nçš„dä½å°æ•°å¹¶è¿”å›  - ç›´æ¥æˆªå–</li>
</ol>
</blockquote>
<h2 id="3-æ—¥æœŸå‡½æ•°"><a href="#3-æ—¥æœŸå‡½æ•°" class="headerlink" title="3. æ—¥æœŸå‡½æ•°"></a>3. æ—¥æœŸå‡½æ•°</h2><blockquote>
<p>æŸ¥è¯¢å½“å‰ç³»ç»Ÿçš„æ—¥æœŸ - select now();</p>
<ol>
<li><p>dayofweek(date) - è¿”å›æ—¥æœŸdateæ˜¯æ˜ŸæœŸå‡ (1=æ˜ŸæœŸå¤©,2=æ˜ŸæœŸä¸€,â€¦â€¦7=æ˜ŸæœŸå…­,odbcæ ‡å‡†)  </p>
</li>
<li><p>weekday(date) - è¿”å›æ—¥æœŸdateæ˜¯æ˜ŸæœŸå‡ (0=æ˜ŸæœŸä¸€,1=æ˜ŸæœŸäºŒ,â€¦â€¦6= æ˜ŸæœŸå¤©)</p>
</li>
<li><p>year(date) - è¿”å›dateçš„å¹´ä»½(èŒƒå›´åœ¨1000åˆ°9999)    </p>
</li>
<li><p>month(date)  - è¿”å›dateä¸­çš„æœˆä»½æ•°å€¼   </p>
</li>
<li><p>dayofmonth(date) - è¿”å›dateæ˜¯ä¸€æœˆä¸­çš„ç¬¬å‡ æ—¥(åœ¨1åˆ°31èŒƒå›´å†…)   </p>
</li>
<li><p>hour(time) - è¿”å›timeçš„å°æ—¶æ•°(èŒƒå›´æ˜¯0åˆ°23)  </p>
</li>
<li><p>minute(time) - è¿”å›timeçš„åˆ†é’Ÿæ•°(èŒƒå›´æ˜¯0åˆ°59) </p>
</li>
<li><p>second(time) - è¿”å›timeçš„ç§’æ•°(èŒƒå›´æ˜¯0åˆ°59) </p>
</li>
<li><p>period_add(p,n) - å¢åŠ nä¸ªæœˆåˆ°æ—¶æœŸpå¹¶è¿”å›(pçš„æ ¼å¼yymmæˆ–yyyymm) </p>
<p>mysql&gt;select period_add(â€˜202008â€™,3) ;</p>
<p>æ³¨æ„:på¯ä»¥æ˜¯å­—ç¬¦ä¸²,ä¸€å®šè¦æ»¡è¶³ä¸€å®šçš„æ ¼å¼,æˆ–è€…å¯ä»¥ç›´æ¥ä½¿ç”¨dateç±»å‹.</p>
</li>
<li><p>period_diff(p1,p2) - è¿”å›åœ¨æ—¶æœŸp1å’Œp2ä¹‹é—´æœˆæ•°(p1å’Œp2çš„æ ¼å¼yymmæˆ–yyyymm)  p1-p2</p>
</li>
<li><p>curdate() - ä»¥â€™yyyy-mm-ddâ€™æˆ–yyyymmddæ ¼å¼è¿”å›å½“å‰æ—¥æœŸå€¼(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—) </p>
</li>
<li><p>curtime() - ä»¥â€™hh:mm:ssâ€™æˆ–hhmmssæ ¼å¼è¿”å›å½“å‰æ—¶é—´å€¼(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—)</p>
</li>
<li><p>now() - ä»¥â€™yyyy-mm-dd hh:mm:ssâ€™æˆ–yyyymmddhhmmssæ ¼å¼è¿”å›å½“å‰æ—¥æœŸæ—¶é—´(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—)     </p>
</li>
<li><p>last_day(date) - dateæ—¥æœŸæ‰€åœ¨æœˆçš„æœ€åä¸€å¤©æ˜¯ä»€ä¹ˆæ—¶å€™</p>
</li>
<li><p>datediff(d1,d2) - ä¸¤ä¸ªæ—¥æœŸd1,d2ä¹‹é—´ç›¸å·®çš„å¤©æ•°</p>
</li>
<li><p>timestampdiff(type,d1,d2) - typeæ˜¯YEAR,d1å’Œd2ç›¸å·®çš„å¹´ä»½,MONTH,æœˆä»½</p>
<p>d1,d2 - yyyymmdd</p>
</li>
</ol>
</blockquote>
<h3 id="3-1-è¡¥å……"><a href="#3-1-è¡¥å……" class="headerlink" title="3-1. è¡¥å……"></a>3-1. è¡¥å……</h3><blockquote>
<ul>
<li><p>date_add(date,interval expr type)</p>
</li>
<li><p>date_sub(date,interval expr type)</p>
</li>
<li><p>å…³äºtype</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ype:</span><br><span class="line">year</span><br><span class="line">month</span><br><span class="line">day</span><br><span class="line">hour</span><br><span class="line">minute</span><br><span class="line">second</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</blockquote>
<p>#å…³è”æŸ¥è¯¢ </p>
<blockquote>
<p>å…³è”æŸ¥è¯¢å°±æ˜¯å¤šè¡¨æŸ¥è¯¢</p>
</blockquote>
<h2 id="é”™è¯¯çš„å†™æ³•"><a href="#é”™è¯¯çš„å†™æ³•" class="headerlink" title="é”™è¯¯çš„å†™æ³•"></a>é”™è¯¯çš„å†™æ³•</h2><blockquote>
<p>s_empè¡¨ä¸­25rows,s_deptè¡¨ä¸­12rows</p>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—ä»¥åŠè¿™ä¸ªå‘˜å·¥çš„éƒ¨é—¨åç§°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select first_name,name from s_emp,s_dept;</span><br><span class="line"></span><br><span class="line">300 rows </span><br><span class="line"></span><br><span class="line">å‘ç”Ÿäº†ç¬›å¡å°”ç§¯ - é”™è¯¯çš„ç»“æœ</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h3 id="çº æ­£-ä¼ ç»Ÿçš„å†™æ³•"><a href="#çº æ­£-ä¼ ç»Ÿçš„å†™æ³•" class="headerlink" title="çº æ­£ - ä¼ ç»Ÿçš„å†™æ³•"></a>çº æ­£ - ä¼ ç»Ÿçš„å†™æ³•</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">select first_name,name from s_emp,s_dept where dept_id=id;</span><br><span class="line"></span><br><span class="line">ERROR 1052 (23000): Column 'id' in where clause is ambiguous</span><br><span class="line"></span><br><span class="line">å¤šå¼ è¡¨ä¸­å‡ºç°åŒåçš„åˆ—,éœ€è¦å¯¹è¡¨å–åˆ«å</span><br><span class="line"></span><br><span class="line">æ­£ç¡®çš„å†™æ³•:</span><br><span class="line">select e.first_name,d.name from s_emp e,s_dept d where e.dept_id=d.id;</span><br><span class="line"></span><br><span class="line">-- ç”¨æ¥è¡¨ç¤ºè¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»foreign key - å¤–é”®</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢è¿™ä¸ªå‘˜å·¥çš„first_nameä»¥åŠè¿™ä¸ªå‘˜å·¥æ‰€åœ¨çš„åŒºåŸŸå.</span><br><span class="line">-- ä¸€ä¸ªåŒºåŸŸå¯¹åº”å¤šä¸ªéƒ¨é—¨,ä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥.</span><br><span class="line">select e.first_name,r.name from s_emp e,s_dept d,s_region r</span><br><span class="line">where d.region_id = r.id and e.dept_id = d.id;</span><br><span class="line"></span><br><span class="line">for( ...  s_emp e){</span><br><span class="line">	for(... s_dept d){</span><br><span class="line">	    if(e.dept_id==d.id){</span><br><span class="line">	      e+":"+d</span><br><span class="line">	    }</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="joinå’Œonå†™æ³•"><a href="#joinå’Œonå†™æ³•" class="headerlink" title="joinå’Œonå†™æ³•"></a>joinå’Œonå†™æ³•</h2><blockquote>
<p>å¦‚æœä¸€æ¡sqlè¯­å¥æ¶‰åŠåˆ°çš„è¡¨æ¯”è¾ƒå¤šçš„è¯,ä¼ ç»Ÿçš„å†™æ³•,å°±ä¸èƒ½å¾ˆç›´è§‚çš„çœ‹å‡ºæ¥å“ªä¸ªè¡¨å’Œå“ªä¸ªè¡¨ä¹‹é—´æœ‰ç›´æ¥çš„å…³ç³».</p>
<p>è¡¨ join è¡¨ on å»é™¤ç¬›å¡å°”ç§¯</p>
<p>å¤–é”®ä¸€å®šæ˜¯å‡ºç°åœ¨å¤šçš„ä¸€æ–¹</p>
<p><em><strong>on å¤šçš„ä¸€æ–¹çš„å¤–é”® = ä¸€çš„ä¸€æ–¹ä¸»é”®</strong></em></p>
<p><code>ä½†æ˜¯ä¹Ÿä¸ä¸€å®šéè¦ä½¿ç”¨å¤–é”®æ¥å»é™¤ç¬›å¡å°”ç§¯</code></p>
</blockquote>
<blockquote>
<p>è§„åˆ™: èƒ½å¤Ÿç”¨joinè¿æ¥çš„è¡¨ä¹‹é—´å¿…é¡»è¦æœ‰ç›´æ¥çš„å…³ç³».</p>
</blockquote>
<h3 id="ç»ƒä¹ -4"><a href="#ç»ƒä¹ -4" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>æ‰¾å‡ºæŸ¥è¯¢å‘˜å·¥çš„åå­—ä»¥åŠè¿™ä¸ªå‘˜å·¥çš„éƒ¨é—¨åç§°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select e.first_name,d.name from s_emp e join s_dept d on e.dept_id = d.id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºâ€™Asiaâ€™åŒºåŸŸä¸Šçš„æ‰€æœ‰çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select e.first_name,r.name from </span><br><span class="line">s_emp e join s_dept d</span><br><span class="line">on e.dept_id = d.id</span><br><span class="line">join s_region r</span><br><span class="line">on d.region_id = r.id</span><br><span class="line">where r.name='Asia';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰¾å‡ºå®¢æˆ·çš„id,åç§°,è”ç³»æ–¹å¼ä»¥åŠè¿™ä¸ªå®¢æˆ·çš„è®¢å•ä¿¡æ¯</p>
<p>â€˜é—®é¢˜ - 15rows - [201,215]â€™</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.* from s_customer c</span><br><span class="line">join s_ord o on c.id = o.customer_id;</span><br><span class="line"></span><br><span class="line">æŸ¥è¯¢å‡ºæ¥çš„ç»“æœç¼ºäº†id=207å’Œ215ä¿©ä¸ªå®¢æˆ·,å› ä¸ºè¿™ä¿©ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,æ‰€ä»¥è¿™ä¿©ä¸ªå®¢æˆ·æ²¡æœ‰æŸ¥è¯¢å‡ºæ¥.</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h2 id="è¿æ¥çš„æ–¹å¼"><a href="#è¿æ¥çš„æ–¹å¼" class="headerlink" title="è¿æ¥çš„æ–¹å¼"></a>è¿æ¥çš„æ–¹å¼</h2><blockquote>
<ol>
<li><p>å†…è¿æ¥ - [inner] join</p>
<p><code>å¦‚æœjoinå·¦è¾¹çš„è¡¨åœ¨å³è¾¹çš„è¡¨ä¸­å¦‚æœä¸å­˜è®°å½•,åˆ™ä¸ä¼šè¢«æŸ¥è¯¢å‡ºæ¥.</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_customer c</span><br><span class="line">inner join s_ord o on c.id = o.customer_id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å·¦è¿æ¥ - left join</p>
<p><code>ä»¥å·¦è¾¹çš„è¡¨ä¸ºåŸºå‡†è¡¨.å³ä½¿å·¦è¾¹çš„è¡¨åœ¨å³è¾¹çš„è¡¨ä¸­æ²¡æœ‰è®°å½•,é‚£ä¹ˆå·¦è¾¹è¡¨ä¸­çš„è¿™æ¡è®°å½•ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<p><code>æŸ¥è¯¢å®¢æˆ·å’Œè®¢å•ä¿¡æ¯,å³ä½¿è¿™ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,é‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_customer c</span><br><span class="line">left join s_ord o on c.id = o.customer_id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å³è¿æ¥ - right join</p>
<p><code>ä»¥å³è¾¹çš„è¡¨ä¸ºåŸºå‡†è¡¨.å³ä½¿å³è¾¹çš„è¡¨åœ¨å·¦è¾¹çš„è¡¨ä¸­æ²¡æœ‰è®°å½•,é‚£ä¹ˆå³è¾¹è¡¨ä¸­çš„è¿™æ¡è®°å½•ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<p><code>æŸ¥è¯¢å®¢æˆ·å’Œè®¢å•ä¿¡æ¯,å³ä½¿è¿™ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,é‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_ord o</span><br><span class="line">right join s_customer c on c.id = o.customer_id;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>äº¤å‰è¿æ¥ - cross join - ä¸ä¼šä½¿ç”¨çš„,äº§ç”Ÿçš„æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç»“æœé›† - ç¬›å¡å°”ç§¯</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_customer c</span><br><span class="line">cross join s_ord o;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å…¨è¿æ¥ full outer join - mysqlä¸æ”¯æŒ</p>
<p>å…¨è¿æ¥ = å·¦è¿æ¥ + å³è¿æ¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user;</span><br><span class="line">drop table t_info;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int primary key,</span><br><span class="line">  name varchar(20)</span><br><span class="line">);</span><br><span class="line">insert into t_user values(1,'admin');</span><br><span class="line">insert into t_user values(2,'python');</span><br><span class="line"></span><br><span class="line">create table t_info(</span><br><span class="line">	id int primary key,</span><br><span class="line">	remark varchar(20),</span><br><span class="line">	user_id int</span><br><span class="line">);</span><br><span class="line">insert into t_info values(1,'aaa',1);</span><br><span class="line">insert into t_info values(2,'bbb',3);</span><br><span class="line"></span><br><span class="line">-- åˆ†æ - å·¦è¿æ¥</span><br><span class="line">select u.*,info.* from t_user u left join t_info info on u.id = info.user_id;</span><br><span class="line">+----+--------+------+--------+---------+</span><br><span class="line">| id | name   | id   | remark | user_id |</span><br><span class="line">+----+--------+------+--------+---------+</span><br><span class="line">|  1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">|  2 | python | NULL | NULL   |    NULL |</span><br><span class="line">+----+--------+------+--------+---------+</span><br><span class="line"></span><br><span class="line">-- å³è¿æ¥</span><br><span class="line">select info.*,u.* from t_user u right join t_info info on u.id = info.user_id;</span><br><span class="line">+----+--------+---------+------+-------+</span><br><span class="line">| id | remark | user_id | id   | name  |</span><br><span class="line">+----+--------+---------+------+-------+</span><br><span class="line">|  1 | aaa    |       1 |    1 | admin |</span><br><span class="line">|  2 | bbb    |       3 | NULL | NULL  |</span><br><span class="line">+----+--------+---------+------+-------+</span><br><span class="line"></span><br><span class="line">-- å…¨è¿æ¥</span><br><span class="line">union - ä¸¤å¼ è¡¨ä¸­çš„é‡å¤çš„ç»“æœä¿ç•™äº†ä¸€æ¡ </span><br><span class="line"></span><br><span class="line">union all - ä¸¤å¼ è¡¨ä¸­çš„é‡å¤çš„ç»“æœéƒ½ä¼šå±•ç¤ºå‡ºæ¥ , å¹¶é›†</span><br><span class="line"></span><br><span class="line">select u.*,info.* from t_user u left join t_info info on u.id = info.user_id</span><br><span class="line">union all</span><br><span class="line">select u.*,info.* from t_user u right join t_info info on u.id = info.user_id;</span><br><span class="line"></span><br><span class="line"> id   | name   | id   | remark | user_id |</span><br><span class="line">+------+--------+------+--------+---------+</span><br><span class="line">|    1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">|    2 | python | NULL | NULL   |    NULL |</span><br><span class="line">|    1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">| NULL | NULL   |    2 | bbb    |       3 |</span><br><span class="line">+------+--------+------+--------+---------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select u.*,info.* from t_user u left join t_info info on u.id = info.user_id</span><br><span class="line">union </span><br><span class="line">select u.*,info.* from t_user u right join t_info info on u.id = info.user_id;</span><br><span class="line"></span><br><span class="line">+------+--------+------+--------+---------+</span><br><span class="line">| id   | name   | id   | remark | user_id |</span><br><span class="line">+------+--------+------+--------+---------+</span><br><span class="line">|    1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">|    2 | python | NULL | NULL   |    NULL |</span><br><span class="line">| NULL | NULL   |    2 | bbb    |       3 |</span><br><span class="line">+------+--------+------+--------+---------+</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -5"><a href="#ç»ƒä¹ -5" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<p>æŸ¥è¯¢å‘˜å·¥çš„åç§°ä»¥åŠä»–å¯¹åº”çš„ä¸Šå¸çš„åç§°,å³ä½¿è¿™ä¸ªå‘˜å·¥æ²¡æœ‰ä¸Šå¸,é‚£ä¹ˆä¹Ÿè¦æŸ¥è¯¢å‡ºæ¥ - è‡ªå…³è”</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select e1.first_name å‘˜å·¥,e2.first_name ä¸Šå¸</span><br><span class="line">from s_emp e1 left join s_emp e2 on e2.id = e1.manager_id;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h1 id="å¤šè¡Œå‡½æ•°"><a href="#å¤šè¡Œå‡½æ•°" class="headerlink" title="å¤šè¡Œå‡½æ•°"></a>å¤šè¡Œå‡½æ•°</h1><blockquote>
<ol>
<li><p>count - ç»Ÿè®¡ä¸ªæ•°,nullå€¼ä¸ä¼šç»Ÿè®¡,é‡å¤çš„æ•°æ®,æœ‰ä¸€ä¸ªç®—ä¸€ä¸ª</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select count(*) from s_emp;</span><br><span class="line"></span><br><span class="line">select count(e.id) from s_emp e;</span><br><span class="line"></span><br><span class="line">select count(e.commission_pct) from s_emp;//5ä¸ª</span><br><span class="line"></span><br><span class="line">-- ç»Ÿè®¡èŒç§°çš„ä¸ªæ•°,ä½†æ˜¯é‡å¤çš„èŒç§°åªèƒ½ç®—1ä¸ª</span><br><span class="line">select count(distinct title) from s_emp;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>sum - æ€»å’Œ,å¿½ç•¥nullå€¼</p>
</li>
<li><p>avg,max,min</p>
</li>
</ol>
</blockquote>
<h1 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h1><blockquote>
<p><code>åˆ†ç»„ç»Ÿè®¡</code></p>
</blockquote>
<blockquote>
<p><code>è¯­æ³•</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT è¯­å¥</span><br><span class="line">WHERE è¯­å¥</span><br><span class="line">GROUP BY è¯­å¥</span><br><span class="line">HAVING è¯­å¥</span><br><span class="line">ORDER BY è¯­å¥</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="ç»ƒä¹ -6"><a href="#ç»ƒä¹ -6" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><blockquote>
<ol>
<li><p>ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•° - å•è¡¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select e.dept_id,count(e.id) from s_emp e group by e.dept_id;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><p>ç»Ÿè®¡éƒ¨é—¨çš„id,nameä»¥åŠè¿™ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- group by + d.id  --- ok   idæ˜¯ä¸»é”®åˆ— - å”¯ä¸€æ€§</span><br><span class="line">select d.id,d.name,count(e.id) from s_emp e</span><br><span class="line">join s_dept d on e.dept_id = d.id group by d.id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select d.id,d.name,count(e.id) from s_emp e</span><br><span class="line">join s_dept d on e.dept_id = d.id group by d.name;</span><br><span class="line">ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'dy.d.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</span><br><span class="line"></span><br><span class="line">-- æ¨èselectåé¢è·Ÿçš„åˆ—(é™¤äº†ç»„å‡½æ•°/å¤šè¡Œå‡½æ•°)åº”è¯¥å’Œgroup by è·Ÿçš„åˆ—ä¿æŒä¸€è‡´</span><br><span class="line">select d.id,d.name,count(e.id) from s_emp e</span><br><span class="line">join s_dept d on e.dept_id = d.id group by d.id,d.name;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡æ¯ä¸ªèŒç§°çš„äººæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select title,count(*) from s_emp group by title;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡åŒºåŸŸid,åŒºåŸŸå,ä»¥åŠè¿™ä¸ªåŒºåŸŸä¸Šçš„å‘˜å·¥çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select r.id,r.name,count(e.id) from s_region r join s_dept d</span><br><span class="line">on d.region_id = r.id join s_emp e on e.dept_id = d.id group by r.id,r.name;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡å®¢æˆ·çš„id,nameä»¥åŠè¿™ä¸ªå®¢æˆ·çš„è®¢å•çš„æ•°é‡,æ²¡æœ‰è®¢å•,åˆ™æ˜¾ç¤º0</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,count(o.id) from s_customer c left join s_ord o</span><br><span class="line">on o.customer_id = c.id group by c.id,c.name;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡å„å¹´ä»½å…¥èŒçš„å‘˜å·¥(å¹´ä»½,å‘˜å·¥æ•°é‡)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select year(start_date),count(e.id) from s_emp e</span><br><span class="line">group by year(start_date);</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h3 id="havingä½¿ç”¨æ–¹å¼"><a href="#havingä½¿ç”¨æ–¹å¼" class="headerlink" title="havingä½¿ç”¨æ–¹å¼"></a>havingä½¿ç”¨æ–¹å¼</h3><blockquote>
<p>havingå’ŒwhereåŒºåˆ«</p>
<ol>
<li>whereæ¡ä»¶ç­›é€‰,ä½†æ˜¯åˆ†ç»„ä¹‹å‰,å¹¶ä¸”whereä¸ä¼šè·Ÿç»„å‡½æ•°</li>
<li>havingåˆ†ç»„ä¹‹åçš„è¿›ä¸€æ­¥è¿‡æ»¤,ä½¿ç”¨ç»„å‡½æ•°è¿›è¡Œè¿‡æ»¤çš„</li>
</ol>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<ol>
<li><p>æŸ¥è¯¢å‡ºå¹³å‡å·¥èµ„è¶…è¿‡1300çš„éƒ¨é—¨ - éƒ¨é—¨id,name,å¹³å‡å·¥èµ„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select d.id,d.name,avg(e.salary) from s_dept d join s_emp e</span><br><span class="line">on d.id = e.dept_id group by d.id,d.name having avg(e.salary)&gt;1300;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡é™¤äº†â€™Asiaâ€™åŒºåŸŸä¹‹å¤–çš„å„ä¸ªåŒºåŸŸçš„id,nameå’ŒåŒºåŸŸä¸Šçš„äººæ•°[å¤§äº3ä¸ª],æœ€åå†æ ¹æ®åŒºåŸŸçš„idè¿›è¡Œé™åºæ’åˆ—</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select r.id,r.name,count(e.id) from s_region r </span><br><span class="line">join s_dept d on r.id = d.region_id</span><br><span class="line">join s_emp e on e.dept_id = d.id</span><br><span class="line">where r.name&lt;&gt;'Asia'</span><br><span class="line">group by r.id,r.name</span><br><span class="line">having count(e.id)&gt;3</span><br><span class="line">order by 1 desc;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æŸ¥è¯¢æ²¡æœ‰è®¢å•çš„å®¢æˆ·</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,count(o.id) from s_customer c</span><br><span class="line">left join s_ord o on c.id = o.customer_id group by c.id,c.name having count(o.id)=0;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<h1 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h1><blockquote>
<p>å­æŸ¥è¯¢å¿…é¡»ä½¿ç”¨()æ‹¬èµ·æ¥</p>
<ul>
<li>æ¡ä»¶åˆ—</li>
<li>æŸ¥è¯¢åˆ—</li>
<li>å­æŸ¥è¯¢çš„ç»“æœçœ‹åšæ˜¯â€ä¸€å¼ è¡¨â€</li>
</ul>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<ol>
<li><p>æŸ¥æ‰¾å’ŒMarkå·¥èµ„ä¸€æ ·çš„å‘˜å·¥.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ†è§£ - markå·¥èµ„ - 1450</span><br><span class="line">select salary from s_emp where first_name='Mark';</span><br><span class="line"></span><br><span class="line">-- æ‰¾å‡º1450è–ªèµ„çš„å‘˜å·¥</span><br><span class="line">select first_name,salary from s_emp where salary = 1450 and first_name&lt;&gt;'Mark';</span><br><span class="line"></span><br><span class="line">-- æ•´åˆ</span><br><span class="line">-- å­æŸ¥è¯¢å‡ºç°åœ¨æ¡ä»¶éƒ¨åˆ†</span><br><span class="line">select first_name,salary from s_emp where salary = (select salary from s_emp where first_name='Mark')  and first_name&lt;&gt;'Mark';</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„id,nameä»¥åŠéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select d.id,d.name,(</span><br><span class="line">	select count(e.id) from s_emp e where e.dept_id = d.id</span><br><span class="line">) from s_dept d;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</blockquote>
<p><code>ç»ƒä¹ 2</code></p>
<blockquote>
<ol>
<li>ç»Ÿè®¡å®¢æˆ·çš„id,nameä»¥åŠå®¢æˆ·çš„è®¢å•æ•°é‡</li>
</ol>
 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,(select count(o.id) from s_ord o where o.customer_id = c.id) from s_customer c;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>æ‰¾å‡ºéƒ¨é—¨å¹³å‡å·¥èµ„é«˜äºå…¬å¸å¹³å‡å·¥èµ„çš„éƒ¨é—¨ä¿¡æ¯</li>
</ol>
 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select dept_id,avg(salary) from s_emp group by dept_id having avg(salary)&gt;(select avg(salary) from s_emp);</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>æ‰¾å‡ºä¸â€™Benâ€™åŒéƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯</li>
</ol>
 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- æ–¹å¼ä¸€</span><br><span class="line">select first_name,dept_id from s_emp where dept_id=(select dept_id from s_emp where first_name='Ben')</span><br><span class="line">and first_name&lt;&gt;'Ben';</span><br><span class="line"></span><br><span class="line">-- æ–¹å¼äºŒ</span><br><span class="line">select e.first_name,(select e.dept_id from s_emp e1 where e1.first_name='Ben' and e1.dept_id=e.dept_id) did from s_emp e where e.first_name&lt;&gt;'Ben';</span><br><span class="line"></span><br><span class="line">-- æ–¹å¼äºŒæ•´åˆ - æŠŠå­æŸ¥è¯¢çš„ç»“æœä½œä¸ºä¸€å¼ è¡¨,å¿…é¡»è¦åˆ«å</span><br><span class="line">select * from (select e.first_name,(select e.dept_id from s_emp e1 where e1.first_name='Ben' and e1.dept_id=e.dept_id) did from s_emp e where e.first_name&lt;&gt;'Ben') core_</span><br><span class="line">where core_.did is not null;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote>
<ol>
<li><p>èƒ½ç”¨åˆ†ç»„æŸ¥è¯¢æŸ¥è¯¢å°±ä¸è¦ä½¿ç”¨å­æŸ¥è¯¢(åµŒå¥—è¶Šå¤š,æŸ¥è¯¢æ•ˆç‡è¶Šä½)</p>
</li>
<li><p>æ— å…³å­æŸ¥è¯¢(å­æŸ¥è¯¢å¯ä»¥ç‹¬ç«‹è¿è¡Œ)å’Œç›¸å…³å­æŸ¥è¯¢(å­æŸ¥è¯¢ä½¿ç”¨åˆ°äº†å¤–éƒ¨æŸ¥è¯¢çš„ä¸œè¥¿)</p>
<p>æ— å…³å­æŸ¥è¯¢&gt;ç›¸å…³å­æŸ¥è¯¢</p>
</li>
<li><p>å­æŸ¥è¯¢ä¼šæ¯”åˆ†ç»„æŸ¥è¯¢æ›´åŠ çµæ´».</p>
</li>
</ol>
</blockquote>
<h1 id="existså’Œnot-exists"><a href="#existså’Œnot-exists" class="headerlink" title="existså’Œnot exists"></a>existså’Œnot exists</h1><blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT è¯­å¥</span><br><span class="line">WHERE exists (å­æŸ¥è¯¢)</span><br><span class="line"></span><br><span class="line">è§„åˆ™: ä¸å…³å¿ƒå­æŸ¥è¯¢æŸ¥åˆ°çš„å†…å®¹æ˜¯ä»€ä¹ˆ,å­æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæŸ¥è¯¢å‡ºç»“æœ.</span><br><span class="line">å¦‚æœæŸ¥è¯¢å‡ºç»“æœ,ç­‰åŒäºwhere true</span><br><span class="line"></span><br><span class="line">select id,first_name from s_emp where exists(select 1 from s_emp where 1=1);</span><br></pre></td></tr></tbody></table></figure>

<p><code>æ‰¾å‡ºå’Œ'Ben'åŒä¸€ä¸ªéƒ¨é—¨çš„å‘˜å·¥</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select e.first_name,e.dept_id from s_emp e </span><br><span class="line">where exists(</span><br><span class="line">select 1 from s_emp e1 where e1.first_name='Ben' and e1.dept_id = e.dept_id</span><br><span class="line">) and e.first_name&lt;&gt;'Ben';</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<p>æ‰¾å‡ºå„ä¸ªéƒ¨é—¨å·¥èµ„æ’åå‰äºŒçš„å‘˜å·¥</p>
<p>æ€è·¯: åœ¨â€™æˆ‘â€™è¿™ä¸ªéƒ¨é—¨ä¸­,æœ‰äººçš„å·¥èµ„æ¯”æˆ‘é«˜,ä½†æ˜¯æ•°é‡ä¸èƒ½è¶…è¿‡1ä¸ª</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select e.id,e.salary,e.dept_id from s_emp e</span><br><span class="line">where exists(</span><br><span class="line">	select 1 from s_emp e1 where e1.dept_id = e.dept_id and</span><br><span class="line">e1.salary&gt;e.salary having count(*)&lt;=1</span><br><span class="line">) order by 3;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<p>æ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨ä¸­å·¥èµ„æœ€é«˜çš„é‚£ä¸ªäºº</p>
</blockquote>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/08/09/mysql2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          mysql2
        
      </div>
    </a>
  
  
    <a href="/2022/08/09/%E7%B4%A2%E5%BC%95/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">ç´¢å¼•</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>






</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2022 ape_li
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/preccrep/hexo-theme-jelly" target="_blank">Jelly</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>