{"meta":{"title":"ape_li","subtitle":"","description":"","author":"ape_li","url":"https://apelisun.github.io","root":"/"},"pages":[{"title":"links","date":"2013-07-13T12:46:25.000Z","updated":"2022-08-10T09:27:17.597Z","comments":true,"path":"PY.html","permalink":"https://apelisun.github.io/PY.html","excerpt":"","text":""}],"posts":[{"title":"å‚¨å­˜å‡½æ•°è§¦å‘å™¨","slug":"å‚¨å­˜å‡½æ•°è§¦å‘å™¨","date":"2022-08-09T13:24:55.000Z","updated":"2022-08-10T03:52:49.694Z","comments":true,"path":"2022/08/09/å‚¨å­˜å‡½æ•°è§¦å‘å™¨/","link":"","permalink":"https://apelisun.github.io/2022/08/09/%E5%82%A8%E5%AD%98%E5%87%BD%E6%95%B0%E8%A7%A6%E5%8F%91%E5%99%A8/","excerpt":"","text":"#å‡½æ•°function mysqlä¸­å†…ç½®äº†å¾ˆå¤šå‡½æ•° mysql8.0ä¸æ”¯æŒåˆ›å»ºå‡½æ•°çš„è¯­æ³•çš„ è§£å†³æ–¹æ¡ˆ: åœ¨my.iniæˆ–è€…my.cnfæ–‡ä»¶ä¸‹æ·»åŠ ï¼š [mysqld] log-bin-trust-function-creators=1 æœ€åmysqlæœåŠ¡å™¨é‡å¯ åˆ›å»ºè¯­æ³• å‡½æ•°ä½“ä¸­ä¸€å®šæœ‰returnè¯­å¥ åªè¦é‡åˆ°varcharç±»å‹,å¿…é¡»è¦æŒ‡å®šå‚æ•°çš„é•¿åº¦ è¯­æ³•éƒ¨åˆ† 12345678910-- é‡æ–°å®šåˆ¶mysqlçš„ç»“æŸç¬¦å·,sqlè¯­å¥çš„ç»“æŸç¬¦å·é»˜è®¤çš„æ˜¯åˆ†å·delimiter $$ create function å‡½æ•°å([å˜é‡å æ•°æ®ç±»å‹(é•¿åº¦)]) returns è¿”å›ç±»å‹begin -- -- å‡½æ•°ä½“ return ç»“æœ;end $$ delimiter ; ç»ƒä¹  ä¼ å…¥ä¿©ä¸ªæ•´æ•°,è¿”å›ä¿©ä¸ªæ•´æ•°çš„ç›¸åŠ çš„ç»“æœ 123456789delimiter //create function dy_add(a int,b int) returns intbegin return a + b;end //delimiter ;-- è°ƒç”¨å‡½æ•°select dy_add(50,10); ç»ƒä¹  å†™ä¸€ä¸ªå‡½æ•°å¯ä»¥å®ç°æ—¥æœŸè½¬æˆæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²xxxxå¹´xxæœˆxxæ—¥ 123456789101112date_format(date,pattern)drop function dy_format;delimiter //create function dy_format(dt date) returns varchar(20)begin return date_format(dt,'%Yå¹´%mæœˆ%dæ—¥');end //delimiter ;select dy_format(now()); è¯­å¥è¯­æ³• while..do..end while æ±‚å‡º1~xä¹‹é—´çš„æ€»å’Œ 12345678910111213141516171819drop function x_add;delimiter //create function x_add(x int) returns intbegin -- å¾ªç¯å˜é‡å› å­,å±€éƒ¨å˜é‡ declare i int default 1; -- å®šä¹‰ä¸€ä¸ªå˜é‡,ç”¨æ¥ä¿å­˜æ€»çš„å’Œ declare sums int default 0; while i&lt;=x do -- å¯¹å·²ç»å£°æ˜è¿‡çš„å˜é‡è¿›è¡Œèµ‹å€¼æ“ä½œ set sums = sums + i; set i = i + 1; end while; return sums;end //delimiter ;select x_add(100); åˆ†æ”¯è¯­å¥if â€¦ thenâ€¦end if 12345678910111213141516 -- æ±‚å‡º1~xä¹‹é—´å¥‡æ•°çš„æ€»å’Œdrop function ji_add; delimiter //create function ji_add(x int) returns intbegin declare i int default 1; declare sums int default 0; while i&lt;=x do if i%2!=0 then set sums = sums+i; end if; set i = i + 1; end while; return sums;end //delimiter ; 1select ji_add(100); å…¨å±€å˜é‡ æ±‚å‡º1~xä¹‹é—´çš„æ•°å­—ä¹‹å’Œ,ä½†æ˜¯ä¸åŒ…æ‹¬5çš„å€æ•° 1234567891011121314151617181920212223242526drop function my_add;delimiter //create function my_add(x int) returns intbegin -- å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ declare i int default 1; -- å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡,ç”¨æ¥å­˜å‚¨æ€»å’Œ -- å…¨å±€å˜é‡ @å˜é‡å -- ç³»ç»Ÿçš„å…¨å±€å˜é‡ @@tx_isolation set @sums = 0; -- å¯¹è¯­å¥ç‰‡æ®µè¿›è¡Œä¸€ä¸ªå‘½å - ç±»ä¼¼äºjavaä¸­çš„continueè¯­å¥ -- å‘½åæ˜¯ä»»æ„çš„ success:while i&lt;=x do -- mysqlä¸­åˆ¤æ–­æ˜¯å¦ç›¸ç­‰,= if i%5=0 then set i = i + 1; -- continue - è·³è¿‡æœ¬è½®å¾ªç¯,ç»§ç»­ä¸‹ä¸€è½®å¾ªç¯ iterate success; end if; set @sums = @sums + i; set i = i + 1; end while; return @sums;end //delimiter ; 1234select my_add(100);-- å…¨å±€å˜é‡,åœ¨å‡½æ•°ä½“å¤–è°ƒç”¨select @sums; å­˜å‚¨è¿‡ç¨‹ å®šä¹‰:ä¸ºäº†å®Œæˆä¸€äº›ç‰¹å®šçš„å·¥ç¨‹,æå‰å°†sqlè¯­å¥é¢„ç¼–è¯‘å¥½,å­˜å‚¨åœ¨åœ¨mysql-serverç«¯.å¹¶ä¸”åªä¼šç¼–è¯‘ä¸€æ¬¡.åé¢ç›´æ¥è°ƒç”¨ å­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™,æ˜¯ä¸éœ€è¦å†æ¬¡å¯¹sqlè¯­å¥è¿›è¡Œç¼–è¯‘äº†,æé«˜æ€§èƒ½. å­˜å‚¨è¿‡ç¨‹å¯ä»¥åšåˆ°æ ‡å‡†çš„ç»„ä»¶ç¼–ç¨‹[æŠŠsqlå°è£…å¥½,å½¢æˆä¸€ä¸ªç»„ä»¶] sqlæ‰§è¡Œçš„è¿‡ç¨‹ mysql-client å®¢æˆ·ç«¯ç¼–å†™sqlè¯­å¥ mysql&gt; select * from s_emp; å°†è¿™ä¸ªå®¢æˆ·ç«¯çš„sqlå‘é€åˆ°mysql-serverç«¯,éœ€è¦å¯¹è¿™æ¡sqlè¿›è¡Œç¼–è¯‘[æ£€æµ‹è¯­æ³•]ä»¥åŠè§£æ. mysql-serverå°†è§£æä¹‹åçš„ç»“æœè¿”å›ç»™mysql-client; åœ¨æ²¡æœ‰ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ä¹‹å‰,åªè¦å°†sqlè¯­å¥å‘é€åˆ°mysql-serverç«¯,æ¯æ¬¡éƒ½æ˜¯éœ€è¦å¯¹sqlè¿›è¡Œç¼–è¯‘çš„.æ¯”è¾ƒæµªè´¹æ—¶é—´. è¯­æ³•12345678910-- åˆ é™¤å­˜å‚¨è¿‡ç¨‹drop procedure å­˜å‚¨è¿‡ç¨‹å;-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹delimiter //create procedure å­˜å‚¨è¿‡ç¨‹å([in|out] å˜é‡å æ•°æ®ç±»å‹)begin -- è¿‡ç¨‹ä½“end //delimiter ; ä½“éªŒ123456789-- æŠŠs_empè¡¨ä¸­çš„å‘˜å·¥çš„å¹³å‡è–ªèµ„é¢„ç¼–è¯‘å¥½åœ¨mysql-serverç«¯å­˜å‚¨delimiter //create procedure pro_sal()begin select avg(salary) from s_emp;end //delimiter ;call pro_sal(); in - æ¥å—å‚æ•°123456789101112drop procedure in_pro;delimiter //create procedure in_pro(in a int)begin -- è¾“å‡ºSystem.out.println(a) -- å˜é‡aæ˜¯å¦æœ‰è¾“å‡º select a; -- set @i = 900,ä½†æ˜¯inæ¥ä¿®é¥°çš„ set a = 900;end //delimiter ; 1234567-- ç›´æ¥æ¥å—ä¸€ä¸ªå­—é¢é‡call in_pro(10);-- æ¥å—ä¸€ä¸ªå…¨å±€å˜é‡set @a=10;call in_pro(@a);-- 10select @a; out - è¿”å›ç»“æœ123456789101112drop procedure out_pro;delimiter //create procedure out_pro(out a int)begin -- è¾“å‡ºSystem.out.println(a) -- outä¿®é¥°çš„ - ä¸èƒ½å¤Ÿæ¥å—å¤–é¢ä¼ è¿›æ¥çš„å‚æ•° select a; -- ç»™aé‡æ–°èµ‹å€¼ - set @i = 800 set a = 800;end //delimiter ; 1234567891011121314151617181920-- æ³¨æ„ç‚¹:å¦‚æœå‚æ•°ä½¿ç”¨out,é‚£ä¹ˆæ­¤å¤„æ˜¯ä¸å…è®¸ç›´æ¥ä½¿ç”¨å­—é¢é‡è¿›è¡Œä¼ å‚call out_pro(100);ERROR 1414 (42000): OUT or INOUT argument 1 for routine dy.out_pro is not a variable or NEW pseudo-variable in BEFORE trigger-- åªèƒ½ä½¿ç”¨å…¨å±€å˜é‡è¿›è¡Œä¼ å‚set @i = 100;call out_pro(@i);-- å‘ç°aä¸ºnull+------+| a |+------+| NULL |+------+select @i;+------+| @i |+------+| 800 |+------+ ç»ƒä¹  - å°è£…å•ä¸ªç»“æœé›†æ–¹å¼ä¸€ æ ¹æ®å‘˜å·¥çš„idæ¥è¿”å›å‘˜å·¥çš„åç§°,è–ªèµ„ å’Œè¡¨ç»“åˆä¸€èµ·ä½¿ç”¨çš„è¯,æ•°æ®ç±»å‹å’Œè¡¨ç»Ÿä¸€ 123456789101112drop procedure find_pro;delimiter //create procedure find_pro(in eid int(7),out fname varchar(20),out sal float(11,2))begin select first_name into fname from s_emp where id=eid; select salary into sal from s_emp where id=eid;end //delimiter ;call find_pro(1,@fname,@sal);select @fname;select @sal; æ–¹å¼äºŒ ç»Ÿä¸€èµ‹å€¼ 1234567891011drop procedure find_pro;delimiter //create procedure find_pro(in eid int(7),out fname varchar(20),out sal float(11,2))begin select first_name,salary into fname,sal from s_emp where id=eid;end //delimiter ;call find_pro(1,@fname,@sal);select @fname;select @sal; ç»ƒä¹  - å°è£…å¤šä¸ªç»“æœé›† ä¼ ç»Ÿçš„åšæ³• - å·²ç»è¢«å¼ƒç”¨äº† - æ€§èƒ½æ¯”è¾ƒä½ - æ¸¸æ ‡ å®šä¹‰ç¬¬ä¸‰å¼ è¡¨æ¥å­˜å‚¨å¤šä¸ªç»“æœé›† 12345678910111213-- æ„å»ºä¸´æ—¶è¡¨ - ç»“æœé›†create table emp_copy as select first_name,salary from s_emp where 1=2;drop procedure find_pro;delimiter //create procedure find_pro(in eid int(7))begin insert into emp_copy(first_name,salary) select first_name,salary from s_emp where id&gt;eid;end //delimiter ;call find_pro(20);select * from emp_copy; ç»ƒä¹  - å¸¦äº‹åŠ¡ è½¬è´¦åŠŸèƒ½ - è¦ä¹ˆåŒæ—¶æˆåŠŸ,è¦ä¹ˆåŒæ—¶å¤±è´¥ 12345678910111213141516171819202122232425262728drop procedure transfer_pro;delimiter //create procedure transfer_pro(in sid int(7),in tid int(7),in money double(10,2),in st int(7))begin -- å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡,ç”¨æ¥å±•ç¤ºæ˜¯å¦è½¬è´¦æˆåŠŸ declare msg varchar(20) default '';-- æ‰‹åŠ¨å¼€å¯å¤±è´¥start transaction;-- ç¬¬ä¸€æ¡sqlupdate t_acc set balance = balance - money where id = sid;-- æ•…æ„æäº‹æƒ…if st=1 then set msg = 'sorry,è½¬è´¦å¤±è´¥!'; -- äº‹åŠ¡å›æ»š rollback;else -- ç¬¬äºŒæ¡sql update t_acc set balance = balance + money where id = tid; set msg = 'good,è½¬è´¦æˆåŠŸ!'; -- æ‰‹åŠ¨æäº¤äº‹åŠ¡ commit;end if;select msg;end //delimiter ; 12345-- è½¬è´¦æˆåŠŸcall transfer_pro(1,2,1000,2);-- è½¬è´¦å¤±è´¥call transfer_pro(1,2,1000,1); è¯­å¥ä½¿ç”¨æ¡ä»¶åˆ†æ”¯è¯­å¥ if æ¡ä»¶è¡¨è¾¾å¼ then elseif â€¦ then â€¦ elseâ€¦end if; 1234567891011121314151617drop procedure if_pro;delimiter //create procedure if_pro(in a int)begin declare msg varchar(20) default ''; if a&gt;=90 then set msg = 'ä¼˜ç§€'; elseif a&gt;=80 then set msg = 'è‰¯å¥½'; elseif a&gt;=60 then set msg = 'ä¸­ç­‰'; else set msg='ä¸åŠæ ¼'; end if; select msg;end //delimiter ; 1call if_pro(85); case .. when å›ºå®šçš„å€¼ then .. else .. end case 12345678910111213141516drop procedure case_pro;delimiter //create procedure case_pro(in a int)begin declare msg varchar(20) default ''; case a when 1 then set msg = '1'; when 2 then set msg = '2'; else set msg = '3'; end case; select msg;end //delimiter ; 1call case_pro(2); å¾ªç¯è¯­å¥ while â€¦ do .. end while 1234567891011121314151617181920drop procedure while_pro;delimiter //create procedure while_pro(in x int,out result int) begin -- å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ int i = 1 declare i int default 1; -- ä¿å­˜æœ€ç»ˆçš„æ€»å’Œ declare sums int default 0; -- å¾ªç¯ while i&lt;=x do -- sumsè‡ªå¢1 set sums = sums + i; -- iåº”è¯¥è¦è‡ªå¢1 set i = i + 1; end while; -- select sums; set result = sums;end //delimiter ; 12call while_pro(100,@result);select @result; loop .. end loop - ç±»ä¼¼äºjavaä¸­çš„while(true) 12345678910111213141516171819202122-- 1~xdrop procedure loop_pro;delimiter //create procedure loop_pro(in x int)begin declare i int default 1; declare sums int default 0; success:loop if i&gt;x then -- æ‰“ç ´å¾ªç¯çš„è¯­å¥ -- iterate success; ç±»ä¼¼äºcontinue -- ç±»ä¼¼äºbreak leave success; end if; set sums = sums + i; set i = i + 1; end loop; select sums;end //delimiter ; 1call loop_pro(100); repeat â€¦ until â€¦ end repeat 12345678910111213drop procedure repeat_pro;delimiter //create procedure repeat_pro(in x int)begin -- ä½†æ˜¯å…ˆè¿›å…¥åˆ°è¿™ä¸ªå¾ªç¯ä½“ä¸­å…ˆæ‰§è¡Œä¸€é,ç„¶åå†è¿›è¡Œåˆ¤æ–­ repeat set x = x + 1; select x; -- å¦‚æœx&gt;0,å¾ªç¯åœæ­¢äº† until x&gt;0 end repeat;end //delimiter ; 1call repeat_pro(1); å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„åŒºåˆ« å®šä¹‰å‡½æ•°çš„æ—¶å€™,åœ¨å‡½æ•°çš„ç­¾åä¸Šå¿…é¡»è¦æŒ‡å®šreturnsè¿”å›ç±»å‹,å®šä¹‰å­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™ä¸éœ€è¦ä½¿ç”¨returnsæ¥æŒ‡å®šè¿”å›ç±»å‹ å‡½æ•°ä½“ä¸­å¿…é¡»è¦æœ‰returnè¯­å¥æ¥è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœ,ä½†æ˜¯å­˜å‚¨è¿‡ç¨‹ä¸­å¯ä»¥æ²¡æœ‰returnè¯­å¥ è°ƒç”¨å‡½æ•°ä½¿ç”¨select,è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ä½¿ç”¨call å­˜å‚¨è¿‡ç¨‹æ›´åŠ ä¾§é‡äºsqlçš„å°è£…ä»¥åŠsqlçš„é¢„ç¼–è¯‘,æé«˜æ•ˆç‡å’Œå®‰å…¨å’Œsqlçš„å¤ç”¨æ€§ å­˜å‚¨è¿‡ç¨‹å¿…é¡»è¦ä½¿ç”¨inæ¥æ¥å—å‚æ•°,ä½¿ç”¨outæ¥è¿”å›ç»“æœ è§¦å‘å™¨åœ¨myqlä¸­,å½“æˆ‘ä»¬æ‰§è¡Œä¸€äº›æ“ä½œçš„æ—¶å€™,æ¯”å¦‚DMLæ“ä½œ(è§¦å‘å™¨è§¦å‘çš„äº‹ä»¶),ä¸€æ—¦äº‹ä»¶è¢«è§¦å‘,é‚£ä¹ˆ å°±ä¼šæ‰§è¡Œä¸€æ®µç¨‹åº.è§¦å‘å™¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹. åˆ†ç±» afterè§¦å‘å™¨ - åœ¨è§¦å‘æ¡ä»¶ä¹‹åæ‰§è¡Œ beforeè§¦å‘å™¨ - åœ¨è§¦å‘æ¡ä»¶ä¹‹å‰æ‰§è¡Œ è¯­æ³•123456789101112-- åˆ é™¤è§¦å‘å™¨drop trigger è§¦å‘å™¨åç§°;delimiter $$-- åˆ›å»ºè§¦å‘å™¨create trigger è§¦å‘å™¨åè§¦å‘æ—¶æœº(after,before) è§¦å‘äº‹ä»¶(insert,delete,update) on è§¦å‘å™¨äº‹ä»¶æ‰€åœ¨çš„è¡¨åfor each row-- è§¦å‘å™¨éœ€è¦æ‰§è¡Œçš„é€»è¾‘.beginend$$delimiter ; ç»ƒä¹ 1create table t_acc_copy as select * from t_acc where 1=2; åˆ é™¤t_accè¡¨ä¸­çš„ä»»æ„ä¸€æ¡æ•°æ®ä¹‹å,ä¼šåœ¨t_acc_copyè¡¨ä¸­æ’å…¥ä¸€æ¡. 123456789drop trigger acc_tri;delimiter //create trigger acc_triafter delete on t_accfor each rowbegin insert into t_acc_copy values(old.id,old.balance);end //delimiter ; 12345678910mysql&gt; delete from t_acc where id=1;Query OK, 1 row affected (0.00 sec)mysql&gt; select * from t_acc_copy;+------+---------+| id | balance |+------+---------+| 1 | 1000.00 |+------+---------+1 row in set (0.00 sec) çº§è”åˆ é™¤ - åˆ é™¤t_customerä¸­çš„å®¢æˆ·ä¿¡æ¯ä¹‹å‰éœ€è¦çº§è”åˆ é™¤è¯¥å®¢æˆ·çš„è®¢å•ä¿¡æ¯ 1234567891011drop trigger acc_tri;delimiter //create trigger cus_tribefore delete on t_customerfor each rowbegin delete from t_ord where customer_id=old.id;end //delimiter ;delete from t_customer where id=2; oracleä¸­æ”¯æŒè‡ªæ£€çº¦æŸcheck 123456789101112131415161718drop table cks;create table cks( id int(7) primary key auto_increment, age int(7));insert into cks values(1,30);insert into cks values(2,30);auto_increment ä¸»é”®è‡ªå¢é•¿çš„ç­–ç•¥,é»˜è®¤å€¼æ˜¯ä»1å¼€å§‹,æ­¥é•¿ä¸º1. ä¸»é”®åˆ—ä¸éœ€è¦è®¾ç½®å€¼insert into cks(age) values(20);insert into cks(age) values(30);delete from cks where id=2;insert into cks(age) values(40);select * from cks;-- auto_increment - ä¸»é”®åˆ—æ•°æ®ç±»å‹ä¸èƒ½æ˜¯varchar-- auto_incrementåˆ°è¾¾æœ€å¤§å€¼ mysqlç”¨è§¦å‘å™¨æ¥å®ç°è‡ªæ£€çº¦æŸ 1234567891011121314-- æ’å…¥ageåªèƒ½åœ¨(0,18]åŒºé—´,å¦åˆ™æŠ¥é”™.drop trigger cks_tri;delimiter //create trigger cks_tribefore insert on cksfor each rowbegin if new.age&lt;0 or new.age&gt;18 then signal sqlstate '42000' set message_text='ageå¿…é¡»åœ¨0~18åŒºé—´'; end if;end //delimiter ;insert into cks(age) values(200);","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://apelisun.github.io/tags/mysql/"},{"name":"procedure","slug":"procedure","permalink":"https://apelisun.github.io/tags/procedure/"}]},{"title":"B+æ ‘","slug":"B+æ ‘","date":"2022-08-09T13:24:28.000Z","updated":"2022-08-10T09:46:50.985Z","comments":true,"path":"2022/08/09/B+æ ‘/","link":"","permalink":"https://apelisun.github.io/2022/08/09/B+%E6%A0%91/","excerpt":"","text":"ç´¢å¼•åº•å±‚åŸç† è§£é‡Šåº•å±‚çš„ç´¢å¼•çš„æ•°æ®ç»“æ„ - b+æ ‘ B+æ ‘ InnoDB å­˜å‚¨å¼•æ“ä¸­çš„ B+ æ ‘ç´¢å¼•ã€‚è¦ä»‹ç» B+ æ ‘ç´¢å¼•ï¼Œå°±ä¸å¾—ä¸æäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œ å¹³è¡¡äºŒå‰æ ‘å’Œ B æ ‘è¿™ä¸‰ç§æ•°æ®ç»“æ„ã€‚B+ æ ‘å°±æ˜¯ä»ä»–ä»¬ä»¨æ¼”åŒ–æ¥çš„ã€‚ ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶ - innodbä¸­ - åˆäºŒä¸ºä¸€çš„ - åªæœ‰1ä¸ªæ–‡ä»¶ ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶ - myisamä¸­ - åˆ†å¼€ç‹¬ç«‹çš„ - ä¿©ä¸ªæ–‡ä»¶ äºŒå‰æ ‘ èŠ‚ç‚¹(æ¯ä¸ªåœ†åœˆåœˆ)ä¸­å­˜å‚¨äº†é”®ï¼ˆkey - ä¸»é”®ç´¢å¼•åˆ—ï¼‰å’Œæ•°æ®ï¼ˆdata - æ¯ä¸€ä¸ªè¡Œè®°å½•ï¼‰ã€‚é”®å¯¹åº” user è¡¨ä¸­çš„ idï¼Œæ•°æ®å¯¹åº” user è¡¨ä¸­çš„è¡Œæ•°æ®ã€‚ äºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹å°±æ˜¯ä»»ä½•èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹çš„é”®å€¼éƒ½å°äºå½“å‰èŠ‚ç‚¹çš„é”®å€¼ï¼Œå³å­èŠ‚ç‚¹çš„é”®å€¼éƒ½å¤§äºå½“å‰èŠ‚ç‚¹çš„é”®å€¼ã€‚é¡¶ç«¯çš„èŠ‚ç‚¹æˆ‘ä»¬ç§°ä¸ºæ ¹èŠ‚ç‚¹ï¼Œæ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹æˆ‘ä»¬ç§°ä¹‹ä¸ºå¶èŠ‚ç‚¹ã€‚ å¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ id=12 çš„ç”¨æˆ·ä¿¡æ¯ï¼Œåˆ©ç”¨æˆ‘ä»¬åˆ›å»ºçš„äºŒå‰æŸ¥æ‰¾æ ‘ç´¢å¼•ï¼ŒæŸ¥æ‰¾æµç¨‹å¦‚ä¸‹ï¼š id=12å…ˆå’Œæ ¹èŠ‚ç‚¹[åªæœ‰ä¸€ä¸ª]key=10,å‘ç°id=12&gt;id=10 - é¡ºåˆ©å‘ç€æ ¹èŠ‚ç‚¹çš„å³è¾¹å»åŒ¹é… id=12å’Œéå¶èŠ‚ç‚¹id=13çš„è¿›è¡ŒåŒ¹é…,é¡ºåˆ©æ‰§è¡Œid=13çš„å·¦è¾¹ id=12å’Œid=12æ¯”è¾ƒ - ä¸¤è€…æ˜¯ç›¸åŒçš„.ç”±äºæ¯ä¸ªèŠ‚ç‚¹é™¤äº†ä¿å­˜keyè¿˜ä¿å­˜äº†value[è¡Œè®°å½• - è¡ŒçœŸå®çš„è¡Œæ•°æ®] ç›´æ¥å°†è¿™ä¸ªèŠ‚ç‚¹çš„valueç›´æ¥å–å‡ºæ¥äº†. æ€»ç»“ - æ€»å…±åŒ¹é…äº†3æ¬¡å°±å¯ä»¥é¡ºåˆ©æ‰¾åˆ°æˆ‘ä»¬çš„æ•°æ®. å¦‚æœæ²¡æœ‰åˆ›å»ºäºŒå‰æ ‘ç´¢å¼•.æŸ¥æ‰¾id=12,å¿…ç„¶ä¼šè¿›è¡Œå…¨è¡¨æ‰«æ.ä»è¡¨çš„ç¬¬ä¸€è¡Œå‘ä¸‹æ‰¾.æœ€å¥½çš„çŠ¶æ€ä¹Ÿå¾—æ‰¾6æ¬¡ å¹³è¡¡äºŒå‰æ ‘äºŒå‰æ ‘å¸¦æ¥çš„å¼Šç«¯ äºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹å°±æ˜¯ä»»ä½•èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹çš„é”®å€¼éƒ½å°äºå½“å‰èŠ‚ç‚¹çš„é”®å€¼ï¼Œå³å­èŠ‚ç‚¹çš„é”®å€¼éƒ½å¤§äºå½“å‰èŠ‚ç‚¹çš„é”®å€¼ äºŒå‰æ ‘åœ¨æç«¯çš„åœºæ™¯ä¸‹æœ‰å¯èƒ½æˆä¸ºä¸€ä¸ªé“¾è¡¨çš„ç»“æ„[é“¾è¡¨çš„æŸ¥è¯¢æ•ˆç‡å¾ˆä½å¾ˆä½çš„.] æŸ¥æ‰¾id=12,â€é“¾è¡¨ç»“æ„â€,åªèƒ½ä»é“¾è¡¨çš„å¤´èŠ‚ç‚¹å¼€å§‹æŸ¥æ‰¾,æœ€ä½³çŠ¶æ€ä¹Ÿå¾—å¯»æ‰¾æ‰¾äº†5æ¬¡. AVLä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜[é˜²æ­¢äºŒå‰æ ‘å˜æˆäº†é“¾è¡¨ç»“æ„å¯¼è‡´æŸ¥è¯¢æ•ˆç‡ä¾ç„¶ä½ä¸‹]ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯äºŒå‰æŸ¥æ‰¾æ ‘ä¸€ç›´ä¿æŒå¹³è¡¡ï¼Œå°±éœ€è¦ç”¨åˆ°å¹³è¡¡äºŒå‰æ ‘. å¹³è¡¡äºŒå‰æ ‘åˆç§° AVL æ ‘ï¼Œåœ¨æ»¡è¶³äºŒå‰æŸ¥æ‰¾æ ‘ç‰¹æ€§çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸èƒ½è¶…è¿‡ 1ã€‚ ä¸‹é¢æ˜¯å¹³è¡¡äºŒå‰æ ‘å’Œéå¹³è¡¡äºŒå‰æ ‘çš„å¯¹æ¯”ï¼š åªè¦æ‰¾åˆ°ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®çš„ç»å¯¹å€¼å¤§äº1 - éå¹³è¡¡äºŒå‰æ ‘ 123èŠ‚ç‚¹45 - å·¦å­æ ‘é«˜åº¦ = å·¦è¾¹çš„å­èŠ‚ç‚¹çš„ä¸ªæ•° = 2 - å³å­æ ‘é«˜åº¦ = å³è¾¹æ²¡æœ‰èŠ‚ç‚¹ = 0 - |é«˜åº¦å·®|=2&gt;1 Bæ ‘ å¹³è¡¡äºŒå‰æ ‘æš´éœ²å‡ºæ¥äº†ä¸€äº›ç¼ºç‚¹: æ¯ä¸ªèŠ‚ç‚¹ä»…ä»…ä¿å­˜ä¸€ä¸ªkey-valueé”®å€¼å¯¹[æ¯ä¸ªèŠ‚ç‚¹å¯ä¿å­˜çš„é”®å€¼å¯¹æ•°æ®å¤ªå°‘äº†].æ¯æ¬¡è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™,å®é™…ä¸Šéƒ½æ˜¯éœ€è¦ä»ç£ç›˜ä¸­è¯»å–æ•°æ®çš„. é‚£æˆ‘ä»¬æ¯æŸ¥æ‰¾ä¸€æ¬¡æ•°æ®å°±éœ€è¦ä»ç£ç›˜ä¸­è¯»å–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸€ä¸ªç£ç›˜å— ç”±äºæ¯ä¸ªèŠ‚ç‚¹å¯ä¿å­˜çš„æ•°æ®ä¸å¤š,ä»…ä»…ä¿å­˜äº†ä¸€ä¸ªkey-value.åœ¨æŸ¥æ‰¾æ•°æ®çš„è¿‡ç¨‹ä¸­,å®ƒå°±ä¸æ–­å»å’Œç£ç›˜è¿›è¡ŒIOäº¤äº’. å¯¼è‡´å¹³è¡¡äºŒå‰æ ‘çš„èŠ‚ç‚¹æ¯”è¾ƒå¤š.ä¹Ÿå°±å¯¼è‡´äº†å¹³è¡¡äºŒå‰æ ‘çš„é«˜åº¦æ¯”è¾ƒé«˜ - å¯¼è‡´æ¯”è¾ƒçš„æ¬¡æ•°æ¯”è¾ƒå¤š - é¢‘ç¹å’ŒIOè¿›è¡Œäº¤äº’ - æŸ¥è¯¢æ•ˆç‡ä½ä¸‹. ä¸ºäº†è§£å†³å¹³è¡¡äºŒå‰æ ‘çš„é«˜åº¦å¤ªé«˜é—®é¢˜.Bæ ‘ç™»åœºäº†. Bæ ‘ç‰¹ç‚¹ æ ¹èŠ‚ç‚¹[ç¬¬ä¸€é¡µ] - æ°¸é©»å†…å­˜. æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ä¿å­˜å¤šä¸ªkey-value - å¯¼è‡´å­èŠ‚ç‚¹ä¹Ÿä¼šå¢å¤š.Bæ ‘åˆçŸ®åˆèƒ–. æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ - å¶èŠ‚ç‚¹,æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ - éå¶èŠ‚ç‚¹ Bæ ‘çš„mé˜¶ - må€¼å°±æ˜¯çœ‹å®ƒæœ€å¤§çš„å­èŠ‚ç‚¹çš„ä¸ªæ•° - 3 , ä¸‹é¢çš„å›¾ä»£è¡¨çš„å°±æ˜¯3é˜¶bæ ‘. å¦‚æœæœ‰10äº¿æ¡æ•°æ®,åªéœ€è¦å’Œç£ç›˜è¿›è¡Œäº¤äº’2æ¬¡.æŠŠç£ç›˜å—ä¸­çš„ä¸€é¡µæ•°æ®[16kb]å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­. é¡µpageçš„æ¦‚å¿µ - é‚£æˆ‘ä»¬æ¯æŸ¥æ‰¾ä¸€æ¬¡æ•°æ®å°±éœ€è¦ä»ç£ç›˜ä¸­è¯»å–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸€ä¸ªç£ç›˜å— è¯»å–çš„å•ä½æ˜¯ - é¡µ - 1é¡µçš„ç£ç›˜å—çš„æ•°æ®å¤§å°æ˜¯16kb,æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æ›´å¤šçš„key-value é¡µä¸ä¹Ÿä¹‹é—´æ˜¯ä¸€ä¸ªé“¾è¡¨çš„ç»“æ„ æŸ¥æ‰¾id=28çš„æ•°æ® - ç£ç›˜äº¤äº’äº†3æ¬¡ â‘ id=28åˆ°ç¬¬ä¸€é¡µä¸­è¿›è¡ŒåŒ¹é…,å‘ç°id=28åœ¨17å’Œ35ä¹‹é—´,è·å–p2æŒ‡é’ˆ.p2æŒ‡å‘åˆ°é¡µ3 â‘¡å®šä½åˆ°é¡µ3,å‘ç°id=28åœ¨26~30ä¹‹é—´,ç»§ç»­æ‹¿åˆ°p2æŒ‡é’ˆ,p2æŒ‡å‘çš„æ˜¯é¡µ8 â‘¢å®šä½åˆ°é¡µ8,é¡ºåˆ©åŒ¹é…æŸ¥æ‰¾åˆ°id=28è¿™æ¡æ•°æ® B+æ ‘ æ˜¯Innodbå’Œmyisamå­˜å‚¨å¼•æ“ä¸­ç´¢å¼•åº•å±‚çš„æ•°æ®ç»“æ„ - B+æ ‘ Bæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸­ä¸ä»…ä»…å­˜å‚¨key[ç´¢å¼•åˆ—å€¼,ä¸»é”®åˆ—å€¼],è¿˜å­˜å‚¨äº†æ•°æ®.å› ä¸ºæ•°æ®åº“ä¸­çš„é¡µçš„å¤§å°æ˜¯å›ºå®šçš„[Innodbé»˜è®¤æ˜¯16kb], å¯¼è‡´æ¯ä¸ªèŠ‚ç‚¹çš„å­˜å‚¨èµ„æºæœ‰ç‚¹æµªè´¹äº†. B+æ ‘å’ŒBæ ‘çš„é‡è¦åŒºåˆ«å°±æ˜¯ B+æ ‘ä¸­éå¶èŠ‚ç‚¹,ä»…ä»…ä¿å­˜äº†keyå€¼[ç´¢å¼•åˆ—,ä¸»é”®åˆ—å€¼],æ²¡æœ‰ä¿å­˜æ•°æ®.æ¯ä¸ªéå¶èŠ‚ç‚¹å¯ä»¥ä¿å­˜æ›´å¤šçš„key B+æ ‘ä¸­ç´¢å¼•çš„æ‰€æœ‰çš„æ•°æ®éƒ½æ”¾åœ¨äº†å¶å­èŠ‚ç‚¹ä¸­,è€Œä¸”æ˜¯æŒ‰ç…§é¡ºåºæ’åˆ—çš„. **é¡µä¸é¡µä¹‹é—´æ˜¯åŒå‘é“¾è¡¨ç»“æ„,**å¶èŠ‚ç‚¹ä¸­çš„æ¯ä¸ªæ•°æ®èŠ‚ç‚¹å•å‘é“¾è¡¨ ä¸‹é¢è¿™ä¸ªå›¾å±•ç¤ºçš„æ˜¯Innodbä¸­çš„ç´¢å¼•çš„ç»“æ„.å¹¶ä¸æ˜¯Myisamä¸­ç´¢å¼•çš„ç»“æ„ ä»¥ä¸‹å›¾ç¤ºæœ¬è´¨ä¸Šå°±æ˜¯èšç°‡ç´¢å¼•[ä¸»é”®åˆ—ç´¢å¼•]çš„æ–¹å¼ - key - ä¸»é”®åˆ— èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•åœ¨ä¸ŠèŠ‚ä»‹ç» B+ æ ‘ç´¢å¼•çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°äº†å›¾ä¸­çš„ç´¢å¼•å…¶å®æ˜¯èšé›†ç´¢å¼•çš„å®ç°æ–¹å¼ã€‚ é‚£ä»€ä¹ˆæ˜¯èšé›†ç´¢å¼•å‘¢ï¼Ÿåœ¨ MySQL ä¸­ï¼ŒB+ æ ‘ç´¢å¼•æŒ‰ç…§å­˜å‚¨æ–¹å¼çš„ä¸åŒåˆ†ä¸ºèšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ã€‚ è¿™é‡Œæˆ‘ä»¬ç€é‡ä»‹ç» InnoDB ä¸­çš„èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ï¼š èšé›†ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰ï¼šä»¥ InnoDB ä½œä¸ºå­˜å‚¨å¼•æ“çš„è¡¨ï¼Œè¡¨ä¸­çš„æ•°æ®éƒ½ä¼šæœ‰ä¸€ä¸ªä¸»é”®ï¼Œå³ä½¿ä½ ä¸åˆ›å»ºä¸»é”®ï¼Œç³»ç»Ÿä¹Ÿä¼šå¸®ä½ åˆ›å»ºä¸€ä¸ªéšå¼çš„ä¸»é”®ã€‚ è¿™æ˜¯å› ä¸º InnoDB æ˜¯æŠŠæ•°æ®å­˜æ”¾åœ¨ B+ æ ‘ä¸­çš„ï¼Œè€Œ B+ æ ‘çš„é”®å€¼å°±æ˜¯ä¸»é”®ï¼Œåœ¨ B+ æ ‘çš„å¶å­èŠ‚ç‚¹ä¸­ï¼Œå­˜å‚¨äº†è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ã€‚ è¿™ç§ä»¥ä¸»é”®ä½œä¸º B+ æ ‘ç´¢å¼•çš„é”®å€¼è€Œæ„å»ºçš„ B+ æ ‘ç´¢å¼•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºèšé›†ç´¢å¼•ã€‚ éèšé›†ç´¢å¼•ï¼ˆéèšç°‡ç´¢å¼•ï¼‰ï¼šä»¥ä¸»é”®ä»¥å¤–çš„åˆ—å€¼ä½œä¸ºé”®å€¼æ„å»ºçš„ B+ æ ‘ç´¢å¼•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºéèšé›†ç´¢å¼•ã€‚ éèšé›†ç´¢å¼•ä¸èšé›†ç´¢å¼•çš„åŒºåˆ«åœ¨äºéèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨è¡¨ä¸­çš„æ•°æ®ï¼Œè€Œæ˜¯å­˜å‚¨è¯¥åˆ—å¯¹åº”çš„ä¸»é”®ï¼Œæƒ³è¦æŸ¥æ‰¾æ•°æ®æˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®ä¸»é”®å†å»èšé›†ç´¢å¼•ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œè¿™ä¸ªå†æ ¹æ®èšé›†ç´¢å¼•æŸ¥æ‰¾æ•°æ®çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸ºå›è¡¨ã€‚ èšç°‡ç´¢å¼•å­˜å‚¨å’ŒæŸ¥æ‰¾ å…ˆåˆ°éå¶èŠ‚ç‚¹æ‰¾åˆ°ç´¢å¼•åˆ—æ‰€åœ¨çš„é¡µä½ç½® æ ¹æ®é¡µä½ç½®å®šä½åˆ°å¶èŠ‚ç‚¹çš„ä½ç½® å¶èŠ‚ç‚¹ä¸­æ ¹æ®ç´¢å¼•åˆ—çš„å€¼æ‰¾å‡ºæ•°æ® 12345select * from xx where id&gt;=18 and id&lt;41;-- èšç°‡ç´¢å¼•çš„æŸ¥æ‰¾æ–¹å¼ - æ ¹æ®ä¸»é”®åˆ—idåˆ—è¿›è¡ŒæŸ¥æ‰¾çš„æµç¨‹1. å…ˆä»é¡µ1ä¸­çœ‹idçš„åŒºé—´,å®šä½åˆ°p2-&gt;é¡µ32. å®šä½åˆ°é¡µ3,å®šä½åˆ°p1-&gt;é¡µ8[å¶èŠ‚ç‚¹-å•å‘é“¾è¡¨ - æŸ¥æ‰¾å¿…é¡»ä»å¤´èŠ‚ç‚¹å¼€å§‹æ‰¾]3. ä¾æ¬¡æŒ‰ç…§é“¾è¡¨çš„é¡ºåºä¸€è‡´æ‰¾åˆ°idå¼€å§‹&lt;41çš„è¿™ä¸ªèŠ‚ç‚¹.æ»¡è¶³æ¡ä»¶çš„å¶èŠ‚ç‚¹ä¸­çš„æ•°æ®å…¨éƒ¨æŸ¥å‡ºæ¥ [å¶èŠ‚ç‚¹ä¸­ä¿å­˜äº†çœŸå®çš„æ•°æ®] éèšç°‡ç´¢å¼•å­˜å‚¨å’ŒæŸ¥æ‰¾ B+æ ‘çš„ç»“æ„ è¡¨ç»“æ„:id age name id - ä¸»é”®åˆ— - é»˜è®¤æ˜¯èšç°‡ç´¢å¼•åˆ— - ä¸»é”®åˆ— name - éèšç°‡ç´¢å¼•åˆ— - ç´¢å¼•åˆ— - è¾…åŠ©ç´¢å¼• éèšç°‡ç´¢å¼• - éä¸»é”®åˆ—ç´¢å¼• - nameåˆ—åˆ›å»ºäº†ç´¢å¼• - è¾…åŠ©ç´¢å¼•. ç»“æ„: æ ¹èŠ‚ç‚¹ - ä¸€é¡µæ•°æ® - éèšç°‡ç´¢å¼•åˆ—å€¼ - name éå¶èŠ‚ç‚¹ - éèšç°‡ç´¢å¼•åˆ—å€¼ é¡µèŠ‚ç‚¹å­˜å‚¨çš„ä¸œè¥¿ - nameç´¢å¼•åˆ—ä»¥åŠè¯¥åˆ—å¯¹åº”çš„ä¸»é”®åˆ—å€¼. - è¿™æ˜¯å’Œèšç°‡ç´¢å¼•æœ€å¤§çš„ä¸€ä¸ªä¸åŒç‚¹ å®ƒå’Œèšç°‡ç´¢å¼•æœ€å¤§çš„åŒºåˆ«æ˜¯é¡µèŠ‚ç‚¹ä¸­æ²¡æœ‰å­˜å‚¨æœ€ç»ˆçš„æ•°æ®.è€Œæ˜¯å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹x-y xå°±æ˜¯éèšç°‡ç´¢å¼•åˆ—å€¼,yæ˜¯å¯¹åº”çš„ä¸»é”®åˆ—å€¼. éèšç°‡ç´¢å¼•çš„æŸ¥æ‰¾æ–¹å¼: 1select * from xxx where name='Bob'; æŒ‰ç…§B+æ ‘çš„æŸ¥æ‰¾æµç¨‹ - ç¡®è®¤name=â€™Bobâ€™çš„å…·ä½“ä½ç½® ç”±äºéèšç°‡ç´¢å¼•çš„ç»“æ„ä¸­å¶èŠ‚ç‚¹ä»…ä»…ä¿å­˜äº†name-ä¸»é”®åˆ—å€¼ å…ˆæ ¹æ®name=â€™Bobâ€™è¿™ä¸ªæ¡ä»¶æ‰¾åˆ°å¯¹åº”çš„ä¸»é”®åˆ—å€¼id=15 è¦è¿›è¡Œâ€å›è¡¨æ“ä½œâ€ ç»§ç»­æ‹¿ç€ä¸»é”®åˆ—id=15åˆ°ç´¢å¼•çš„ç»“æ„ä¸­ç»§ç»­æŸ¥æ‰¾ä¸€æ¬¡ - â€œä¸€æ¬¡å›è¡¨æŸ¥æ‰¾â€. idä¹Ÿæ˜¯èšç°‡ç´¢å¼• - B+æ ‘çš„ç»“æ„ - å¶å­èŠ‚ç‚¹ä¸­å­˜å‚¨çš„å°±æ˜¯æ•°æ®. æ ¹æ®èšç°‡ç´¢å¼•åˆ—çš„æŸ¥æ‰¾æ–¹å¼ - id=15çš„å¶èŠ‚ç‚¹ - æ‹¿åˆ°é‡Œé¢çš„æ•°æ® éèšç°‡ç´¢å¼•åˆ—æŸ¥æ‰¾ä¸€å®šä¼šå›è¡¨????? æœªå¿… - å› ä¸ºéå¶èŠ‚ç‚¹ä¸­å­˜å‚¨çš„å°±æ˜¯ç´¢å¼•åˆ—å€¼. æŸ¥è¯¢ select id from xxx where name=â€™Bobâ€™;select name from xxx where name=â€™Bobâ€™; ä¸éœ€è¦å›è¡¨äº†.è¿™æ¡è¯­å¥æŸ¥è¯¢çš„ç»“æœnameå·²ç»åœ¨éèšç°‡ç´¢å¼•çš„éå¶èŠ‚ç‚¹ä¸­ä¿å­˜äº†. å›è¡¨ æ ¹æ®ä¸€ä¸ªéèšç°‡ç´¢å¼•åˆ—æŸ¥æ‰¾ - ä¼˜å…ˆå…ˆåˆ°éèšç°‡ç´¢å¼•çš„B+æ ‘ä¸­æ‰¾åˆ°è¯¥åˆ—å¯¹åº”çš„ä¸»é”®åˆ—å€¼[èšç°‡ç´¢å¼•åˆ—å€¼] å†æ‹¿ç€è¿™ä¸ªèšç°‡ç´¢å¼•åˆ—çš„å€¼å†å»åˆ°èšç°‡ç´¢å¼•åˆ—çš„B+æ ‘ä¸­å†æŸ¥æ‰¾ä¸€æ¬¡ myisamä¸­çš„ç´¢å¼•ç‰¹ç‚¹ ç´¢å¼•çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªé”®å€¼å¯¹key-value key - ç´¢å¼•åˆ—å€¼,value - æ•°æ®è¡Œçš„ç‰©ç†åœ°å€. ä¸»é”®åˆ—ç´¢å¼•/è¾…åŠ©ç´¢å¼• -&gt; ä¸¤é¢—ç‹¬ç«‹çš„B+æ ‘,éƒ½æ˜¯ç´¢å¼•åˆ—å€¼å¯¹åº”çš„è¡Œè®°å½•çš„ç‰©ç†åœ°å€. innodbä¸­ç´¢å¼•å’Œæ•°æ®åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ myisamä¸­ç´¢å¼•å’Œæ•°æ®æ˜¯å•ç‹¬çš„ä¿©ä¸ªæ–‡ä»¶,åˆ†åˆ«æ˜¯ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶. myisamä¸­é‡‡ç”¨çš„æ˜¯â€éèšé›†çš„æ–¹å¼â€ æ— è®ºæ˜¯èšç°‡ç´¢å¼•è¿˜æ˜¯éèšç°‡ç´¢å¼•,æŸ¥æ‰¾æ–¹å¼æ˜¯ä¸€æ ·. é‡‡ç”¨çš„ä¹Ÿæ˜¯B+æ ‘çš„ç»“æ„**.åªæ˜¯å¶èŠ‚ç‚¹ä¸­å­˜å‚¨çš„æ˜¯ç´¢å¼•çš„åˆ—å€¼ä»¥åŠè¯¥å¯¹åº”çš„è¡Œè®°å½•çš„åœ°å€.** éœ€è¦å†æ ¹æ®è¡Œè®°å½•åœ°å€åˆ°è¡¨ä¸­è¿›è¡Œå®šä½[å›è¡¨] 123456ä¸»é”®åˆ— - keyæ˜¯ä¸å…è®¸é‡å¤çš„éä¸»é”®åˆ— - keyæ˜¯å…è®¸é‡å¤çš„.select * from xxx where id=5;1. å…ˆåˆ°B+æ ‘æ‰¾åˆ°æ‰¾åˆ°id=5å¯¹åº”çš„èŠ‚ç‚¹ - å–å‡ºé‡Œé¢çš„è¡Œè®°å½•çš„ç‰©ç†åœ°å€0x6a2. å›è¡¨ - ç›´æ¥æ ¹æ®è¡Œè®°å½•çš„ç‰©ç†åœ°å€ç›´æ¥å®šä½åˆ°å…·ä½“çš„ä¸€è¡Œ.","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://apelisun.github.io/tags/mysql/"},{"name":"B+æ ‘","slug":"B-æ ‘","permalink":"https://apelisun.github.io/tags/B-%E6%A0%91/"}]},{"title":"sqlä¹ é¢˜1","slug":"sqlä¹ é¢˜1","date":"2022-08-09T13:23:45.000Z","updated":"2022-08-10T03:52:13.995Z","comments":true,"path":"2022/08/09/sqlä¹ é¢˜1/","link":"","permalink":"https://apelisun.github.io/2022/08/09/sql%E4%B9%A0%E9%A2%981/","excerpt":"","text":"ç°æœ‰ä¸€ä¸ªå•†åº—çš„æ•°æ®åº“ï¼Œè®°å½•é¡¾å®¢åŠå…¶è´­ç‰©æƒ…å†µï¼Œç”±ä¸‹é¢ä¸‰ä¸ªè¡¨ç»„æˆï¼š å•†å“productï¼ˆå•†å“å·productid int(7)]ï¼Œå•†å“åproductname [varchar(128)]ï¼Œ å•ä»·unitprice int(11,2)ï¼Œ å•†å“ç±»åˆ«category[varchar(28)]ï¼Œ ä¾›åº”å•†provider [varchar(48)]ï¼‰ï¼› ä¸»é”®ï¼šproductid é¡¾å®¢customerï¼ˆé¡¾å®¢å·customerid int(7)]ï¼Œå§“åname[varchar(48)]ï¼Œ ä½å€location[varchar(128)]ï¼‰ï¼› ä¸»é”®ï¼šcustomerid è´­ä¹°purcaseï¼ˆé¡¾å®¢å·customeridï¼Œå•†å“å·productidï¼Œè´­ä¹°æ•°é‡quantity[int(7)]ï¼‰ï¼› å¤–é”®ï¼šcustomerid å¼•ç”¨ å®¢æˆ·è¡¨çš„ customerid å¤–é”®ï¼šproductid å¼•ç”¨ äº§å“è¡¨çš„ productid ä¸»é”®ï¼š(customerid, productid) â€“&gt; è”åˆä¸»é”® ä»»åŠ¡ä¸€:ä½¿ç”¨DDLè¯­è¨€åˆ›å»ºä¸Šé¢çš„è¡¨,å¹¶ä¸”è®¾ç½®å¿…è¦çš„ä¸»é”®çº¦æŸå’Œå¤–é”®çº¦æŸ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455drop table product;create table product(productid int(7) primary key,productname varchar(128),unitprice double(11,2),catagory varchar(28),provider varchar(48));drop table customer;create table customer(customerid int(7) primary key,name varchar(48),location varchar(128));drop table purcase;create table purcase(customerid int(7),productid int(7),quantity int(7),constraint purcase_id_pk primary key(customerid,productid),constraint purcase_id1_fk foreign key(productid) references product(productid),constraint purcase_id2_fk foreign key(customerid) references customer(customerid) );insert into product values(1,'ä½³æ´å£«',8.00,'ç‰™è†','å®æ´'),(2,'é«˜éœ²æ´',6.50,'ç‰™è†','é«˜éœ²æ´'),(3,'æ´è¯º',5.00,'ç‰™è†','è”åˆåˆ©å'),(4,'èˆ’è‚¤ä½³',3.00,'é¦™çš‚','å®æ´'),(5,'å¤å£«è²',5.00,'é¦™çš‚','è”åˆåˆ©å'),(6,'é›•ç‰Œ',2.50,'æ´—è¡£ç²‰','çº³çˆ±æ–¯'),(7,'ä¸­å',3.50,'ç‰™è†','è”åˆåˆ©å'),(8,'æ±°æ¸',3.00,'æ´—è¡£ç²‰','å®æ´'),(9,'ç¢§æµª',4.00,'æ´—è¡£ç²‰','å®æ´');insert into customer values(1,'Dennis','é»„æµ¦åŒº'),(2,'John','å¾å®¶æ±‡'),(3,'Tom','é—¸åŒ—'),(4,'Jenny','é™å®‰'),(5,'Rick','æµ¦ä¸œ');insert into purcase values(1,1,3), (1,5,2),(1,8,2) , (2,2,5),(2,6,4) , (3,1,1),(3,5,1 ), (3,6,3),(3,8,1 ), (4,3,7),(4,4,3 ), (5,6,2),(5,7,8); ä»»åŠ¡äºŒ: å‘å¯¹åº”çš„è¡¨ä¸­æ’å…¥å¦‚ä¸‹æ•°æ® 123456789101112131415161718192021222324252627å•†å“ï¼ˆ1ï¼Œä½³æ´å£«ï¼Œ8.00ï¼Œç‰™è†ï¼Œå®æ´ï¼› 2ï¼Œé«˜éœ²æ´ï¼Œ6.50ï¼Œç‰™è†ï¼Œé«˜éœ²æ´ï¼› 3ï¼Œæ´è¯ºï¼Œ5.00ï¼Œç‰™è†ï¼Œè”åˆåˆ©åï¼› 4ï¼Œèˆ’è‚¤ä½³ï¼Œ3.00ï¼Œé¦™çš‚ï¼Œå®æ´ï¼› 5ï¼Œå¤å£«è²ï¼Œ5.00ï¼Œé¦™çš‚ï¼Œè”åˆåˆ©åï¼› 6ï¼Œé›•ç‰Œï¼Œ2.50ï¼Œæ´—è¡£ç²‰ï¼Œçº³çˆ±æ–¯ 7ï¼Œä¸­åï¼Œ3.50ï¼Œç‰™è†ï¼Œè”åˆåˆ©åï¼› 8ï¼Œæ±°æ¸ï¼Œ3.00ï¼Œæ´—è¡£ç²‰ï¼Œå®æ´ï¼› 9ï¼Œç¢§æµªï¼Œ4.00ï¼Œæ´—è¡£ç²‰ï¼Œå®æ´ï¼›ï¼‰é¡¾å®¢ï¼ˆ1ï¼ŒDennisï¼Œé»„æµ¦åŒºï¼› 2ï¼ŒJohnï¼Œå¾å®¶æ±‡ï¼› 3ï¼ŒTomï¼Œé—¸åŒ—ï¼› 4ï¼ŒJennyï¼Œé™å®‰ï¼› 5ï¼ŒRickï¼Œæµ¦ä¸œï¼›ï¼‰ è´­ä¹°(1ï¼Œ1ï¼Œ3ï¼› 1ï¼Œ5ï¼Œ2ï¼› 1ï¼Œ8ï¼Œ2ï¼› 2ï¼Œ2ï¼Œ5ï¼› 2ï¼Œ6ï¼Œ4ï¼› 3ï¼Œ1ï¼Œ1ï¼› 3ï¼Œ5ï¼Œ1ï¼› 3ï¼Œ6ï¼Œ3ï¼› 3ï¼Œ8ï¼Œ1ï¼› 4ï¼Œ3ï¼Œ7ï¼› 4ï¼Œ4ï¼Œ3ï¼› 5ï¼Œ6ï¼Œ2ï¼› 5ï¼Œ7ï¼Œ8ï¼›ï¼‰ ä»»åŠ¡ä¸‰: å®Œæˆå¦‚ä¸‹è¯­å¥ 123456789101112131415161718192021222324252627282930ï¼ˆ1ï¼‰æ±‚è´­ä¹°äº†ä¾›åº”å•†\"å®æ´\"äº§å“çš„æ‰€æœ‰é¡¾å®¢ï¼›select distinct c.customerid,c.name from customer c join purcase p on p.customerid=c.customerid where p.productid in (select pr.productid from product pr where pr.provider='å®æ´');+------------+--------+| customerid | name |+------------+--------+| 1 | Dennis || 3 | Tom || 4 | Jenny |+------------+--------+ï¼ˆ2ï¼‰æ±‚è´­ä¹°çš„å•†å“åŒ…å«äº†é¡¾å®¢\"Dennis\"æ‰€è´­ä¹°çš„æ‰€æœ‰å•†å“çš„é¡¾å®¢ï¼ˆå§“åï¼‰select p2.customerid from purcase p2 where p2.productid in (select p.productid from customer c join purcase p on c.customerid=p.customerid where c.name='Dennis') and customerid&lt;&gt;(select distinct p4.customerid from customer c4 join purcase p4 on p4.customerid=c4.customerid where c4.name=\"Dennis\") group by p2.customerid having count(*)&gt;=(select count(*) from customer c2 join purcase p3 on c2.customerid=p3.customerid where c2.name='Dennis');+------------+| customerid |+------------+| 3 |+------------+ï¼ˆ3ï¼‰æ±‚ç‰™è†å–å‡ºæ•°é‡æœ€å¤šçš„ä¾›åº”å•†ã€‚select pr.provider,sum(pu1.quantity) from product pr join purcase pu1 on pu1.productid=pr.productid and pr.catagory='ç‰™è†' GROUP BY pr.provider order by sum(pu1.quantity) desc limit 1;+--------------+-------------------+| provider | sum(pu1.quantity) |+--------------+-------------------+| è”åˆåˆ©å | 15 |+--------------+-------------------+(4)å°†æ‰€æœ‰çš„ç‰™è†å•†å“å•ä»·å¢åŠ 10%ã€‚update product set unitprice=unitprice*1.1 where catagory='ç‰™è†';(5)åˆ é™¤ä»æœªè¢«è´­ä¹°çš„å•†å“è®°å½•ã€‚delete from product where productid not in (select pu.productid from purcase pu);","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://apelisun.github.io/tags/mysql/"},{"name":"homework","slug":"homework","permalink":"https://apelisun.github.io/tags/homework/"}]},{"title":"mysql3","slug":"mysql3","date":"2022-08-09T13:23:13.000Z","updated":"2022-08-10T03:49:53.353Z","comments":true,"path":"2022/08/09/mysql3/","link":"","permalink":"https://apelisun.github.io/2022/08/09/mysql3/","excerpt":"","text":"DBè®¾è®¡ æŒ‡å¯¼dbè®¾è®¡çš„æ€æƒ³,é¿å…è¡¨ä¸­å‡ºç°å¤§é‡çš„å†—ä½™çš„æ•°æ®.ä½†æ˜¯å®é™…å¼€å‘ä¸­è¡¨ä¸­æ˜¯å…è®¸å‡ºç°å†—ä½™çš„å­—æ®µçš„. å†—ä½™æ•°æ®çš„å¥½å¤„ - å®‰å…¨,æ–¹ä¾¿æŸ¥è¯¢.åå¤„-&gt;deleteå’Œupdateæ“ä½œ 1NF - ç¬¬ä¸€èŒƒå¼-ä¿è¯åˆ—çš„åŸå­æ€§,ä¿è¯åˆ—ä¸å¯å†åˆ‡å‰² s_emp(id,name) - å‘ç°nameä¸å…·å¤‡åŸå­æ€§,å¯ä»¥è¢«å†æ¬¡åˆ‡å‰²(fist_name,last_name) s_ord(id,address) - addressæ˜¾ç¤ºä¸ºçœå¸‚åŒº - æ±Ÿè‹çœè‹å·å¸‚å›­åŒº addresså†æ¬¡åˆ†æˆ(province,city,area) 12345678ä¸»è¦æ˜¯ä¸ºäº†æŸ¥è¯¢.select * from s_ord where address like '%è‹å·%';select * from s_ord where city = 'è‹å·';-- address,cityåŠ ç´¢å¼•.-- æ¨¡ç³ŠæŸ¥è¯¢å¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆ.ä½†æ˜¯ç²¾ç¡®åŒ¹é…æ˜¯èµ°ç´¢å¼•çš„. 2NF - åŸºäº1NF,è¦æ±‚éå…³é”®åˆ—è¦å…¨éƒ¨ä¾èµ–äºå…³é”®åˆ—. ä¸å­˜åœ¨éå…³é”®åˆ—éƒ¨åˆ†ä¾èµ–äºå…³é”®åˆ— å…³é”®åˆ— - ä¸»é”®åˆ— - éç©ºä¸”å”¯ä¸€ - tableä¸­çš„idè®¾ç½®æˆä¸»é”®åˆ—. student(sid,sname,cid,cname);//å…³é”®åˆ—(sid,cid) - ç¡®å®šå”¯ä¸€çš„å…ƒç»„(è¡Œ) - å¤åˆä¸»é”® sname,cname - éå…³é”®åˆ—. (sid,cid) -&gt; å”¯ä¸€ç¡®å®š -&gt; sname/cname sid -&gt; sname,cid -&gt; cname 123student(sid,sname)course(cid,cname);sc(sid,cid,kpi);//(sid,cid) -&gt; kpi 3NF- åŸºäº2NF,è¦æ±‚éå…³é”®åˆ—ä¸èƒ½ä¼ é€’ä¾èµ–äºå…³é”®åˆ—. student(sid,sname,uid,uv_name,u_phone); u_phoneä¼ é€’ä¾èµ–äºsid - åŸå› sid -&gt; uid -&gt; u_phone 12student(sid,sname,uid);//uidå°±æ˜¯foreign key å¤–é”®åˆ—university(uid,u_name,u_phone); ç»ƒä¹  ç”¨æˆ·è¡¨t_user è§†é¢‘è¡¨t_video è¯„è®ºè¡¨å’Œå›å¤è¡¨è®¾è®¡ ç”¨æˆ·å¯¹è§†é¢‘è¿›è¡Œè¯„è®º(t_comment)å’Œå›å¤(t_repy)çš„åœºæ™¯: tom å‘å¸ƒäº† æç¬‘çš„è§†é¢‘ admin è¯„è®º: ğŸ˜ğŸ˜ â€‹ liè¯„è®ºadmin: ä½ ç¬‘ä»€ä¹ˆ! â€‹ leiå›å¤@li: ç®¡ä½ ä»€ä¹ˆäº‹æƒ…! â€‹ xå›å¤@li: ä½ æƒ³è¡¨è¾¾ä»€ä¹ˆ! â€‹ yå›å¤@x: â€¦. â€‹ k è¯„è®ºadmin:ä½ ç¬‘ä»€ä¹ˆ! jack è¯„è®º: ğŸ˜„ t_user id usernmae 1 tom 2 admin 3 li 4 lei 5 x 6 y 7 k t_video ä¸€ä¸ªç”¨æˆ·å¯ä»¥å‘å¸ƒå¤šä¸ªè§†é¢‘ id video user_id 1 ä½©æ´›è¥¿ 1 t_comment id video_id content comment_id user_id 1 1 ğŸ˜ğŸ˜ 2 2 1 ä½ ç¬‘ä»€ä¹ˆ! 1 3 3 1 ä½ ç¬‘ä»€ä¹ˆ! 1 7 t_reply id comment_id conent reply_id user_id 1 2 ç®¡ä½ ä»€ä¹ˆäº‹æƒ…! 4 2 2 ä½ æƒ³è¡¨è¾¾ä»€ä¹ˆ! 5 3 2 â€¦ 2 6 DDLè¯­è¨€ Data Definition Language - æ•°æ®å®šä¹‰è¯­è¨€. åŒ…æ‹¬çš„å‘½ä»¤:create drop alter comment rename truncate æ•°æ®ç±»å‹ æ•°å­—ç±»å‹ æ•´æ•° - int/bigint å°æ•° - float/double/decimal è¦ç‚¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455drop table t_type;create table t_type( id int(7));æ­¤å¤„çš„7å¹¶ä¸æ˜¯ä»£è¡¨æ­¤åˆ—çš„æœ€å¤§é•¿åº¦.è¯¯åŒº:æœ€å¤§å¯ä¿å­˜çš„å€¼æ˜¯9999999å®é™…ä¸Šè¯¥åˆ—å¯ä»¥å­˜å‚¨çš„æœ€å¤§å€¼æ˜¯ç”±ç±»å‹å†³å®šäº†.é…ç½®zerofill 0å¡«å……create table t_type( id int(7) zerofill);insert into t_type values(1);ä¸è¶³7ä½,ä¼šé‡‡ç”¨0æ¥å¡«å……+---------+| id |+---------+| 0000001 |+---------+drop table t_type;create table t_type( c1 float(5,2), c2 double(5,2), c3 decimal(5,2));float(m,n) =&gt; mæ€»é•¿åº¦,nä»£è¡¨çš„å°æ•°ç‚¹insert into t_type(c1) values(12.345);mysql&gt; select * from t_type;-- å°æ•°ä¿ç•™2ä½,å¹¶ä¸”å››èˆäº”å…¥+-------+------+------+| c1 | c2 | c3 |+-------+------+------+| 12.35 | NULL | NULL |+-------+------+------+mysql&gt; insert into t_type(c2) values(123.5); //okmysql&gt; select * from t_type;+-------+--------+------+| c1 | c2 | c3 |+-------+--------+------+| 12.35 | NULL | NULL || NULL | 123.50 | NULL |+-------+--------+------+mysql&gt; insert into t_type(c2) values(1234.5);`åŸå› :1234.5 =&gt; 1234.50 å·²ç»è¶…è¿‡5ä½äº†`ERROR 1264 (22003): Out of range value for column 'c2' at row 1float/double =&gt; éæ ‡å‡† decimalæ ‡å‡† - å¯¹ç²¾åº¦æœ‰ç‰¹åˆ«è¦æ±‚çš„insert into t_type(c3) values(123.589); å…³äºæ—¥æœŸç±»å‹ date datetime 12345678910111213141516171819202122drop table t_type;create table t_type( id int, create_date date default now());ERROR 1067 (42000): Invalid default value for 'create_date'å¦‚æœæŸä¸ªåˆ—æœŸæœ›é»˜è®¤å€¼æ˜¯now(),ä¸€å®šè¦è®¾ç½®æˆdatetimedrop table t_type;create table t_type( id int, create_date datetime default now());insert into t_type(id) values(1);-- æ»¡è¶³æ—¥æœŸèƒ½å¤Ÿæ”¯æŒçš„å­—ç¬¦ä¸²æ ¼å¼drop table t_type;create table t_type( id int, create_date date default '2012-09-08 12:12:12');insert into t_type(id) values(1); å­—ç¬¦ä¸²ç±»å‹ charå’ŒvarcharåŒºåˆ« char(n),varchar(n) =&gt; ä»£è¡¨çš„å­—ç¬¦çš„ä¸ªæ•° åŒºåˆ«: charæ˜¯å®šé•¿,varcharæ˜¯å¯å˜é•¿. 1234567891011121314151617181920212223drop table t_type;create table t_type( s1 char(2), s2 varchar(2));insert into t_type(s1) values('ab');insert into t_type(s2) values('abc');char(2) =&gt; å®é™…å­˜å‚¨1ä¸ª'a',å®é™…æ¶ˆè€—äº†2ä¸ªvarchar(2) =&gt; å‡è®¾'a',å®é™…ä»…ä»…æ¶ˆè€—äº†1ä¸ª,æœ€å¤§æ¶ˆè€—2ä¸ª.varcharæ›´åŠ èŠ‚çº¦ç©ºé—´. charæ•ˆç‡ä¼šæ›´é«˜ä¸€ç‚¹ - ä¸æ¨èç”¨char-- oracleä¸­æ•°æ®ä¸­drop table t_type;create table t_type( s1 char(2));insert into t_type(s1) values('a');-- oracleæŸ¥è¯¢ä¸ºempty-- mysqlä¸­ç©ºç›´æ¥æ¯”è¾ƒçš„æ—¶å€™å‰”é™¤,å¤§å°å†™æ¯”è¾ƒéƒ½æ˜¯ä¸€æ ·çš„.select * from t_type where s1='a'; text - 0-65 535 bytes - é•¿æ–‡æœ¬ çº¦æŸç±»å‹ ä¸»é”®çº¦æŸ primary key éç©ºä¸”å”¯ä¸€ ä¸»é”®åˆ—å¯ä»¥æ˜¯ç”±å¤šåˆ—å…±åŒç»„æˆ - ç¬¦åˆä¸»é”®åˆ— ä½†æ˜¯è¡¨ä¸­åªèƒ½å‡ºç°ä¸€ä¸ªä¸»é”® å¤–é”®çº¦æŸ foreign key å¤–é”®åˆ—å…è®¸ä¸ºnull å¤–é”®åˆ—æ˜¯å¤šå‡ºç°åœ¨å¤šçš„ä¸€æ–¹ä¸­.å»ºç«‹è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»çš„ å¼€å‘ä¸­ä¸éœ€è¦è®¾ç½®å¤–é”® - é€ æˆè¡¨ä¸è¡¨ä¹‹é—´çš„è€¦åˆ. è¡¨å’Œè¡¨ä¹‹é—´çš„å…³ç³»æ˜¯åœ¨â€å¿ƒä¸­â€! éç©ºçº¦æŸ - not null å”¯ä¸€çº¦æŸ - unique default - é»˜è®¤å€¼ mysqlä¸­ä¸æ”¯æŒè‡ªæ£€çº¦æŸ,oracleä¸­æ”¯æŒçš„checkæ£€æŸ¥çº¦æŸ.ä½†æ˜¯mysqlä¸­å¯ä»¥ä½¿ç”¨è§¦å‘å™¨æ¥å®ç°. åˆ›å»ºè¡¨è¯­æ³•123456789101112131415161718DROP table è¡¨å;-- çº¦æŸåˆ—çº§æ·»åŠ CREATE TABLE è¡¨å( åˆ—å æ•°æ®ç±»å‹(n) çº¦æŸç±»å‹ COMMNET 'æ³¨é‡Š', åˆ—å æ•°æ®ç±»å‹(n) çº¦æŸç±»å‹ COMMNET 'æ³¨é‡Š') ENGINE=InnoDB DEFAULT CHARSET=utf8;engine æŒ‡å®šå­˜å‚¨å¼•æ“,é»˜è®¤çš„å°±æ˜¯innodb(å¤–é”®çº¦æŸ,äº‹åŠ¡,è¡Œé”,è¡¨é”)ä¹‹å‰çš„ç‰ˆæœ¬åº”è¯¥æ˜¯myisam(ä»…ä»…æ”¯æŒè¡¨é”)-- çº¦æŸè¡¨çº§-- çº¦æŸå‘½åè§„èŒƒ:è¡¨å_åˆ—å_çº¦æŸç±»å‹ç¼©å†™CREATE TABLE è¡¨å( åˆ—å æ•°æ®ç±»å‹(n) COMMNET 'æ³¨é‡Š', åˆ—å æ•°æ®ç±»å‹(n) COMMNET 'æ³¨é‡Š', [CONSTRAINT çº¦æŸåç§°] çº¦æŸç±»å‹(åˆ—å), [CONSTRAINT çº¦æŸåç§°] çº¦æŸç±»å‹(åˆ—å)); åˆ—çº§æ·»åŠ æ–¹å¼ ç›´æ¥åœ¨åˆ—çš„åé¢çš„å¢åŠ å…³äºè¯¥åˆ—çš„çº¦æŸ 12345678drop table t_user;create table t_user( id int(7) primary key,username varchar(20) unique not null, birthday date default '1991-09-08');insert into t_user(id) values(1); è¡¨çº§æ·»åŠ æ–¹å¼12345678910111213141516171819202122232425262728293031323334353637383940414243-- not nullä»…ä»…æ”¯æŒåˆ—çº§æ·»åŠ drop table t_user;create table t_user( id int(7), username varchar(20) not null, birthday date, constraint t_user_id_pk primary key(id), constraint t_user_username_uq unique(username));-- çº¦æŸå - æé«˜é”™çš„å¯è¯»æ€§insert into t_user(id) values(1);-- æ•°æ®å­—å…¸ - æè¿°è¡¨çš„è¡¨-- æ•°æ®å­—å…¸å°±æ˜¯ç”¨æ¥å­˜æ”¾ç”¨æˆ·ä¿¡æ¯/ç”¨æˆ·åˆ›å»ºçš„è¿™è¡¨çš„ä¿¡æ¯.show tables;desc è¡¨å;-- ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ•°æ®åº“mysqluse information_schema-- TABLE_CONSTRAINTS è¡¨å - æ•°æ®å­—å…¸ - ä¸“é—¨å­˜å‚¨æ¯ä¸ªç”¨æˆ·çš„è¡¨çš„çº¦æŸä¿¡æ¯desc table_constraints+--------------------+--------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+--------------------+--------------+------+-----+---------+-------+| CONSTRAINT_CATALOG | varchar(512) | NO | | | || CONSTRAINT_SCHEMA | varchar(64) | NO | | | || CONSTRAINT_NAME | varchar(64) | NO | | | || TABLE_SCHEMA | varchar(64) | NO | | | || TABLE_NAME | varchar(64) | NO | | | || CONSTRAINT_TYPE | varchar(64) | NO | | | |+--------------------+--------------+------+-----+---------+-------+CONSTRAINT_NAME - çº¦æŸåç§°TABLE_NAME - è¡¨åCONSTRAINT_TYPE - çº¦æŸç±»å‹-- æŸ¥è¯¢å‡ºT_USERè¡¨ä¸­çš„çº¦æŸä¿¡æ¯select constraint_name,constraint_type,table_name from table_constraintswhere table_name='T_USER' and table_schema='dy';-- æŸ¥è¯¢t_userè¡¨ä¸­çš„æ‰€æœ‰çš„åˆ—çš„åç§°ä»¥åŠåˆ—çš„æ•°æ®ç±»å‹select column_name,column_type,data_type,column_key from columns where table_schema='dy' and table_name='t_user'; å»ºè¡¨çš„å…¶ä»–è¯­æ³• åˆ©ç”¨ä¸€å¼ å·²ç»å­˜åœ¨çš„è¡¨æ¥æ„å»ºå¦å¤–ä¸€å¼ è¡¨ ä¿ç•™åŸæ¥è¡¨ä¸­çš„æ•°æ® 123456789101112131415drop table t_user;create table t_user( id int(7), username varchar(20) not null, birthday date, constraint t_user_id_pk primary key(id), constraint t_user_username_uq unique(username));insert into t_user values(1,'tom','2021-09-08');insert into t_user values(2,'jack','2022-09-08');-- å…‹éš†CREATE TABLE è¡¨å AS SELECTæŸ¥è¯¢è¯­å¥;create table t_user_copy as select * from t_user; ä¿ç•™åŸè¡¨çš„ç»“æ„,ä½†æ˜¯ä¸ä¿ç•™æ•°æ® 123drop table t_user_copy; create table t_user_copy as select * from t_user where 1=2; æŸ¥çœ‹å»ºè¡¨è¯­å¥-DDL 1show create table è¡¨å; å¦‚æœæ˜¯ä¸€ä¸ª1:n 123456789101112131415161718drop table t_ord;drop table t_customer;create table t_customer( id int(7), cname varchar(20) not null, constraint t_customer_id_pk primary key(id));create table t_ord( id int(7) primary key, ord_no varchar(20) not null unique, total double(7,2), customer_id int(7), constraint t_ord_customer_id_fk foreign key(customer_id) references t_customer(id));-- ä¸€å®šæ˜¯çˆ¶çº§è¡¨t_customer-- åˆ è¡¨ - å…ˆåˆ é™¤å­è¡¨,å¤šçš„ä¸€æ–¹,å¤–é”®æ‰€åœ¨çš„é‚£å¼ è¡¨. n:n 1234567891011121314151617drop table t_sc;drop table t_student;drop table t_course; create table t_student( id int primary key);create table t_course( id int primary key);create table t_sc( sid int, cid int, primary key(sid,cid), foreign key(sid) references t_student(id), foreign key(cid) references t_course(id)); è‡ªå­¦çš„çŸ¥è¯†ç‚¹ å››ç§åˆ†åŒºæ–¹å¼ - æµ‹è¯• DMLæ“ä½œinsertè¯­å¥ ç»™è¡¨ä¸­æ‰€æœ‰çš„åˆ—éƒ½æ’å…¥æ•°æ®,ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯é¡ºåº/ç±»å‹/çº¦æŸ 1insert into è¡¨å values(åˆ—1,åˆ—2,åˆ—3); ç»™æŒ‡å®šçš„åˆ—æ’å…¥æ•°æ® 1insert into è¡¨å(åˆ—å1,åˆ—å2) values(åˆ—1,åˆ—2); æ‰¹é‡æ’å…¥ 1insert into è¡¨å values(åˆ—1,åˆ—2,åˆ—3),(åˆ—1,åˆ—2,åˆ—3),(åˆ—1,åˆ—2,åˆ—3); deleteè¯­å¥ delete from è¡¨å;//åˆ é™¤è¡¨ä¸­çš„æ•°æ® delete from è¡¨å where æ¡ä»¶; å¤–é”®çº¦æŸä¼šå¯¹deleteäº§ç”Ÿå½±å“,ä¸€å®šæ˜¯å…ˆåˆ é™¤å­è®°å½•,ç„¶åæ‰èƒ½å¤Ÿåˆ é™¤çˆ¶è®°å½•. å…ˆåˆ é™¤å¤šçš„ä¸€æ–¹,ç„¶åæ‰èƒ½å¤Ÿåˆ é™¤ä¸€çš„ä¸€æ–¹. çº§è”åˆ é™¤ - åˆ é™¤çš„ä¸€æ–¹ä¹‹å‰å…ˆå°†è¿™ä¸ªä¸€æ–¹çš„å­è®°å½•å…¨éƒ¨åˆ é™¤ 12345678910111213141516171819drop table t_ord;drop table t_customer;create table t_customer( id int(7), cname varchar(20) not null, constraint t_customer_id_pk primary key(id));insert into t_customer values(1,'admin');insert into t_customer values(2,'tom');create table t_ord( id int(7) primary key, ord_no varchar(20) not null unique, total double(7,2), customer_id int(7), constraint t_ord_customer_id_fk foreign key(customer_id) references t_customer(id) on delete cascade);insert into t_ord values(1,'1001',300,1);insert into t_ord values(2,'1002',300,null); delete from t_customer where id=1; 1 updateè¯­å¥ update è¡¨ set åˆ—å=åˆ—å€¼,åˆ—å2=åˆ—å€¼;//æ›´æ–°è¡¨ä¸­æ‰€æœ‰è¡Œ update è¡¨ set åˆ—å=åˆ—å€¼,åˆ—å2=åˆ—å€¼ WHEREæ¡ä»¶;// truncateå’Œdeleteå’Œdropå…±åŒç‚¹ 1.truncateå’Œä¸å¸¦whereå­å¥çš„deleteã€ä»¥åŠdropéƒ½ä¼šåˆ é™¤è¡¨å†…çš„æ•°æ®ã€‚ 2.dropã€truncateéƒ½æ˜¯DDLè¯­å¥(æ•°æ®å®šä¹‰è¯­è¨€),æ‰§è¡Œåä¼šè‡ªåŠ¨æäº¤ã€‚ ä¸åŒç‚¹ delete è¯­å¥æ˜¯æ•°æ®åº“æ“ä½œè¯­è¨€(dml)ï¼Œè¿™ä¸ªæ“ä½œä¼šæ”¾åˆ° rollback segement ä¸­ï¼Œäº‹åŠ¡æäº¤ä¹‹åæ‰ç”Ÿæ•ˆï¼›å¦‚æœæœ‰ç›¸åº”çš„ triggerï¼Œæ‰§è¡Œçš„æ—¶å€™å°†è¢«è§¦å‘ã€‚ truncateã€drop æ˜¯æ•°æ®åº“å®šä¹‰è¯­è¨€(ddl)ï¼Œæ“ä½œç«‹å³ç”Ÿæ•ˆï¼ŒåŸæ•°æ®ä¸æ”¾åˆ° rollback segment ä¸­ï¼Œä¸èƒ½å›æ»šï¼Œæ“ä½œä¸è§¦å‘ trigger é€Ÿåº¦ï¼Œä¸€èˆ¬æ¥è¯´: drop&gt; truncate &gt; delete åˆ†é¡µ limit m // å‰mè¡Œ limit m,n // mä»ä¸‹æ ‡0å¼€å§‹(ç¬¬ä¸€è¡Œ),næ˜¾ç¤ºè¡Œæ•° åˆ†é¡µçš„å…¬å¼123456public Page&lt;Book&gt; page(Integer pageNum,Integer pageSize){ // limit (pageNum-1)*pageSize,pageSize //1,3 0 //2,2 3} åˆ†é¡µçš„æŸ¥è¯¢æ•ˆç‡é—®é¢˜ limit m,n å…¶ä¸­çš„må«åšåç§»é‡. åç§»é‡è¶Šå¤§,åˆ†é¡µçš„æ€§èƒ½è¶Šä½. æ¯”å¦‚è¡¨1-100000,æ­£å¥½id=1,10000 select * from è¡¨ where id&gt;æ¡ä»¶ limit 2; æ¡ä»¶æŸ¥è¯¢(å‡å°‘åç§»é‡) + limit äº‹åŠ¡ ç”¨æ¥æ‰§è¡Œä¸€ç»„SQL,æ˜¯dbä¸­å®Œæˆä¸šåŠ¡çš„åŸºæœ¬å•ä½. äº‹åŠ¡ACIDç‰¹æ€§ åŸå­æ€§ï¼ˆAtomicity) - äº‹åŠ¡ä¸å¯å†åˆ†å‰². äº‹åŠ¡è¦ä¹ˆåŒæ—¶æˆåŠŸ,åŒæ—¶å¤±è´¥ - æ¯”å¦‚è½¬è´¦ä¸šåŠ¡. ä¸€è‡´æ€§(Consistency) - äº‹åŠ¡ä¸€æ—¦æäº¤.å†…å­˜ä¸­çš„æ•°æ®è¦å’Œç£ç›˜ä¸Šçš„æ•°æ®è¦ä¸€è‡´,ä¿è¯æ•°æ®çš„å®Œæ•´æ€§. æ¯”å¦‚tom-500,jack-500.æ— è®ºè½¬å¤šå°‘,è½¬å¤šå°‘æ¬¡.åæ­£æ€»çš„é’±æ˜¯1000 éš”ç¦»æ€§(isolation): äº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´çš„å½¼æ­¤éš”ç¦»çš„,äº’ä¸å¹²æ‰°çš„.ä¸€ä¸ªäº‹åŠ¡çš„ç»“æŸ,æ„å‘³ç€ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„å¼€å§‹. æŒä¹…æ€§(Durability) - äº‹åŠ¡ä¸€æ—¦æäº¤,æ•°æ®åº”è¯¥æ°¸ä¹…ä¿å­˜åœ¨ç£ç›˜ä¸­.å³ä½¿å‘ç”Ÿä¸€äº›æ•…éšœ,åº”è¯¥å¯ä»¥ç”¨ä¸€äº›æ¢å¤çš„æŠ€æœ¯è¿›è¡Œæ¢å¤. äº‹åŠ¡çš„åˆ†ç±» æœ¬åœ°äº‹åŠ¡ - ä¸€ä¸ªé¡¹ç›®(å•ä½“æ¶æ„)è¿æ¥ä¸€ä¸ªæ•°æ®åº“ åˆ†å¸ƒå¼äº‹åŠ¡ æ¶ˆæ¯ä¸­é—´ä»¶ - rabbitmq,rocketmq é˜¿é‡Œçš„æ¡†æ¶seata äº‹åŠ¡çš„éš”ç¦»çº§åˆ« â‘  Serializable (ä¸²è¡ŒåŒ–)ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„å‘ç”Ÿã€‚ é”è¡¨. â‘¡ Repeatable read (å¯é‡å¤è¯»)ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»çš„å‘ç”Ÿã€‚ â‘¢ Read committed (è¯»å·²æäº¤)ï¼šå¯é¿å…è„è¯»çš„å‘ç”Ÿã€‚ ä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®. â‘£ Read uncommitted (è¯»æœªæäº¤)ï¼šæœ€ä½çº§åˆ«ï¼Œä»»ä½•æƒ…å†µéƒ½æ— æ³•ä¿è¯ã€‚äº§ç”Ÿè„è¯». ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»å–åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡å°šæœªæäº¤çš„æ•°æ® æŸ¥è¯¢å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«mysqlé»˜è®¤çš„æ˜¯å¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ« 12345678910select @@tx_isolation;+-----------------+| @@tx_isolation |+-----------------+| REPEATABLE-READ |+-----------------+ä¸´æ—¶è®¾ç½®ä¸€ä¸‹å½“å‰ä¼šè¯çš„äº‹åŠ¡çš„éš”ç¦»çº§åˆ«set session transaction isolation level read uncommitted; äº‹åŠ¡TCLå‘½ä»¤ begin(å¼€å¯ä¸€ä¸ªäº‹åŠ¡),commit(æäº¤ä¸€ä¸ªäº‹åŠ¡),savepoint äº‹åŠ¡ç‚¹ set autocommit=0;//æ‰‹åŠ¨å¼€å¯ä¸€ä¸ªäº‹åŠ¡ DMLæ“ä½œé»˜è®¤éƒ½æ˜¯ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡. è¡¥å……ä¸€ç‚¹ rollback - å›æ»šäº‹åŠ¡ - ç»“æŸä¸€ä¸ªäº‹åŠ¡ ä¸èƒ½å›æ»šå·²ç»commitä¹‹åçš„äº‹åŠ¡. savepoint äº‹åŠ¡ç‚¹ rollback to äº‹åŠ¡ç‚¹ å¦‚æœä¹ˆæœ‰è®¾ç½®äº‹åŠ¡ç‚¹ - å›æ»šå½“å‰äº‹åŠ¡ä¸­æ‰€æœ‰çš„æ“ä½œ. 1234567891011121314151617181920mysql&gt; begin;Query OK, 0 rows affected (0.00 sec)mysql&gt; update t_acc set balance=balance+1000 where id=1;Query OK, 1 row affected (0.00 sec)Rows matched: 1 Changed: 1 Warnings: 0mysql&gt; savepoint t1;Query OK, 0 rows affected (0.00 sec)mysql&gt; update t_acc set balance=balance+1000 where id=2;Query OK, 1 row affected (0.00 sec)Rows matched: 1 Changed: 1 Warnings: 0mysql&gt; rollback to t1;Query OK, 0 rows affected (0.01 sec)mysql&gt; commit;Query OK, 0 rows affected (0.00 sec) å¤šäº‹åŠ¡å¹¶å‘å¸¦æ¥çš„é—®é¢˜ å¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œæ“ä½œçš„æ—¶å€™,ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ 123456drop table t_acc;create table t_acc( id int,balance double(7,2));insert into t_acc values(1,10000),(2,10000); è„è¯» ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ²¡æœ‰æäº¤çš„æ•°æ® - ç»å¯¹ä¸å…è®¸çš„. ä¸å¯é‡å¤è¯» set session transaction isolation level read committed; ä¸€ä¸ªäº‹åŠ¡Aåœ¨è¯»å–ä¸€æ¬¡ä¹‹å,å¦å¤–ä¸€ä¸ªäº‹åŠ¡Båœ¨è¿›è¡Œupdateæ“ä½œ.å¹¶ä¸”commit. Aäº‹åŠ¡åœ¨æ²¡æœ‰è‡ªå·±æ²¡æœ‰æäº¤ä¹‹å‰,è¯»å–åˆ°äº†Bäº‹åŠ¡æäº¤ä¹‹åçš„æ•°æ®.å¯¼è‡´Aäº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åˆ°çš„ç»“æœä¸ä¸€æ ·. å¹»è¯» å®ƒå’Œä¸å¯é‡å¤è¯»ç±»ä¼¼.ä¾§é‡ç‚¹ä¸åŒ.ä¸å¯é‡å¤è¯»å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨æŸ¥è¯¢.å¦å¤–ä¸€ä¸ªäº‹åŠ¡åœ¨ä¿®æ”¹(update) å¹»è¯»å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨ä¿®æ”¹.å¦å¤–ä¸€ä¸ªäº‹åŠ¡åœ¨æ’å…¥(insert). set session transaction isolation level read committed; äº‹åŠ¡Aåœ¨ä¿®æ”¹,äº‹åŠ¡B-insertå¹¶ä¸”æäº¤äº†.äº‹åŠ¡Aåœ¨æœ¬äº‹åŠ¡ä¸­å†æ¬¡æŸ¥è¯¢,å‘ç°äº†å¥½åƒæœ‰â€æ›´æ–°å¤±è´¥â€çš„æ•°æ®.å°±åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·. å¯é‡å¤è¯» é»˜è®¤çš„éš”ç¦»çº§åˆ« set session transaction isolation level repeatable read; äº‹åŠ¡Aè¯»å–ä¸€æ¬¡,äº‹åŠ¡Bæ‰§è¡Œupdateæ“ä½œ.äº‹åŠ¡Aåœ¨æ²¡æœ‰ç»“æŸå½“å‰äº‹åŠ¡ä¹‹å‰,å¤šæ¬¡è¯»å–åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„. å¿…é¡»è¦commitä¹‹å,æ‰èƒ½å¤Ÿè¯»å–åˆ°Bäº‹åŠ¡æäº¤ä¹‹åçš„ä¿®æ”¹æ•°æ®. æ€»ç»“ è„è¯» ä¸å¯é‡å¤è¯» å¹»è¯» è¯»æœªæäº¤ âˆš âˆš âˆš è¯»å·²æäº¤ Ã— âˆš âˆš å¯é‡å¤è¯» Ã— Ã— âˆš ä¸²è¡ŒåŒ– Ã— Ã— Ã—","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://apelisun.github.io/tags/mysql/"},{"name":"meet DB","slug":"meet-DB","permalink":"https://apelisun.github.io/tags/meet-DB/"}]},{"title":"mysql2","slug":"mysql2","date":"2022-08-09T13:22:58.000Z","updated":"2022-08-10T03:48:27.151Z","comments":true,"path":"2022/08/09/mysql2/","link":"","permalink":"https://apelisun.github.io/2022/08/09/mysql2/","excerpt":"","text":"è§†å›¾-view æˆ‘ä»¬ä½¿ç”¨createå‘½ä»¤æ¥æ„å»ºdatabase,user,table(åŸºæœ¬å•ä½),view,ç´¢å¼•,å‡½æ•°,å­˜å‚¨è¿‡ç¨‹,è§¦å‘å™¨ - æ•°æ®åº“çš„å•ä½. è§†å›¾å®é™…ä¸Šå°±æ˜¯ä¸€å¼ â€è™šæ‹Ÿè¡¨â€,å®é™…ä¸Šæ˜¯ä¸å­˜åœ¨çš„.åªæ˜¯é€»è¾‘ä¸Šçš„æŸ¥è¯¢ç»“æœçš„é›†åˆ. è§†å›¾çš„åˆ†ç±» ç®€å•è§†å›¾ è§†å›¾æ¥è‡ªäºå•è¡¨æŸ¥è¯¢çš„é›†åˆ - å…è®¸æ‰§è¡ŒDMLæ“ä½œ å¤æ‚è§†å›¾ è§†å›¾æ¥è‡ªäºå¤šè¡¨å…³è”æŸ¥è¯¢çš„é›†åˆ - ä¸ä¸€å®šå…è®¸æ‰§è¡ŒDMLæ“ä½œ. åˆ›å»ºçš„è¯­æ³•12345DROP view è§†å›¾å;CREATE VIEW è§†å›¾åASSELECTæŸ¥è¯¢è¯­å¥; 123create view t_acc_view as select * from t_acc;select * from t_acc_view; å¤æ‚è§†å›¾ 12345678910111213drop view co_view;create view co_view asselect c.cname,o.ord_no from t_customer c join t_ord o on c.id = o.customer_id;update co_view set cname='xx'; //å…è®¸updatedrop view co_view;create view co_view asselect customer_id,count(*) c_ from t_ord group by customer_id;-- ä¸å…è®¸æ‰§è¡Œupdateæ“ä½œ.mysql&gt; update co_view set c_=1;ERROR 1288 (HY000): The target table co_view of the UPDATE is not updatable æµ‹è¯• ä¿®æ”¹åŸè¡¨,è§†å›¾è‚¯å®šå˜åŒ–.æœ‰å¯èƒ½è¿˜ä¼šå¯¼è‡´è§†å›¾æ•°æ®å…¨éƒ¨ä¸¢å¤±. 123456789101112drop view t_acc_view;create view t_acc_viewasselect * from t_acc where balance=16000;-- æ›´æ–°åŸè¡¨-- æ›´æ–°äº†è¿™ä¸ªè§†å›¾æ¥æºçš„é‚£ä¸ªæ¡ä»¶åˆ—.update t_acc set balance = balance+1000 where id=2;mysql&gt; select * from t_acc_view;Empty set (0.00 sec) ä¿®æ”¹è§†å›¾ - åŒæ ·ä¹Ÿä¼šå¯¹åŸè¡¨é€ æˆå½±å“. 12345678910111213141516drop view t_acc_view;create view t_acc_viewasselect * from t_acc where id=1;-- æ›´æ–°è§†å›¾update t_acc_view set balance=1000 where id=1;mysql&gt; select * from t_acc;+------+----------+| id | balance |+------+----------+| 1 | 1000.00 || 2 | 17000.00 || 3 | 15000.00 |+------+----------+ é’ˆå¯¹é¢˜1çš„æƒ…å†µ,æ›´æ–°åˆ—å¯èƒ½å¯¼è‡´è§†å›¾å¤±æ•ˆ. 1234drop view t_acc_view;create view t_acc_viewasSELECTå¸¦whereçš„æ¡ä»¶æŸ¥è¯¢è¯­å¥ with check option with check optionä½œç”¨:ä¸å…è®¸æ›´æ–°è§†å›¾çš„æ¥æºçš„é‚£ä¸ªæ¡ä»¶åˆ—. è‚¯å®šæ˜¯è¦é…åˆwhereè¯­å¥ä¸€èµ·ä½¿ç”¨çš„,å¦åˆ™æ²¡æœ‰ä»»ä½•æ„ä¹‰ 1234567drop view t_acc_view;create view t_acc_viewasselect * from t_acc where balance=1000 with check option;mysql&gt; update t_acc_view set balance=2000 where id=1;ERROR 1369 (HY000): CHECK OPTION failed 'dy.t_acc_view' è§†å›¾çš„å¥½å¤„ å°è£…SQLè¯­å¥ å°è£…æ¯”è¾ƒå¤æ‚çš„SQLè¯­å¥,åœ¨Javaä¸­ç›´æ¥æŸ¥è¯¢è§†å›¾å³å¯. å®šåˆ¶æ•°æ® ç³»ç»Ÿä¸åŒçš„è§’è‰² - çœ‹åˆ°çš„æ•°æ®åº”è¯¥æ˜¯ä¸ä¸€æ ·çš„. å®‰å…¨æ€§ æ•°æ®åº“åº”è¯¥æœ‰å¤šä¸ªuserè´¦å·çš„,å¯ä»¥ç»™ä¸åŒçš„ç”¨æˆ·æˆäºˆä¸åŒçš„è§†å›¾çš„æƒé™(select,insert,update,delete) æˆæƒgrant åˆå¹¶æŠ½ç¦»å‡ºå»çš„æ•°æ® - å¯¹ç”¨æˆ·å±è”½çš„åº•å±‚çš„æ•°æ®åº“çš„ç»“æ„çš„è®¾è®¡. ç´¢å¼•-index ä½œç”¨:æé«˜æŸ¥è¯¢çš„æ•ˆç‡,ç±»ä¼¼äºä¹¦çš„é‚£ä¸ªç›®å½•. ä»‹ç» Myisamå­˜å‚¨å¼•æ“ ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†å¼€å­˜å‚¨çš„.æ˜¯ä¿©ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ æ•°æ®ç»“æ„:B+æ ‘ Innodbå­˜å‚¨å¼•æ“ æ•°æ®å’Œç´¢å¼•æ˜¯åˆäºŒä¸ºä¸€çš„,æ˜¯ä¸€ä¸ªæ–‡ä»¶. B+æ ‘ ç´¢å¼•ä¹Ÿæ˜¯å ç”¨ç‰©ç†ç©ºé—´çš„. å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡ŒDMLæ“ä½œçš„æ—¶å€™,ç»´æŠ¤ç´¢å¼•çš„-æ¶ˆè€—ä¸€ç‚¹é¢å¤–çš„æ—¶é—´ å¦‚æœè¡¨ä¸­æŸåˆ—é‡å¤çš„æ•°æ®æ¯”è¾ƒå¤š,æ²¡æœ‰å¿…è¦åˆ›å»ºç´¢å¼• - æŸ¥æ‰¾çš„æ—¶å€™æ¥è¿‘äºå…¨è¡¨æ‰«æèŠ±è´¹çš„æ—¶é—´. å½“è¡¨ä¸­æ²¡æœ‰æŒ‡å®šç´¢å¼•åˆ—,é‚£ä¹ˆé»˜è®¤çš„ç´¢å¼•åˆ—å°±æ˜¯ä¸»é”®åˆ—. show index from è¡¨å \\G; ç´¢å¼•çš„åˆ†ç±» ä¸»é”®ç´¢å¼• 1234Key_name: PRIMARY-- éè¦åˆ é™¤ä¸»é”®çº¦æŸalter table è¡¨å drop primary key; å”¯ä¸€ç´¢å¼• 1æŸåˆ—å¢åŠ uniqueå”¯ä¸€çº¦æŸ,è‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼• å…¨æ–‡ç´¢å¼• åæœŸä¼šä½¿ç”¨elasticsearchæ¥è¿›è¡Œå…¨æ–‡æœç´¢ - æœç´¢å¼•æ“. å¤åˆç´¢å¼• - éµå®ˆæœ€å·¦åŒ¹é…åŸåˆ™. 1create index index_name on è¡¨å(åˆ—1,åˆ—2,åˆ—3); æ™®é€šç´¢å¼• 12create index index_name on è¡¨å(åˆ—);drop index index_name; ç´¢å¼•å¤±æ•ˆåœºæ™¯â€» å¦‚ä½•æŸ¥çœ‹ç´¢å¼•æ˜¯å¦ç”Ÿæ•ˆ - ç´¢å¼•æ‰§è¡Œè®¡åˆ’explain selectè¯­å¥; type - const&gt;eq_ref&gt;ref&gt;range&gt;index&gt;all) type-all å…¨è¡¨æ‰«æ - ç´¢å¼•æ˜¯å¤±æ•ˆçš„. 123456explain select * from index_test where id=1;+----+-------------+------------+------------+-------+---------------+---------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+------------+------------+-------+---------------+---------+---------+-------+------+----------+-------+| 1 | SIMPLE | index_test | NULL | const | PRIMARY | PRIMARY | 4 | const | 1 | 100.00 | NULL |+----+-------------+------------+------------+-------+---------------+---------+---------+-------+------+----------+-------+ è„šæœ¬123456789101112131415161718drop table index_test;create table index_test( id int(7) primary key, a int(7), b int(7), c varchar(20), d varchar(20));insert into index_test values(1,100,10,'aaa','AAA');insert into index_test values(2,200,30,'aab','BBB');insert into index_test values(3,300,20,'caa','CCC');insert into index_test values(4,100,10,'daa','DDD');insert into index_test values(5,500,50,'aad','FFF');drop index index_test_index;create index index_test_index on index_test(a,b,c);create index index_test_d on index_test(d(10));//10 - ç´¢å¼•é•¿åº¦ 1. å¤åˆç´¢å¼•éœ€è¦éµå®ˆæœ€å·¦åŒ¹é…åŸåˆ™1234567891011121314151617181920-- a,b,céƒ½æ˜¯èµ°äº†ç´¢å¼•çš„.explain select * from index_test where a = 2 and b=200 and c='aaa';type:ref key_len: 73-- aèµ°äº†ç´¢å¼•explain select * from index_test where a = 2;type: ref key_len:5-- a,béƒ½æ˜¯èµ°äº†ç´¢å¼•explain select * from index_test where a = 2 and b=200;type:ref key_len:10-- bæ˜¯ä¸èµ°çš„explain select * from index_test where b=200;type:ALL key_len:NULL-- type:ref key_len: 73-- mysqlåº•å±‚å‘ç°whereæ¡ä»¶åˆ—a,b,céƒ½æ˜¯å¤åˆç´¢å¼•,å…ˆè¿›è¡Œä¼˜åŒ–,a,b,c,è¿›è¡ŒæŸ¥è¯¢.explain select * from index_test where b=200 and c='aaa' and a=2; 2. æ¨¡ç³ŠåŒ¹é…12345678-- %åœ¨æœ«å°¾ - ç”Ÿæ•ˆexplain select * from index_test where a = 2 and b=200 and c like 'a%';-- %åœ¨å¼€å¤´,a,bæ˜¯èµ°ç´¢å¼•,ä½†æ˜¯cæ²¡æœ‰èµ°ç´¢å¼•explain select * from index_test where a = 2 and b=200 and c like '%a';-- %?%,a,bæ˜¯èµ°ç´¢å¼•,ä½†æ˜¯cæ²¡æœ‰èµ°ç´¢å¼•explain select * from index_test where a = 2 and b=200 and c like '%a%'; 3. æŸ¥è¯¢èŒƒå›´ä¹‹å12345-- b&gt;=10 æ¡ä»¶æˆç«‹,èŒƒå›´ä¹‹åçš„ç´¢å¼•æ˜¯ç”Ÿæ•ˆçš„. a,b,céƒ½æ˜¯èµ°ç´¢å¼•explain select * from index_test where a = 100 and b&gt;=10 and c='aaa';-- b&gt;10 æ¡ä»¶ä¸æˆç«‹,èŒƒå›´ä¹‹åçš„ç´¢å¼•æ˜¯å¤±æ•ˆçš„. åªæœ‰a,bæ˜¯èµ°ç´¢å¼•çš„explain select * from index_test where a = 100 and b&gt;10 and c='aaa'; 4. ç´¢å¼•åˆ—å‚åŠ äº†è®¡ç®—12-- type:ALLexplain select * from index_test where id+1=1; 5. ç´¢å¼•åˆ—ä½¿ç”¨äº†å‡½æ•°12-- type:ALLexplain select * from index_test where abs(id)=1; 6. æŸ¥è¯¢çš„æ•°æ®è¶…è¿‡æ•´å¼ è¡¨çš„30%7. is nullå’Œis not null1234567create index emp_index on s_emp(commission_pct);-- typ:ALL is null æ²¡æœ‰èµ°ç´¢å¼•explain select * from s_emp where commission_pct is null;-- type:range is not èµ°ç´¢å¼•.explain select * from s_emp where commission_pct is not null; 8. inå’Œnot in12345678explain select * from s_emp where id in(1,2,3);explain select * from s_emp where id not in(1,2,3);-- mysql5.7ä¹‹å‰in - èµ°ç´¢å¼•not in - ä¸èµ°ç´¢å¼•-- 8.x not inå…è®¸èµ°ç´¢å¼• å…³äºç´¢å¼•çš„é•¿åº¦key_lenè®¡ç®—æ–¹å¼ æ•°å€¼ç±»å‹ - int 4 + 1(è¯¥åˆ—æ˜¯å¦ä¸ºnull,æ²¡æœ‰è®¾ç½®not null,å°±éœ€è¦åŠ 1,å­˜å‚¨nullä¹Ÿå 1ä¸ª) å­—ç¬¦ä¸²ç±»å‹ - varchar(n) - utf8 - n*3+2+1(æ²¡æœ‰è®¾ç½®not null,å°±éœ€è¦åŠ 1,å­˜å‚¨nullä¹Ÿå 1ä¸ª) ç´¢å¼•é•¿åº¦ä½œç”¨ 12345678site: www.baidu.com www.baobao.com www.baxy.com siteç´¢å¼•é•¿åº¦æ˜¯5,ä¸å¤Ÿ,å‰ç¼€é‡å¤æ¯”è¾ƒå¤š.ç´¢å¼•é•¿åº¦è¦æœ‰åŒºåˆ†åº¦.æ¨èåè½¬ä¹‹åè¿›è¡Œå­˜å‚¨.å‡å°‘ç´¢å¼•é•¿åº¦. ç´¢å¼•çš„åˆ›å»ºç­–ç•¥ å“ªäº›åˆ—åˆ›å»ºç´¢å¼• ä¸»é”®åˆ—,å”¯ä¸€æ€§åˆ— é‡å¤æ€§æ¯”è¾ƒå°‘,ç»å¸¸è¢«æŸ¥è¯¢ä½†æ˜¯åŒæ—¶æ›´æ–°ä¸æ˜¯ç‰¹åˆ«é¢‘ç¹çš„åˆ—. order by + æ’åºåˆ— - åˆ›å»ºç´¢å¼•. 12order byè¯­å¥æœ¬èº«æ€§èƒ½å°±å¾ˆä½ä¸‹çš„. æ ¹æ®ç´¢å¼•è¿›è¡Œæ’åº.å¦‚æœæ˜¯idåˆ—ç´¢å¼•,æ’å…¥çš„æ—¶å€™å°±ä¼šå…ˆæ’åºäº†. join on åˆ— 12ç”¨æ¥è¿æ¥è¡¨çš„åˆ—é€‚åˆå»ºç´¢å¼•çš„.æœ¬èº«joinè¶Šå¤š,æ€§èƒ½è¶Šä½.å¼€å‘ä¸­å‡ ä¹éƒ½æ˜¯å•è¡¨æŸ¥è¯¢.å°½é‡ä¸è¦å»ä½¿ç”¨å¤æ‚æŸ¥è¯¢. ä¸é€‚åˆåˆ›å»ºç´¢å¼• nullå€¼å¤ªå¤šçš„åˆ— é‡å¤å€¼å¤ªå¤šçš„åˆ— æ›´æ–°æ¯”è¾ƒé¢‘ç¹çš„åˆ— é” è¡Œé” 123456begin;update s_emp set first_name='xxx' where id=1;//æ¡ä»¶åˆ—æ˜¯ç´¢å¼•åˆ— - è¡Œé” - é™ä½é”çš„ç²’åº¦è¡Œé”å’Œè¡¨é”1. è¡Œé”ç²’åº¦å°,æ¶‰åŠåˆ°é¢‘ç¹çš„åŠ é”å’Œé‡Šæ”¾é”çš„è¿‡ç¨‹.3. è¡¨é”ä¼šå½±å“åˆ°æŸ¥è¯¢æ•ˆç‡ 1234begin;update s_emp set first_name='xxx' where id=1;//å¦‚æœä¸Šé¢çš„äº‹åŠ¡æ²¡æœ‰commit,æ­¤å¤„ä¼šé˜»å¡å¦‚æœæ­¤å¤„æ›´æ–°çš„æ˜¯å¦å¤–ä¸€è¡Œ,å¯ä»¥ç›´æ¥æ‰§è¡Œupdate s_emp set first_name='xxx' where id=2; è¡¨é” 12éç´¢å¼•åˆ—æ¡ä»¶æ›´æ–°çš„æ—¶å€™ - é”è¡¨.æ‰€æœ‰çš„DMLæ“ä½œé»˜è®¤çš„ç”³è¯·è¡¨é” é¡µé” ä»‹äºè¡Œé”å’Œè¡¨é”ä¹‹é—´çš„. å…±äº«é” 12345678910111213141516171819selectè¯­å¥é»˜è®¤ç”³è¯·çš„å…±äº«é”.selectç”³è¯·æ’ä»–é”.selectè¯­å¥ for update;å®ç°æ‚²è§‚é”æ›´æ–°åº“å­˜stockä¼ªä»£ç :begin;select stock from xxx where id=1 for update;//æ›´æ–°stockcommit;","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://apelisun.github.io/tags/mysql/"},{"name":"view","slug":"view","permalink":"https://apelisun.github.io/tags/view/"}]},{"title":"mysql1","slug":"mysql1","date":"2022-08-09T13:22:47.000Z","updated":"2022-08-10T09:29:10.544Z","comments":true,"path":"2022/08/09/mysql1/","link":"","permalink":"https://apelisun.github.io/2022/08/09/mysql1/","excerpt":"","text":"æ•°æ®åº“ä»‹ç» æŒ‰ç…§ä¸€å®šçš„æ•°æ®ç»“æ„æ¥ç»„ç»‡,ç®¡ç†å’Œå­˜å‚¨æ•°æ®çš„ä»“åº“ ç”¨ä»“åº“çš„æ–¹å¼æ¥ç®¡ç†æ•°æ®çš„.ä¸€ä¸ªä»“åº“ä¸‹ä¼šæœ‰å¾ˆå¤šè¡¨.ä¸€ä¸ªè¡¨ç”±è¡Œå’Œåˆ—æ„æˆ. æ•°æ®çš„åˆ†ç±» å…³ç³»å‹æ•°æ®åº“ è¡¨æ ¼å‹æ•°æ®åº“ - æœ‰è¡Œå’Œåˆ—æ¥æ„æˆä¸€å¼ è¡¨,è¡¨ä¸­å­˜æ”¾æ•°æ® å¸¸è§çš„äº§å“:MS-sqlserver,ä¸»æµçš„å…è´¹çš„Oracle-mysql(ä¸­å°å‹çš„åº”ç”¨),æ”¶è´¹çš„Oracle-oracle(å¤§å‹çš„åº”ç”¨) nosql - ä¸ä»…ä»…æ˜¯sql - éå…³ç³»å‹æ•°æ®åº“ é”®å€¼å¯¹æ•°æ®åº“ - redis æ–‡æ¡£å‹æ•°æ®åº“ - mongodb åˆ—å¼æ•°æ®åº“ - hbase å›¾å½¢æ•°æ®åº“ æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹ serverå’Œclient å½“æˆ‘ä»¬å®‰è£…å¥½dbä¹‹å,è‡ªå¸¦å®‰è£…å¥½äº†mysql-serverç«¯å’Œmysql-clientç«¯ dbæ­£å¸¸ä½¿ç”¨,ä¸€å®šè¦ä¿éšœmysql-serverç«¯å¤„äºè¿è¡ŒçŠ¶æ€ å³å‡»è®¡ç®—æœº - ç®¡ç† - æœåŠ¡ - æœåŠ¡å’Œåº”ç”¨ç¨‹åº - ğŸ‘‰ğŸ»å³è¾¹çª—å£ - Mysql - å¯åŠ¨æ–¹å¼è®¾ç½®å¼€å¯è‡ªå¯. å¯ä»¥é€šè¿‡ç»ˆç«¯è¾“å…¥å‘½ä»¤æ¥å¯åŠ¨mysql-serverç«¯ 12net start mysqlnet stop mysql mysql-clientå®¢æˆ·ç«¯ ç¬¬ä¸‰æ–¹çš„æ”¶è´¹navicat idea javaä»£ç  è‡ªå¸¦çš„æ§åˆ¶å° ä¸“ä¸šæœ¯è¯­ DB - DataBase æ•°æ®åº“ DBA - æ•°æ®åº“ç®¡ç†å‘˜(ä¾§é‡äºè¿ç»´),DE - æ•°æ®åº“ç ”å‘å·¥ç¨‹å¸ˆ DBMS - æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ,å®‰è£…åœ¨æ“ä½œç³»ç»Ÿ.ç”¨æˆ·é€šè¿‡dbmsæ¥æ“ä½œdb,dbaé€šè¿‡dbmsæ¥ç®¡ç†db,ä¿è¯dbåœ¨7*24hé«˜æ•ˆè¿è½¬ äºº - dbms - db(os) RDBMS - å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ DBS - æ•°æ®åº“ç³»ç»Ÿ,å¤§çš„èŒƒç•´,dbs = dba+db+dbms è¿æ¥æ•°æ®åº“ å‰æ:mysqlå®‰è£…å¹¶ä¸”é…ç½®å¥½äº†ç¯å¢ƒå˜é‡ 1mysql -uç”¨æˆ·å -på¯†ç  1mysql -uroot -proot ä¿®æ”¹å¯†ç  12345678alter user 'ç”¨æˆ·å'@'dbæ‰€åœ¨ä¸»æœºip' identified by 'æ–°çš„å¯†ç ';use mysqlalter user 'root'@'localhost' identified by 'root';-- é€€å‡ºé‡æ–°ç™»å½•exit; å¯¼å…¥è„šæœ¬1234567891011121314151617181920212223242526272829-- 1. åˆ›å»ºæ•°æ®åº“ create dabatase æ•°æ®åº“åcreate database dy;-- æŸ¥çœ‹æ‰€æœ‰çš„dbshow databases;-- 2. ä½¿ç”¨æ•°æ®åº“use dy-- 3. å¯¼å…¥è„šæœ¬ - .sqlä¸ºåç¼€çš„sqlæ–‡ä»¶-- 3-1. åœ¨dyæ•°æ®åº“ä¸­ç”Ÿæˆ5å¼ è¡¨-- 3-2. æ¯å¼ è¡¨ä¸­æ¨¡æ‹Ÿä¸€äº›æ•°æ®source è„šæœ¬æ–‡ä»¶çš„ç»å¯¹è·¯å¾„;-- 4. æŸ¥çœ‹è¯¥åº“ä¸‹æ‰€æœ‰çš„è¡¨show tables;+--------------+| Tables_in_dy |+--------------+| s_customer || s_dept || s_emp || s_ord || s_region |+--------------+--5. æŸ¥çœ‹è¡¨ç»“æ„desc s_emp è®¾ç½®æ•°æ®åº“ç¼–ç  æŸ¥çœ‹ç¼–ç  1234567891011121314show variables like 'character_set%';+--------------------------+-----------------------------------------------------------+| Variable_name | Value |+--------------------------+-----------------------------------------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | utf8 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | utf8 || character_set_system | utf8 || character_sets_dir | /usr/local/mysql-5.7.28-macos10.14-x86_64/share/charsets/ |+--------------------------+-----------------------------------------------------------+ ä¿®æ”¹ç¼–ç  2-1. ä¸´æ—¶ä¿®æ”¹ - setå‘½ä»¤ - ä»…ä»…æ˜¯å¯¹å½“å‰ä¼šè¯(ä¸€æ¬¡è¿æ¥,çª—å£)æœ‰æ•ˆ 1set names utf8; 2-2. æ°¸ä¹…ç”Ÿæ•ˆ - æ‰¾åˆ°my.iniæ–‡ä»¶ 12345[client]# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†default-character-set=utf8[mysqld]character_set_server=utf8 éœ€è¦é‡å¯mysql-server(mysqlæœåŠ¡å™¨ç«¯),æ‰èƒ½ç”Ÿæ•ˆ. é€šè¿‡guiæ–¹å¼ é€šè¿‡å‘½ä»¤ 12net stop mysqlnet start mysql SQLä»‹ç» SQL æ˜¯ Structured Query Language çš„ç¼©å†™ï¼Œä¸­æ–‡è¯‘ä¸ºâ€œç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€â€ã€‚SQL æ˜¯ä¸€ç§è®¡ç®—æœºè¯­è¨€ï¼Œç”¨æ¥å­˜å‚¨ã€æ£€ç´¢å’Œä¿®æ”¹å…³ç³»å‹æ•°æ®åº“ä¸­å­˜å‚¨çš„æ•°æ®ã€‚ â‘ mysql-clientè¾“å…¥åˆæ³•çš„sqlè¯­å¥,å¦‚æœsqléæ³•,ç›´æ¥æŠ¥é”™ â‘¡è¾“å…¥å›è½¦- å®¢æˆ·ç«¯å°†sqlè¯­å¥å‘é€åˆ°mysql-serverç«¯,ç¼–è¯‘å’Œè§£æsqlè¯­å¥çš„. â‘¢mysql-serverå°†æ‰§è¡Œå®Œsqlè¯­å¥çš„ç»“æœè¿”å›åˆ°mysql-clientè¿›è¡Œå±•ç¤º. æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±» DDL(Data Definition Language) - æ•°æ®å®šä¹‰è¯­è¨€ create drop alter truncate rename comment(æ³¨é‡Š) DML(Data Manipulation Language) - æ•°æ®æ“çºµè¯­è¨€ update delete insert DQL(Data Query Language) - æ•°æ®æŸ¥è¯¢è¯­è¨€ select TCL/DTL(Transaction Control Language):äº‹åŠ¡æ§åˆ¶è¯­è¨€ commit savepoint rollback ç®€å•æŸ¥è¯¢ æŸ¥è¯¢çš„æœ¬è´¨ åˆ°å“ªé‡ŒæŸ¥ æŸ¥ä»€ä¹ˆ è¯­æ³• - å…³é”®å­—æ˜¯å¤§å°å†™ä¸æ•æ„Ÿ 12SELECT åˆ—å1,åˆ—å2,..åˆ—nFROM è¡¨å; åˆ—å–åˆ«å æŸ¥è¯¢å‘˜å·¥çš„åå­—,è–ªæ°´ä»¥åŠèŒç§°. 1select first_name,salary,title from s_emp; æ–¹å¼ä¸€ 1234SELECT åˆ—å1 åˆ—åˆ«å,åˆ—å2 åˆ—åˆ«å,..åˆ—nFROM è¡¨å;select first_name åå­—,salary è–ªæ°´,title èŒç§° from s_emp; æ–¹å¼äºŒ 1234SELECT åˆ—å1 as åˆ—åˆ«å,åˆ—å2 as åˆ—åˆ«å,..åˆ—nFROM è¡¨å;select first_name as åå­—,salary as è–ªæ°´,title as èŒç§° from s_emp; æ–¹å¼ä¸‰ 12åˆ—åˆ«åä¸­é—´æœ‰ç©ºæ ¼,éœ€è¦ä½¿ç”¨åŒå¼•å·æ¥åŒ…è£¹æ ¼å¼select first_name \"å å­—\",salary \"è–ª æ°´\",title as \"èŒ ç§°\" from s_emp; æŸ¥è¯¢æ‰€æœ‰åˆ—* 1234-- æ ¼å¼åŒ–è¾“å‡ºselect * from s_emp; select * from s_emp \\G; å»é‡å…³é”®å­— distinct æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­æ‰€æœ‰çš„èŒç§°çš„ä¿¡æ¯ 1select distinct title from s_emp; åˆ—çš„è®¡ç®— åˆ—æ˜¯å…è®¸è®¡ç®—çš„ æŸ¥è¯¢å‘˜å·¥çš„åå­—,å¹´è–ª(ä¸å¸¦ææˆcommission_pct) 1select first_name,salary*12 å¹´è–ª from s_emp; æŸ¥è¯¢å‘˜å·¥çš„åå­—,å¹´è–ª(å¸¦ææˆcommission_pct) 123456789select first_name,salary*(1+commission_pct/100)*12 å¹´è–ª from s_emp; æŸ¥è¯¢å‡ºæ¥åªæœ‰5ä¸ªäººæœ‰å¹´è–ª,åŸå› æ˜¯å› ä¸ºåªæœ‰5ä¸ªäººæœ‰ææˆ.å…¶ä»–äººçš„ææˆéƒ½æ˜¯nullå€¼mysql - nullå€¼è®¡ç®—çš„ç»“æœè¿˜æ˜¯ä¸€ä¸ªnullå€¼ ä½¿ç”¨åˆ°mysqlä¸­æä¾›çš„ç©ºå€¼ç½®æ¢å‡½æ•°coalesce(m,n) - å¦‚æœmä¸ºnull,è¿”å›n,å¦åˆ™è¿”å›m select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp; ç»ƒä¹  æ‰¾å‡ºå‘˜å·¥çš„å§“å,å·¥èµ„ä»¥åŠå…¥èŒæ—¥æœŸ 12345select last_name,first_name,salary,start_date from s_emp;-- åˆ—çš„æ‹¼æ¥ concat(m,n,a,b,c,..)-- mysqlä¸­çš„å­—ç¬¦ä¸²ç»Ÿä¸€ä½¿ç”¨å•å¼•å·select concat(last_name,' ',first_name) å§“å,salary,start_date from s_emp; æ‰¾å‡ºæ‰€æœ‰çš„å®¢æˆ·åä»¥åŠä»–çš„è”ç³»æ–¹å¼ 1234select name,phone from s_customer;-- æŸ¥è¯¢å§“åçš„æ—¶å€™-- è”¡æ ¹èŠ± - è”¡** æ‰¾å‡ºæ¯ä¸ªè®¢å•çš„è´¹ç”¨,æ”¯ä»˜æ–¹å¼ä»¥åŠå‡ºè´§æ—¥æœŸ 1select total,payment_type,date_ordered from s_ord; æ¡ä»¶æŸ¥è¯¢123SELECT åˆ—å1,åˆ—å2,..åˆ—nFROM è¡¨åWHERE æ¡ä»¶è¡¨è¾¾å¼; è¿ç®—ç¬¦æ¯”è¾ƒè¿ç®—ç¬¦ 1&gt; &lt; &gt;= &lt;= != &lt;&gt; = å…¶ä»–è¿ç®—ç¬¦ between â€¦ and .. åœ¨â€¦åˆ°â€¦ä¹‹é—´ in(é›†åˆ) - åœ¨æŸä¸ªé›†åˆå†… not in(é›†åˆ) - ä¸åœ¨æŸä¸ªé›†åˆå†… is - åˆ¤æ–­æ˜¯å¦ä¸ºnull,åˆ¤æ–­nullå€¼ä¸èƒ½ç”¨= is not - åˆ¤æ–­æ˜¯å¦ä¸ä¸ºnull é€»è¾‘è¿æ¥ç¬¦ and æ¡ä»¶åŒæ—¶æˆç«‹,è¿”å›true or æœ‰ä¸€ä¸ªæ¡ä»¶æˆç«‹,å°±è¿”å›true ç»ƒä¹  æŸ¥è¯¢éƒ¨é—¨ç¼–å·(dept_id)ä¸º41,42,45çš„å‘˜å·¥æ‰¾å‡ºæ¥ 1234select first_name,dept_id from s_empwhere dept_id=41 or dept_id=42 or dept_id=45;select first_name,dept_id from s_emp where dept_id in(41,42,45); æŸ¥è¯¢æ²¡æœ‰ææˆçš„å‘˜å·¥ 1select first_name,commission_pct from s_emp where commission_pct is null; æ‰¾å‡ºå·¥èµ„åœ¨[1200,1500]ä¹‹é—´çš„å‘˜å·¥ 1234select first_name,salary from s_emp where salary between 1200 and 1500;-- æ›´åŠ çµæ´»select first_name,salary from s_emp where salary&gt;=1200 and salary&lt;=1500; æŸ¥æ‰¾å·¥èµ„å¤§äº1500å¹¶ä¸”æ²¡æœ‰ææˆçš„å‘˜å·¥ 1select first_name,salary from s_emp where salary&gt;1500 and commission_pct is null; æŸ¥æ‰¾å¹´è–ª(åŒ…æ‹¬ææˆ)è¶…è¿‡15000çš„å‘˜å·¥ 123456789select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 _year from s_empwhere salary*(1+coalesce(commission_pct,0)/100)*12&gt;15000;-- ç»™åˆ—å–åˆ«åçš„æ„ä¹‰-- å­æŸ¥è¯¢ - æŸ¥è¯¢çš„ç»“æœä½œä¸ºè™šæ‹Ÿè¡¨ - å­æŸ¥è¯¢ä¸€å®šè¦æ”¾åœ¨()ä¸­select * from X where _year&gt;15000;æŸ¥è¯¢çš„ç»“æœæ¥æ›¿ä»£X,å­æŸ¥è¯¢çš„ç»“æœä½œä¸ºè¡¨çš„è¯ - éœ€è¦ç»™è¡¨å–åˆ«åselect * from (select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 _year from s_emp) core_ where _year&gt;15000; æ‰¾å‡ºé™¤äº†41éƒ¨é—¨çš„å‘˜å·¥ 123select first_name,dept_id from s_emp where dept_id &lt;&gt; 41;select first_name,dept_id from s_emp where dept_id not in(41); æ‰¾å‡ºäºšæ´²åŒºåŸŸçš„ä¿¡æ¯ 12-- mysqlä¸­é‡‡ç”¨å•å¼•å·select * from s_region where name='Asia'; æ¨¡ç³ŠæŸ¥è¯¢ å¤§å°å†™ä¸æ•æ„Ÿçš„ å…³é”®å­—like å ä½ç¬¦ % ä»£è¡¨çš„ä»»æ„å¤šä¸ªä»»æ„å­—ç¬¦ _ ä»£è¡¨çš„æ˜¯ä»»æ„å•ä¸ªå­—ç¬¦ è½¬ä¹‰å­—ç¬¦ first_nameåç§°æ­£å¥½åŒ…å«äº†%æˆ–è€…_ 1update s_emp set first_name='Mar%k' where id=4; æŸ¥è¯¢first_nameåŒ…å«%çš„å‘˜å·¥ 12345-- å®šä¹‰è½¬ä¹‰å­—ç¬¦,é»˜è®¤çš„æ˜¯\\select first_name from s_emp where first_name like '%\\%%'; -- è‡ªå®šä¹‰è½¬ä¹‰å­—ç¬¦,ç”¨escape æ–°çš„è½¬ä¹‰å­—ç¬¦select first_name from s_emp where first_name like '%?%%' escape '?'; ç»ƒä¹  æŸ¥è¯¢first_nameåŒ…å«mçš„ 1select first_name from s_emp where first_name like '%m%'; æŸ¥è¯¢ä»¥Cå¼€å¤´çš„å‘˜å·¥ 1select first_name from s_emp where first_name like 'C%'; æŸ¥è¯¢ç¬¬ä¸‰ä¸ªå­—æ¯æ˜¯â€™eâ€™çš„å‘˜å·¥ 1select first_name from s_emp where first_name like '__e%'; æŸ¥è¯¢å…¥èŒæ—¶é—´æ˜¯6æœˆä»½çš„å‘˜å·¥ - æ¨¡ç³ŠæŸ¥è¯¢ - ä¸æ˜¯æ­£è§„çš„ 1select first_name,start_date from s_emp where start_date like '%-06-%'; æ’åº1234567SELECT åˆ—å1,åˆ—å2,..åˆ—nFROM è¡¨åWHERE æ¡ä»¶è¡¨è¾¾å¼ORDER Byè¯­å¥ [asc|desc]ascå¯ä»¥çœç•¥ä¸å†™ - å‡åºdescå¿…é¡»è¦å†™ - é™åº æ ¹æ®å¹´è–ªé™åºæ’åˆ— æ–¹å¼ä¸€: order by åˆ—å 12select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 from s_emp order by salary*(1+coalesce(commission_pct,0)/100)*12 desc; æ–¹å¼äºŒ: order by åˆ—åˆ«å 12select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp order by å¹´è–ª desc; æ–¹å¼ä¸‰: order by åˆ—çš„åºå· åˆ—çš„åºå·ä»1å¼€å§‹ =&gt; æ¨èæ–¹å¼ 12select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp order by 2 desc; æ ¹æ®å¹´è–ªé™åºæ’.å¦‚æœå¹´è–ªä¸€æ ·,åˆ™ç»§ç»­æŒ‰ç…§first_nameå‡åºæ’åˆ— 12select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp order by 2 desc,1; è½¬æ¢å‡½æ•°æ•°å­—å’Œå­—ç¬¦ä¸² å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­— 123select '1'+0;mysqlä¸­å­—ç¬¦æ•°å­—é‡åˆ°æ•°å­—è¿›è¡Œ+,è‡ªåŠ¨å°†å­—ç¬¦è½¬æ¢æˆæ•°å­—æ¥è¿›è¡Œè®¡ç®—. æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸² - concatå‡½æ•° - æ‹¼æ¥åˆ é™¤ 1select concat(1,2); // 12 å­—ç¬¦ä¸²å’Œæ—¥æœŸ å…³äºæ—¥æœŸæ¨¡æ¿ 123456789101112131415161718192021222324(åœ¨formatå­—ç¬¦ä¸²ä¸­å¯ç”¨æ ‡å¿—ç¬¦: %m æœˆåå­—(januaryâ€¦â€¦december) %w æ˜ŸæœŸåå­—(sundayâ€¦â€¦saturday) %d æœ‰è‹±è¯­å‰ç¼€çš„æœˆä»½çš„æ—¥æœŸ(1st, 2nd, 3rd, ç­‰ç­‰ã€‚ï¼‰ %Y å¹´, æ•°å­—, 4 ä½ %y å¹´, æ•°å­—, 2 ä½ %a ç¼©å†™çš„æ˜ŸæœŸåå­—(sunâ€¦â€¦sat) %d æœˆä»½ä¸­çš„å¤©æ•°, æ•°å­—(00â€¦â€¦31) %e æœˆä»½ä¸­çš„å¤©æ•°, æ•°å­—(0â€¦â€¦31) %m æœˆ, æ•°å­—(01â€¦â€¦12) %c æœˆ, æ•°å­—(1â€¦â€¦12) %b ç¼©å†™çš„æœˆä»½åå­—(janâ€¦â€¦dec) %j ä¸€å¹´ä¸­çš„å¤©æ•°(001â€¦â€¦366) %H 24æ—¶åˆ¶å°æ—¶(00â€¦â€¦23) %k å°æ—¶(0â€¦â€¦23) %h 12æ—¶å°æ—¶(01â€¦â€¦12) %i å°æ—¶(01â€¦â€¦12) %l å°æ—¶(1â€¦â€¦12) %i åˆ†é’Ÿ, æ•°å­—(00â€¦â€¦59) %r æ—¶é—´,12 å°æ—¶(hh:mm:ss [ap]m) %t æ—¶é—´,24 å°æ—¶(hh:mm:ss) %s ç§’(00â€¦â€¦59) %p amæˆ–pm %w ä¸€ä¸ªæ˜ŸæœŸä¸­çš„å¤©æ•°(0=sunday â€¦â€¦6=saturday ï¼‰ è·å–å½“å‰ç³»ç»Ÿçš„æ—¥æœŸ 1234567select now();+---------------------+| now() |+---------------------+| 2022-08-05 11:09:49 |+---------------------+ æ—¥æœŸè½¬æ¢æˆæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸² - date_format(æ—¥æœŸ,æ¨¡æ¿) 12345æ¨¡æ¿ %Y %m %d %H %i %sselect date_format(now(),'%Y/%m/%d %H:%i:%s');select date_format(now(),'%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%iåˆ†%sç§’'); å­—ç¬¦ä¸²è½¬æˆæ—¥æœŸ - str_to_date(å­—ç¬¦ä¸²,æ¨¡æ¿) - å­—ç¬¦ä¸²æ ¼å¼è¦å’Œæ¨¡æ¿çš„æ ¼å¼åŒ¹é… 12345678910111213141516171819202122232425-- åˆ é™¤è¡¨drop table tt;-- åˆ›å»ºè¡¨create table tt( id int(7) primary key, name varchar(20), birthday date); -- date - å¹´æœˆæ—¥-- æ’å…¥æ•°æ®-- mysqlä¸­é»˜è®¤æ”¯æŒçš„æ ¼å¼ - ä¼šå°†å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æˆdateç±»å‹insert into tt values(1,'admin','2022-09-01');//okinsert into tt values(2,'tom','2022/09/01');//okinsert into tt values(3,'jack','20221001');//ok -- ä¸æ”¯æŒçš„æ—¶å€™insert into tt values(4,'jack','aa');ERROR 1292 (22007): Incorrect date value: 'aa' for column 'birthday' at row 1 insert into tt values(4,'jack','01-05-2022');ERROR 1292 (22007): Incorrect date value: '01-05-2022' for column 'birthday' at row 1 -- éè¦ä½¿ç”¨'01-05-2022'å­—ç¬¦ä¸²æ ¼å¼çš„,æ‰éœ€è¦ä½¿ç”¨str_to_dateå‡½æ•°è¿›è¡Œè½¬æ¢insert into tt values(4,'jack',str_to_date('01-05-2022','%d-%m-%Y')); å¯¼å…¥è„šæœ¬çš„æ—¶å€™ - å¤±è´¥åœºæ™¯ - å­—ç¬¦ä¸²æ—¥æœŸæ ¼å¼ä¸æ”¯æŒ å•è¡Œå‡½æ•° select å‡½æ•°(å‚æ•°); å‡½æ•°æ˜¯å¯ä»¥åº”ç”¨åœ¨æŸ¥è¯¢åˆ—ä¸Šçš„. å‡½æ•°æ˜¯å…è®¸åµŒå¥—ä½¿ç”¨çš„. 1. å­—ç¬¦ä¸²å‡½æ•° instr(str,substr) - è¿”å›å­—ç¬¦ä¸²substråœ¨å­—ç¬¦ä¸²strç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®(strä¸åŒ…å«substræ—¶è¿”å›0) lpad(str,len,padstr) - ç”¨å­—ç¬¦ä¸²padstrå¡«è¡¥strå·¦ç«¯ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlenå¹¶è¿”å› 1select lpad('ab',5,'cd');//cdcab rpad(str,len,padstr) - ç”¨å­—ç¬¦ä¸²padstrå¡«è¡¥strå³ç«¯ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlenå¹¶è¿”å› 1select rpad('ab',5,'cd');//abcdc 5ä»£è¡¨çš„æ˜¯æ€»çš„é•¿åº¦ left(str,len) - è¿”å›å­—ç¬¦ä¸²strçš„å·¦ç«¯lenä¸ªå­—ç¬¦ right(str,len) - è¿”å›å­—ç¬¦ä¸²strçš„å³ç«¯lenä¸ªå­—ç¬¦ substring(str,pos,len) - è¿”å›å­—ç¬¦ä¸²strçš„ä½ç½®posèµ·lenä¸ªå­—ç¬¦ substring(str,pos) - è¿”å›å­—ç¬¦ä¸²strçš„ä½ç½®posèµ·åé¢çš„å­ä¸² 12åºå·ä»1å¼€å§‹select substring('mysql',2); //ysql ltrim(str) - è¿”å›åˆ é™¤äº†å·¦ç©ºæ ¼çš„å­—ç¬¦ä¸²str rtrim(str) - è¿”å›åˆ é™¤äº†å³ç©ºæ ¼çš„å­—ç¬¦ä¸²str space(n) - è¿”å›ç”±nä¸ªç©ºæ ¼å­—ç¬¦ç»„æˆçš„ä¸€ä¸ªå­—ç¬¦ä¸² replace(str,from_str,to_str) - ç”¨å­—ç¬¦ä¸²to_stræ›¿æ¢å­—ç¬¦ä¸²strä¸­çš„å­ä¸²from_strå¹¶è¿”å› 1select replace('i love java','java','mysql'); reverse(str) - é¢ å€’å­—ç¬¦ä¸²strçš„å­—ç¬¦é¡ºåºå¹¶è¿”å› insert(str,pos,len,newstr) - æŠŠå­—ç¬¦ä¸²strç”±ä½ç½®posèµ·lenä¸ªå­—ç¬¦é•¿çš„å­ä¸²æ›¿æ¢ä¸ºå­—ç¬¦ä¸² 1select insert('xxxxx',1,2,'**'); lower(str) - è¿”å›å°å†™çš„å­—ç¬¦ä¸²str upper(str) - è¿”å›å¤§å†™çš„å­—ç¬¦ä¸²str char_length(str) - ä¸ç®¡æ±‰å­—è¿˜æ˜¯æ•°å­—æˆ–è€…æ˜¯å­—æ¯éƒ½ç®—æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚ length(str);//æ±‰å­—å 3ä¸ª,å…¶ä»–å 1ä¸ª. ç»ƒä¹  é…åˆè¡¨ - å°†first_nameå…¨éƒ¨è½¬æ¢æˆå¤§å†™ 1select first_name,upper(first_name) from s_emp; first_name - æ¨¡æ‹Ÿé“¶è¡Œè´¦æˆ·æ˜¾ç¤º,åªæ˜¾ç¤ºé¦–å­—æ¯,å…¶ä½™æ¯ä¸ªå­—æ¯ç”¨*è¡¨ç¤º 12345678910111213-- substringå’Œrpadselect first_name,rpad(substring(first_name,1,1),char_length(first_name),'*') from s_emp;-- concat + substring + rpadselect first_name,concat(substring(first_name,1,1),rpad('*',char_length(first_name)-1,'*')) from s_emp;-- replace + substring + rpadselect first_name,replace(first_name,substring(first_name,2),rpad('*',char_length(first_name)-1,'*'))from s_emp;-- insert + rpadselect first_name,insert(first_name,2,char_length(first_name)-1,rpad('*',char_length(first_name)-1,'*'))from s_emp; 2. æ•°å­—å‡½æ•° abs(n) - æ±‚ç»å¯¹å€¼ mod(n,m) - å–æ¨¡è¿ç®—,è¿”å›nè¢«mé™¤çš„ä½™æ•°(åŒ%æ“ä½œç¬¦) floor(n) - è¿”å›ä¸å¤§äºnçš„æœ€å¤§æ•´æ•°å€¼ - å‘ä¸‹å–æ•´ ceiling(n) - è¿”å›ä¸å°äºnçš„æœ€å°æ•´æ•°å€¼ - å‘ä¸Šå–æ•´ round(n[,d]) - è¿”å›nçš„å››èˆäº”å…¥å€¼,ä¿ç•™dä½å°æ•°(dçš„é»˜è®¤å€¼ä¸º0) pow(x,y) - è¿”å›å€¼xçš„yæ¬¡å¹‚ sqrt(n) - è¿”å›éè´Ÿæ•°nçš„å¹³æ–¹æ ¹ pi() - è¿”å›åœ†å‘¨ç‡ rand() - è¿”å›åœ¨èŒƒå›´[0åˆ°1.0)å†…çš„éšæœºæµ®ç‚¹å€¼ truncate(n,d) - ä¿ç•™æ•°å­—nçš„dä½å°æ•°å¹¶è¿”å› - ç›´æ¥æˆªå– 3. æ—¥æœŸå‡½æ•° æŸ¥è¯¢å½“å‰ç³»ç»Ÿçš„æ—¥æœŸ - select now(); dayofweek(date) - è¿”å›æ—¥æœŸdateæ˜¯æ˜ŸæœŸå‡ (1=æ˜ŸæœŸå¤©,2=æ˜ŸæœŸä¸€,â€¦â€¦7=æ˜ŸæœŸå…­,odbcæ ‡å‡†) weekday(date) - è¿”å›æ—¥æœŸdateæ˜¯æ˜ŸæœŸå‡ (0=æ˜ŸæœŸä¸€,1=æ˜ŸæœŸäºŒ,â€¦â€¦6= æ˜ŸæœŸå¤©) year(date) - è¿”å›dateçš„å¹´ä»½(èŒƒå›´åœ¨1000åˆ°9999) month(date) - è¿”å›dateä¸­çš„æœˆä»½æ•°å€¼ dayofmonth(date) - è¿”å›dateæ˜¯ä¸€æœˆä¸­çš„ç¬¬å‡ æ—¥(åœ¨1åˆ°31èŒƒå›´å†…) hour(time) - è¿”å›timeçš„å°æ—¶æ•°(èŒƒå›´æ˜¯0åˆ°23) minute(time) - è¿”å›timeçš„åˆ†é’Ÿæ•°(èŒƒå›´æ˜¯0åˆ°59) second(time) - è¿”å›timeçš„ç§’æ•°(èŒƒå›´æ˜¯0åˆ°59) period_add(p,n) - å¢åŠ nä¸ªæœˆåˆ°æ—¶æœŸpå¹¶è¿”å›(pçš„æ ¼å¼yymmæˆ–yyyymm) mysql&gt;select period_add(â€˜202008â€™,3) ; æ³¨æ„:på¯ä»¥æ˜¯å­—ç¬¦ä¸²,ä¸€å®šè¦æ»¡è¶³ä¸€å®šçš„æ ¼å¼,æˆ–è€…å¯ä»¥ç›´æ¥ä½¿ç”¨dateç±»å‹. period_diff(p1,p2) - è¿”å›åœ¨æ—¶æœŸp1å’Œp2ä¹‹é—´æœˆæ•°(p1å’Œp2çš„æ ¼å¼yymmæˆ–yyyymm) p1-p2 curdate() - ä»¥â€™yyyy-mm-ddâ€™æˆ–yyyymmddæ ¼å¼è¿”å›å½“å‰æ—¥æœŸå€¼(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—) curtime() - ä»¥â€™hh:mm:ssâ€™æˆ–hhmmssæ ¼å¼è¿”å›å½“å‰æ—¶é—´å€¼(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—) now() - ä»¥â€™yyyy-mm-dd hh:mm:ssâ€™æˆ–yyyymmddhhmmssæ ¼å¼è¿”å›å½“å‰æ—¥æœŸæ—¶é—´(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—) last_day(date) - dateæ—¥æœŸæ‰€åœ¨æœˆçš„æœ€åä¸€å¤©æ˜¯ä»€ä¹ˆæ—¶å€™ datediff(d1,d2) - ä¸¤ä¸ªæ—¥æœŸd1,d2ä¹‹é—´ç›¸å·®çš„å¤©æ•° timestampdiff(type,d1,d2) - typeæ˜¯YEAR,d1å’Œd2ç›¸å·®çš„å¹´ä»½,MONTH,æœˆä»½ d1,d2 - yyyymmdd 3-1. è¡¥å…… date_add(date,interval expr type) date_sub(date,interval expr type) å…³äºtype 1234567ype:yearmonthdayhourminutesecond #å…³è”æŸ¥è¯¢ å…³è”æŸ¥è¯¢å°±æ˜¯å¤šè¡¨æŸ¥è¯¢ é”™è¯¯çš„å†™æ³• s_empè¡¨ä¸­25rows,s_deptè¡¨ä¸­12rows æŸ¥è¯¢å‘˜å·¥çš„åå­—ä»¥åŠè¿™ä¸ªå‘˜å·¥çš„éƒ¨é—¨åç§° 12345select first_name,name from s_emp,s_dept;300 rows å‘ç”Ÿäº†ç¬›å¡å°”ç§¯ - é”™è¯¯çš„ç»“æœ çº æ­£ - ä¼ ç»Ÿçš„å†™æ³•1234567891011121314151617181920212223select first_name,name from s_emp,s_dept where dept_id=id;ERROR 1052 (23000): Column 'id' in where clause is ambiguouså¤šå¼ è¡¨ä¸­å‡ºç°åŒåçš„åˆ—,éœ€è¦å¯¹è¡¨å–åˆ«åæ­£ç¡®çš„å†™æ³•:select e.first_name,d.name from s_emp e,s_dept d where e.dept_id=d.id;-- ç”¨æ¥è¡¨ç¤ºè¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»foreign key - å¤–é”®-- æŸ¥è¯¢è¿™ä¸ªå‘˜å·¥çš„first_nameä»¥åŠè¿™ä¸ªå‘˜å·¥æ‰€åœ¨çš„åŒºåŸŸå.-- ä¸€ä¸ªåŒºåŸŸå¯¹åº”å¤šä¸ªéƒ¨é—¨,ä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥.select e.first_name,r.name from s_emp e,s_dept d,s_region rwhere d.region_id = r.id and e.dept_id = d.id;for( ... s_emp e){ for(... s_dept d){ if(e.dept_id==d.id){ e+\":\"+d } }} joinå’Œonå†™æ³• å¦‚æœä¸€æ¡sqlè¯­å¥æ¶‰åŠåˆ°çš„è¡¨æ¯”è¾ƒå¤šçš„è¯,ä¼ ç»Ÿçš„å†™æ³•,å°±ä¸èƒ½å¾ˆç›´è§‚çš„çœ‹å‡ºæ¥å“ªä¸ªè¡¨å’Œå“ªä¸ªè¡¨ä¹‹é—´æœ‰ç›´æ¥çš„å…³ç³». è¡¨ join è¡¨ on å»é™¤ç¬›å¡å°”ç§¯ å¤–é”®ä¸€å®šæ˜¯å‡ºç°åœ¨å¤šçš„ä¸€æ–¹ on å¤šçš„ä¸€æ–¹çš„å¤–é”® = ä¸€çš„ä¸€æ–¹ä¸»é”® ä½†æ˜¯ä¹Ÿä¸ä¸€å®šéè¦ä½¿ç”¨å¤–é”®æ¥å»é™¤ç¬›å¡å°”ç§¯ è§„åˆ™: èƒ½å¤Ÿç”¨joinè¿æ¥çš„è¡¨ä¹‹é—´å¿…é¡»è¦æœ‰ç›´æ¥çš„å…³ç³». ç»ƒä¹  æ‰¾å‡ºæŸ¥è¯¢å‘˜å·¥çš„åå­—ä»¥åŠè¿™ä¸ªå‘˜å·¥çš„éƒ¨é—¨åç§° 1select e.first_name,d.name from s_emp e join s_dept d on e.dept_id = d.id; æ‰¾å‡ºâ€™Asiaâ€™åŒºåŸŸä¸Šçš„æ‰€æœ‰çš„å‘˜å·¥ 123456select e.first_name,r.name from s_emp e join s_dept don e.dept_id = d.idjoin s_region ron d.region_id = r.idwhere r.name='Asia'; æ‰¾å‡ºå®¢æˆ·çš„id,åç§°,è”ç³»æ–¹å¼ä»¥åŠè¿™ä¸ªå®¢æˆ·çš„è®¢å•ä¿¡æ¯ â€˜é—®é¢˜ - 15rows - [201,215]â€™ 1234select c.id,c.name,c.phone,o.* from s_customer cjoin s_ord o on c.id = o.customer_id;æŸ¥è¯¢å‡ºæ¥çš„ç»“æœç¼ºäº†id=207å’Œ215ä¿©ä¸ªå®¢æˆ·,å› ä¸ºè¿™ä¿©ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,æ‰€ä»¥è¿™ä¿©ä¸ªå®¢æˆ·æ²¡æœ‰æŸ¥è¯¢å‡ºæ¥. è¿æ¥çš„æ–¹å¼ å†…è¿æ¥ - [inner] join å¦‚æœjoinå·¦è¾¹çš„è¡¨åœ¨å³è¾¹çš„è¡¨ä¸­å¦‚æœä¸å­˜è®°å½•,åˆ™ä¸ä¼šè¢«æŸ¥è¯¢å‡ºæ¥. 12select c.id,c.name,c.phone,o.id from s_customer cinner join s_ord o on c.id = o.customer_id; å·¦è¿æ¥ - left join ä»¥å·¦è¾¹çš„è¡¨ä¸ºåŸºå‡†è¡¨.å³ä½¿å·¦è¾¹çš„è¡¨åœ¨å³è¾¹çš„è¡¨ä¸­æ²¡æœ‰è®°å½•,é‚£ä¹ˆå·¦è¾¹è¡¨ä¸­çš„è¿™æ¡è®°å½•ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥ æŸ¥è¯¢å®¢æˆ·å’Œè®¢å•ä¿¡æ¯,å³ä½¿è¿™ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,é‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥ 12select c.id,c.name,c.phone,o.id from s_customer cleft join s_ord o on c.id = o.customer_id; å³è¿æ¥ - right join ä»¥å³è¾¹çš„è¡¨ä¸ºåŸºå‡†è¡¨.å³ä½¿å³è¾¹çš„è¡¨åœ¨å·¦è¾¹çš„è¡¨ä¸­æ²¡æœ‰è®°å½•,é‚£ä¹ˆå³è¾¹è¡¨ä¸­çš„è¿™æ¡è®°å½•ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥ æŸ¥è¯¢å®¢æˆ·å’Œè®¢å•ä¿¡æ¯,å³ä½¿è¿™ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,é‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥ 12select c.id,c.name,c.phone,o.id from s_ord oright join s_customer c on c.id = o.customer_id; äº¤å‰è¿æ¥ - cross join - ä¸ä¼šä½¿ç”¨çš„,äº§ç”Ÿçš„æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç»“æœé›† - ç¬›å¡å°”ç§¯ 12select c.id,c.name,c.phone,o.id from s_customer ccross join s_ord o; å…¨è¿æ¥ full outer join - mysqlä¸æ”¯æŒ å…¨è¿æ¥ = å·¦è¿æ¥ + å³è¿æ¥ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364drop table t_user;drop table t_info;create table t_user( id int primary key, name varchar(20));insert into t_user values(1,'admin');insert into t_user values(2,'python');create table t_info( id int primary key, remark varchar(20), user_id int);insert into t_info values(1,'aaa',1);insert into t_info values(2,'bbb',3);-- åˆ†æ - å·¦è¿æ¥select u.*,info.* from t_user u left join t_info info on u.id = info.user_id;+----+--------+------+--------+---------+| id | name | id | remark | user_id |+----+--------+------+--------+---------+| 1 | admin | 1 | aaa | 1 || 2 | python | NULL | NULL | NULL |+----+--------+------+--------+---------+-- å³è¿æ¥select info.*,u.* from t_user u right join t_info info on u.id = info.user_id;+----+--------+---------+------+-------+| id | remark | user_id | id | name |+----+--------+---------+------+-------+| 1 | aaa | 1 | 1 | admin || 2 | bbb | 3 | NULL | NULL |+----+--------+---------+------+-------+-- å…¨è¿æ¥union - ä¸¤å¼ è¡¨ä¸­çš„é‡å¤çš„ç»“æœä¿ç•™äº†ä¸€æ¡ union all - ä¸¤å¼ è¡¨ä¸­çš„é‡å¤çš„ç»“æœéƒ½ä¼šå±•ç¤ºå‡ºæ¥ , å¹¶é›†select u.*,info.* from t_user u left join t_info info on u.id = info.user_idunion allselect u.*,info.* from t_user u right join t_info info on u.id = info.user_id; id | name | id | remark | user_id |+------+--------+------+--------+---------+| 1 | admin | 1 | aaa | 1 || 2 | python | NULL | NULL | NULL || 1 | admin | 1 | aaa | 1 || NULL | NULL | 2 | bbb | 3 |+------+--------+------+--------+---------+select u.*,info.* from t_user u left join t_info info on u.id = info.user_idunion select u.*,info.* from t_user u right join t_info info on u.id = info.user_id;+------+--------+------+--------+---------+| id | name | id | remark | user_id |+------+--------+------+--------+---------+| 1 | admin | 1 | aaa | 1 || 2 | python | NULL | NULL | NULL || NULL | NULL | 2 | bbb | 3 |+------+--------+------+--------+---------+ ç»ƒä¹  æŸ¥è¯¢å‘˜å·¥çš„åç§°ä»¥åŠä»–å¯¹åº”çš„ä¸Šå¸çš„åç§°,å³ä½¿è¿™ä¸ªå‘˜å·¥æ²¡æœ‰ä¸Šå¸,é‚£ä¹ˆä¹Ÿè¦æŸ¥è¯¢å‡ºæ¥ - è‡ªå…³è” 12select e1.first_name å‘˜å·¥,e2.first_name ä¸Šå¸from s_emp e1 left join s_emp e2 on e2.id = e1.manager_id; å¤šè¡Œå‡½æ•° count - ç»Ÿè®¡ä¸ªæ•°,nullå€¼ä¸ä¼šç»Ÿè®¡,é‡å¤çš„æ•°æ®,æœ‰ä¸€ä¸ªç®—ä¸€ä¸ª 12345678select count(*) from s_emp;select count(e.id) from s_emp e;select count(e.commission_pct) from s_emp;//5ä¸ª-- ç»Ÿè®¡èŒç§°çš„ä¸ªæ•°,ä½†æ˜¯é‡å¤çš„èŒç§°åªèƒ½ç®—1ä¸ªselect count(distinct title) from s_emp; sum - æ€»å’Œ,å¿½ç•¥nullå€¼ avg,max,min åˆ†ç»„æŸ¥è¯¢ åˆ†ç»„ç»Ÿè®¡ è¯­æ³• 12345SELECT è¯­å¥WHERE è¯­å¥GROUP BY è¯­å¥HAVING è¯­å¥ORDER BY è¯­å¥ ç»ƒä¹  ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•° - å•è¡¨ 1select e.dept_id,count(e.id) from s_emp e group by e.dept_id; ç»Ÿè®¡éƒ¨é—¨çš„id,nameä»¥åŠè¿™ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•° 123456789101112-- group by + d.id --- ok idæ˜¯ä¸»é”®åˆ— - å”¯ä¸€æ€§select d.id,d.name,count(e.id) from s_emp ejoin s_dept d on e.dept_id = d.id group by d.id;select d.id,d.name,count(e.id) from s_emp ejoin s_dept d on e.dept_id = d.id group by d.name;ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'dy.d.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by-- æ¨èselectåé¢è·Ÿçš„åˆ—(é™¤äº†ç»„å‡½æ•°/å¤šè¡Œå‡½æ•°)åº”è¯¥å’Œgroup by è·Ÿçš„åˆ—ä¿æŒä¸€è‡´select d.id,d.name,count(e.id) from s_emp ejoin s_dept d on e.dept_id = d.id group by d.id,d.name; ç»Ÿè®¡æ¯ä¸ªèŒç§°çš„äººæ•° 1select title,count(*) from s_emp group by title; ç»Ÿè®¡åŒºåŸŸid,åŒºåŸŸå,ä»¥åŠè¿™ä¸ªåŒºåŸŸä¸Šçš„å‘˜å·¥çš„ä¸ªæ•° 12select r.id,r.name,count(e.id) from s_region r join s_dept don d.region_id = r.id join s_emp e on e.dept_id = d.id group by r.id,r.name; ç»Ÿè®¡å®¢æˆ·çš„id,nameä»¥åŠè¿™ä¸ªå®¢æˆ·çš„è®¢å•çš„æ•°é‡,æ²¡æœ‰è®¢å•,åˆ™æ˜¾ç¤º0 12select c.id,c.name,count(o.id) from s_customer c left join s_ord oon o.customer_id = c.id group by c.id,c.name; ç»Ÿè®¡å„å¹´ä»½å…¥èŒçš„å‘˜å·¥(å¹´ä»½,å‘˜å·¥æ•°é‡) 12select year(start_date),count(e.id) from s_emp egroup by year(start_date); havingä½¿ç”¨æ–¹å¼ havingå’ŒwhereåŒºåˆ« whereæ¡ä»¶ç­›é€‰,ä½†æ˜¯åˆ†ç»„ä¹‹å‰,å¹¶ä¸”whereä¸ä¼šè·Ÿç»„å‡½æ•° havingåˆ†ç»„ä¹‹åçš„è¿›ä¸€æ­¥è¿‡æ»¤,ä½¿ç”¨ç»„å‡½æ•°è¿›è¡Œè¿‡æ»¤çš„ ç»ƒä¹  æŸ¥è¯¢å‡ºå¹³å‡å·¥èµ„è¶…è¿‡1300çš„éƒ¨é—¨ - éƒ¨é—¨id,name,å¹³å‡å·¥èµ„ 12select d.id,d.name,avg(e.salary) from s_dept d join s_emp eon d.id = e.dept_id group by d.id,d.name having avg(e.salary)&gt;1300; ç»Ÿè®¡é™¤äº†â€™Asiaâ€™åŒºåŸŸä¹‹å¤–çš„å„ä¸ªåŒºåŸŸçš„id,nameå’ŒåŒºåŸŸä¸Šçš„äººæ•°[å¤§äº3ä¸ª],æœ€åå†æ ¹æ®åŒºåŸŸçš„idè¿›è¡Œé™åºæ’åˆ— 1234567select r.id,r.name,count(e.id) from s_region r join s_dept d on r.id = d.region_idjoin s_emp e on e.dept_id = d.idwhere r.name&lt;&gt;'Asia'group by r.id,r.namehaving count(e.id)&gt;3order by 1 desc; æŸ¥è¯¢æ²¡æœ‰è®¢å•çš„å®¢æˆ· 12select c.id,c.name,count(o.id) from s_customer cleft join s_ord o on c.id = o.customer_id group by c.id,c.name having count(o.id)=0; å­æŸ¥è¯¢ å­æŸ¥è¯¢å¿…é¡»ä½¿ç”¨()æ‹¬èµ·æ¥ æ¡ä»¶åˆ— æŸ¥è¯¢åˆ— å­æŸ¥è¯¢çš„ç»“æœçœ‹åšæ˜¯â€ä¸€å¼ è¡¨â€ ç»ƒä¹  æŸ¥æ‰¾å’ŒMarkå·¥èµ„ä¸€æ ·çš„å‘˜å·¥. 123456789-- åˆ†è§£ - markå·¥èµ„ - 1450select salary from s_emp where first_name='Mark';-- æ‰¾å‡º1450è–ªèµ„çš„å‘˜å·¥select first_name,salary from s_emp where salary = 1450 and first_name&lt;&gt;'Mark';-- æ•´åˆ-- å­æŸ¥è¯¢å‡ºç°åœ¨æ¡ä»¶éƒ¨åˆ†select first_name,salary from s_emp where salary = (select salary from s_emp where first_name='Mark') and first_name&lt;&gt;'Mark'; ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„id,nameä»¥åŠéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•° 123select d.id,d.name,( select count(e.id) from s_emp e where e.dept_id = d.id) from s_dept d; ç»ƒä¹ 2 ç»Ÿè®¡å®¢æˆ·çš„id,nameä»¥åŠå®¢æˆ·çš„è®¢å•æ•°é‡ 1select c.id,c.name,(select count(o.id) from s_ord o where o.customer_id = c.id) from s_customer c; æ‰¾å‡ºéƒ¨é—¨å¹³å‡å·¥èµ„é«˜äºå…¬å¸å¹³å‡å·¥èµ„çš„éƒ¨é—¨ä¿¡æ¯ 1select dept_id,avg(salary) from s_emp group by dept_id having avg(salary)&gt;(select avg(salary) from s_emp); æ‰¾å‡ºä¸â€™Benâ€™åŒéƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯ 12345678910-- æ–¹å¼ä¸€select first_name,dept_id from s_emp where dept_id=(select dept_id from s_emp where first_name='Ben')and first_name&lt;&gt;'Ben';-- æ–¹å¼äºŒselect e.first_name,(select e.dept_id from s_emp e1 where e1.first_name='Ben' and e1.dept_id=e.dept_id) did from s_emp e where e.first_name&lt;&gt;'Ben';-- æ–¹å¼äºŒæ•´åˆ - æŠŠå­æŸ¥è¯¢çš„ç»“æœä½œä¸ºä¸€å¼ è¡¨,å¿…é¡»è¦åˆ«åselect * from (select e.first_name,(select e.dept_id from s_emp e1 where e1.first_name='Ben' and e1.dept_id=e.dept_id) did from s_emp e where e.first_name&lt;&gt;'Ben') core_where core_.did is not null; æ€»ç»“ èƒ½ç”¨åˆ†ç»„æŸ¥è¯¢æŸ¥è¯¢å°±ä¸è¦ä½¿ç”¨å­æŸ¥è¯¢(åµŒå¥—è¶Šå¤š,æŸ¥è¯¢æ•ˆç‡è¶Šä½) æ— å…³å­æŸ¥è¯¢(å­æŸ¥è¯¢å¯ä»¥ç‹¬ç«‹è¿è¡Œ)å’Œç›¸å…³å­æŸ¥è¯¢(å­æŸ¥è¯¢ä½¿ç”¨åˆ°äº†å¤–éƒ¨æŸ¥è¯¢çš„ä¸œè¥¿) æ— å…³å­æŸ¥è¯¢&gt;ç›¸å…³å­æŸ¥è¯¢ å­æŸ¥è¯¢ä¼šæ¯”åˆ†ç»„æŸ¥è¯¢æ›´åŠ çµæ´». existså’Œnot exists 1234567SELECT è¯­å¥WHERE exists (å­æŸ¥è¯¢)è§„åˆ™: ä¸å…³å¿ƒå­æŸ¥è¯¢æŸ¥åˆ°çš„å†…å®¹æ˜¯ä»€ä¹ˆ,å­æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæŸ¥è¯¢å‡ºç»“æœ.å¦‚æœæŸ¥è¯¢å‡ºç»“æœ,ç­‰åŒäºwhere trueselect id,first_name from s_emp where exists(select 1 from s_emp where 1=1); æ‰¾å‡ºå’Œ'Ben'åŒä¸€ä¸ªéƒ¨é—¨çš„å‘˜å·¥ 1234select e.first_name,e.dept_id from s_emp e where exists(select 1 from s_emp e1 where e1.first_name='Ben' and e1.dept_id = e.dept_id) and e.first_name&lt;&gt;'Ben'; ç»ƒä¹  æ‰¾å‡ºå„ä¸ªéƒ¨é—¨å·¥èµ„æ’åå‰äºŒçš„å‘˜å·¥ æ€è·¯: åœ¨â€™æˆ‘â€™è¿™ä¸ªéƒ¨é—¨ä¸­,æœ‰äººçš„å·¥èµ„æ¯”æˆ‘é«˜,ä½†æ˜¯æ•°é‡ä¸èƒ½è¶…è¿‡1ä¸ª 12345select e.id,e.salary,e.dept_id from s_emp ewhere exists( select 1 from s_emp e1 where e1.dept_id = e.dept_id ande1.salary&gt;e.salary having count(*)&lt;=1) order by 3; ç»ƒä¹  æ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨ä¸­å·¥èµ„æœ€é«˜çš„é‚£ä¸ªäºº","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://apelisun.github.io/tags/mysql/"},{"name":"æ•°æ®åº“åŸºç¡€","slug":"æ•°æ®åº“åŸºç¡€","permalink":"https://apelisun.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"}]},{"title":"ç´¢å¼•","slug":"ç´¢å¼•","date":"2022-08-09T11:22:53.000Z","updated":"2022-08-10T03:53:20.348Z","comments":true,"path":"2022/08/09/ç´¢å¼•/","link":"","permalink":"https://apelisun.github.io/2022/08/09/%E7%B4%A2%E5%BC%95/","excerpt":"","text":"view create view123456789drop view student_view;create view student_view as select *from t_student where id%2=0;-- insert into t_studentinsert into t_student values(5,'java',20),(6,'javab',25),(7,'sad',20),(8,'jksd',56);-- update student_viewupdate student_view set age=100 where id=8; create complex view1234567891011121314151617181920212223242526272829303132333435363738394041-- æœ‰å…³ç³»çš„ä¸¤å¼ è¡¨ï¼ˆfkï¼‰drop view student_view2;create view student_view2 as select s.*,sc.c_id from t_student s left join t_sc sc on s.id=sc.s_id;-- update viewupdate student_view2 set name='as' ;ERROR 1288 (HY000): The target table student_view2 of the UPDATE is not updatable-- æ— å…³ç³»çš„ä¸¤å¼ è¡¨drop table tt;drop table ta;create table tt( id int(7) primary key,tname varchar(20));create table ta( taid int(7) primary key,tt_id int(7));insert into tt values(1,'aa');insert into tt values(2,'aa');insert into tt values(3,'aa');insert into tt values(4,'aa');insert into ta values(1,1);insert into ta values(2,2);insert into ta values(3,3);insert into ta values(4,4);drop view t_view;create view t_view as select * from tt t join ta a on a.tt_id=t.id;update t_view set tname='as';create view t_view2 as select count(*)from tt t join ta a on a.tt_id=t.id;update t_view set count=10;è§†å›¾ä½œç”¨ï¼š1.å°è£…sql 2.å±è”½åº•å±‚æ•°æ®åº“ç»“æ„ 3.å®šåˆ¶æ•°æ® 4.å®‰å…¨æ€§ï¼ˆgrantï¼‰ ç´¢å¼•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869-- function:æé«˜æŸ¥è¯¢æ•ˆç‡åº•å±‚ï¼šb+æ•° myisamï¼ˆæ•°æ®ï¼Œç´¢å¼•åˆ†åˆ«å­˜å‚¨ï¼‰,innodb(æ•°æ®ï¼Œç´¢å¼•åˆäºŒä¸ºä¸€)-- ä¸»é”®åˆ—é»˜è®¤ç´¢å¼•åˆ—show index from è¡¨å-- ç´¢å¼•åˆ†ç±»1.ä¸»é”®ç´¢å¼•ï¼ˆprimary keyï¼‰2.unique3.å…¨æ–‡ç´¢å¼•ï¼ˆelasticsearchï¼‰4.å¤åˆç´¢å¼•create index index_name on tablename(column 1,column 2)5.æ™®é€šç´¢å¼•create index index_name on tablename(colunmn)drop table index_test;create table index_test(id int(7) primary key auto_increment,a int(7),b int(7),c varchar(20),d varchar(20));insert into index_test values(1,2,3,'20w','cc'),(null,22,93,'2s0','dd'),(null,22,33,'w20','ss'),(null,22,53,'201','hh'),(null,72,43,'200','gg'),(null,2,3,'20i','ff');drop index t_index;create index t_index on index_test(a,b,c);-- jude index validexplain +select....explain select * from index_test where a=2 and b=3 and c='20w';(ref) len=93 +----+-------------+------------+------------+------+---------------+---------+---------+-------------------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+------------+------------+------+---------------+---------+---------+-------------------+------+----------+-------+| 1 | SIMPLE | index_test | NULL | ref | t_index | t_index | 93 | const,const,const | 1 | 100.00 | NULL |+----+-------------+------------+------------+------+---------------+---------+---------+-------------------+------+----------+-------+-- ç´¢å¼•å¤±æ•ˆ*1.å¤åˆç´¢å¼•æœ€å·¦åŒ¹é…åŸåˆ™explain select *from index_test where b=3 and c='20w';(All len=0)explain select *from index_test where a=3 and b=2;(ref len=10)explain select *from index_test where c='sd' and a=10 and b=2;(ref len=93),è°ƒä¼˜2.æ¨¡ç³ŠåŒ¹é…-- %åœ¨æœ«å°¾ç”Ÿæ•ˆexplain select * from index_test where a=1 and b=2 and c like 's%';(ref len=93)%åœ¨å‰éƒ¨åˆ†ç”Ÿæ•ˆåŒï¼ˆ%ï¼Ÿ%ï¼‰explain select * from index_test where a=1 and b=2 and c like '%s';(ref len=10)-- a,bèµ°ç´¢å¼•3.æŸ¥è¯¢èŒƒå›´explain select * from index_test where a=1 and b&gt;2 and c='21';(ref len=10)4.ç´¢å¼•è®¡ç®—explain select* from index_test where id+1=1;(all)5.ç´¢å¼•ä½¿ç”¨å‡½æ•°explain select* from index_test where abs(id)=1;(all)6.cæŸ¥è¯¢æ•°æ®è¶…è¿‡ç™¾åˆ†ä¹‹30ï¼ˆæ•°æ®é‡è¶³å¤Ÿå¤§ï¼‰7.is null and is not null(is null ä¸èµ°ç´¢å¼•ï¼Œis not null èµ°ç´¢å¼•)8.in and not inbefore 5.7 in(èµ°ç´¢å¼•) not in(ä¸èµ°)after 8.0 not in ( allow index)-- ç´¢å¼•çš„åˆ›å»ºç­–ç•¥-- fit create index1.primary key or unique2.é‡å¤æ€§å°‘ï¼Œç»å¸¸è¢«æŸ¥è¯¢ï¼Œä½†æ˜¯æ›´æ–°å°‘3.order by åˆ—4.join on åˆ—-- unfit create index1.nullå€¼åˆ—2.é‡å¤åˆ—3.æ›´æ–°é¢‘ç¹åˆ— é”1234567891.è¡Œé”ï¼ˆä¸¤çº¿ç¨‹ä¸èƒ½åŒæ—¶ä¿®æ”¹æŸä¸€è¡Œçš„å€¼ï¼‰update XX set xx=xx where id=1;//å¿…é¡»æ˜¯ç´¢å¼•åˆ—ï¼Œé™ä½é”çš„ç²’åº¦2.è¡¨é”ï¼ˆéç´¢å¼•åˆ—ä¸ºæ¡ä»¶æ›´æ–° ä¼šè§¦å‘è¡¨é”ï¼‰æ‰€æœ‰çš„DMLæ“ä½œéƒ½ä¼šé˜»å¡3.é¡µé”ï¼ˆä»‹äºè¡Œé”ä¸è¡¨é”ä¹‹é—´ï¼‰ä¸€é¡µï¼šç”±è‹¥å¹²è¡Œç»„æˆçš„æ•°æ®ï¼ˆB+æ ‘ï¼‰4.å…±äº«é”ï¼ˆselect,ç±»ä¼¼Javaçš„è¯»é”ï¼‰-- selectè¯­å¥ç”³è¯·æ’ä»–é”select stock from xxx where id=1 for update;ï¼ˆæ‚²è§‚é”ï¼šå¹²å•¥éƒ½æ‚²è§‚ï¼Œæ€»æ‹…å¿ƒæœ‰äººæ”¹æ•°æ®ï¼Œç´¢æ€§ç»™å…¨é”äº†ï¼‰ ç´¢å¼•åº•å±‚åŸç†12345678910111213myisam(mai se meng),innoDB-----&gt;B+æ ‘äºŒå‰æŸ¥æ‰¾æ ‘-&gt;äºŒå‰æœç´¢æ ‘-&gt;B+æ ‘äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆå¤±è¡¡ï¼‰--&gt;ï¼ˆäº§ç”Ÿï¼‰äºŒå‰å¹³è¡¡æ ‘ï¼ˆæ•°æ®èŠ‚ç‚¹è¿‡å¤šï¼‰-&gt;Bæ ‘ï¼ˆå‚¨å­˜ä¸€é¡µæ•°æ®ï¼Œkeyå’Œvalueéƒ½å­˜ï¼‰-&gt;b+æ ‘B+æ ‘1.éé¡µèŠ‚ç‚¹å­˜å‚¨key2.æ•°æ®å­˜å¶å­ï¼Œä¸”ç›¸å¯¹æœ‰åº3.é¡µä¸é¡µï¼ˆæ ‘èŠ‚ç‚¹ï¼‰ä¹‹é—´æ˜¯åŒå‘é“¾è¡¨4.å¶å­å†…éƒ¨æ•°æ®æ˜¯å•å‘é“¾è¡¨ B+æ ‘â€“ èšç°‡ç´¢å¼• èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•123456innoDBä¸ºå¼•æ“çš„è¡¨ï¼Œè¡¨ä¸­çš„æ•°æ®éƒ½ä¼šæœ‰ä¸»é”®ï¼Œå³ä½¿ä¸ä¸»åŠ¨å£°æ˜ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªéšå¼çš„ä¸»é”®.B+æ ‘çš„é”®å€¼å°±æ˜¯ä¸»é”®.è¿™ç§**ä»¥ä¸»é”®ä¸ºB+æ ‘ç´¢å¼•è€Œæ„æˆçš„B+æ ‘***ç´¢å¼•ï¼Œç§°ä¸ºèšç°‡ç´¢å¼•éèšç°‡ç´¢å¼•ï¼šä»¥å…¶ä»–åˆ—å€¼æ„å»ºB+æ ‘çš„ç´¢å¼•-- éèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å¹¶ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯å­˜å‚¨å¯¹åº”çš„ä¸»é”®ï¼Œå› æ­¤è¿˜éœ€è¦é€šè¿‡ç´¢å¼•æŸ¥æ•°æ®ï¼Œç§°ä¹‹ä¸ºå›è¡¨ï¼ˆæ³¨ï¼Œè‹¥æ‰€æŸ¥æ•°æ®ä¸ºä¸»é”®åˆ—ï¼Œæˆ–è€…è¯¥åˆ—ï¼Œåˆ™ä¸éœ€è¦å›è¡¨ï¼‰ 1select * from xx where id&gt;=18 and id&lt;41; éèšç°‡ç´¢å¼•æŸ¥æ‰¾å›¾ myisamæŸ¥æ‰¾å›¾ 123456789101112key - ç´¢å¼•åˆ—å€¼,value - æ•°æ®è¡Œçš„ç‰©ç†åœ°å€.innodbä¸­ç´¢å¼•å’Œæ•°æ®åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­myisamä¸­ç´¢å¼•å’Œæ•°æ®æ˜¯å•ç‹¬çš„ä¿©ä¸ªæ–‡ä»¶,åˆ†åˆ«æ˜¯ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶.myisamä¸­é‡‡ç”¨çš„æ˜¯\"éèšé›†çš„æ–¹å¼\"æ— è®ºæ˜¯èšç°‡ç´¢å¼•è¿˜æ˜¯éèšç°‡ç´¢å¼•,æŸ¥æ‰¾æ–¹å¼æ˜¯ä¸€æ ·.é‡‡ç”¨çš„ä¹Ÿæ˜¯B+æ ‘çš„ç»“æ„**.åªæ˜¯å¶èŠ‚ç‚¹ä¸­å­˜å‚¨çš„æ˜¯ç´¢å¼•çš„åˆ—å€¼ä»¥åŠè¯¥å¯¹åº”çš„è¡Œè®°å½•çš„åœ°å€.**éœ€è¦å†æ ¹æ®è¡Œè®°å½•åœ°å€åˆ°è¡¨ä¸­è¿›è¡Œå®šä½[å›è¡¨] å‡½æ•°1234567891011121314151617181920212223242526272829303132333435363738394041424344delimiter $$create function dy_add(a int ,b int) returns int begin return a+b; end $$delimiter ;select dy_add(5,2);delimiter $$create function dy_add(a int ,b int) returns int begin return a+b; end $$delimiter ;select dy_add(5,2);-- è§¦å‘å™¨drop trigger customer_trriger;delimiter //create trigger customer_trriger before delete on s_customer for each rowbegindelete from s_ord where customer_id=old.id;end //delimiter ;-- è§¦å‘å™¨drop trigger customer_trriger;delimiter //create trigger customer_trriger before insert on s_customer for each rowbegin if new.id&lt;5 select 'error';end //delimiter ;","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://apelisun.github.io/tags/mysql/"},{"name":"index","slug":"index","permalink":"https://apelisun.github.io/tags/index/"}]},{"title":"mysqlå››ç§åˆ†åŒº","slug":"mysqlå››ç§åˆ†åŒº","date":"2022-08-08T13:04:23.000Z","updated":"2022-08-10T03:51:25.690Z","comments":true,"path":"2022/08/08/mysqlå››ç§åˆ†åŒº/","link":"","permalink":"https://apelisun.github.io/2022/08/08/mysql%E5%9B%9B%E7%A7%8D%E5%88%86%E5%8C%BA/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243444546drop table t_user;create table t_user(id int(7) primary key comment 'ä¸»é”®',name varchar(20) not null unique comment 'å§“å',birthday date default '2022-02-08');drop table t_account;create table t_account(id int(7),blance double(5,2),u_id int(7) ,constraint t_account_id_pk primary key(id),constraint t_account_id_fk foreign key(u_id) references t_user(id));drop table t_student;drop table t_course;drop table t_sccreate table t_student(id int(7) primary key,name varchar(20) unique not null,age int(7) default 20);create table t_course(id int(7) primary key,name varchar(20) not null);create table t_sc(id int(7),s_id int (7),c_id int(7),constraint t_sc_id_pk primary key(id),constraint t_sc_s_id_fk foreign key(s_id) references t_student(id),constraint t_sc_c_id_fk foreign key(c_id) references t_course(id));insert into t_student values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null);insert into t_course values(1,'math'),(2,'english'),(3,'chinses'),(4,'chesmatical');insert into t_sc values(1,1,1),(2,2,3),(3,4,2),(4,3,4); 12345678910111213--æµ‹è¯•è¡¨æ ¼åŠæ•°æ®drop table hashTest;create table hashTest(id int(7) primary key,name varchar(20),age int(7))PARTITION BY HASH(id) PARTITIONS 4;;insert into hashTest values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null),(5,'tom',20),(6,'cca',22),(7,'kkp',21),(8,'see',null),(9,'tom',20),(10,'cca',22),(11,'kkp',21),(12,'see',null);--æŸ¥è¯¢åˆ†åŒºç»“æ„SELECT PARTITION_NAME,PARTITION_METHOD,PARTITION_EXPRESSION,PARTITION_DESCRIPTION,TABLE_ROWSFROM `information_schema`.`PARTITIONS`WHERE TABLE_SCHEMA=SCHEMA() AND TABLE_NAME='hashTest'; hashåˆ†åŒº PARTITIONS=4(4ä¸ªåˆ†åŒºï¼Œæ ¹æ®å–æ¨¡ç¡®å®šä¸åŒidçš„å æ®åŒºåŸŸ)123456789+----------------+------------------+----------------------+-----------------------+------------+| PARTITION_NAME | PARTITION_METHOD | PARTITION_EXPRESSION | PARTITION_DESCRIPTION | TABLE_ROWS |+----------------+------------------+----------------------+-----------------------+------------+| p0 | HASH | `id` | NULL | 3 || p1 | HASH | `id` | NULL | 3 || p2 | HASH | `id` | NULL | 3 || p3 | HASH | `id` | NULL | 3 |+----------------+------------------+----------------------+-----------------------+------------+ Rangeåˆ†åŒº åˆ†æˆ6ä¸ªåˆ†åŒº123456789101112131415161718192021222324252627drop table hashTest;create table hashTest(id int(7) primary key,name varchar(20),age int(7))PARTITION BY RANGE (id) PARTITIONS 6 ( PARTITION part0 VALUES LESS THAN (2) , PARTITION part1 VALUES LESS THAN (4) , PARTITION part2 VALUES LESS THAN (6) , PARTITION part3 VALUES LESS THAN (8) , PARTITION part4 VALUES LESS THAN (10), PARTITION part5 VALUES LESS THAN (13));insert into hashTest values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null),(5,'tom',20),(6,'cca',22),(7,'kkp',21),(8,'see',null),(9,'tom',20),(10,'cca',22),(11,'kkp',21),(12,'see',null);åˆ†åŒºç»“æœï¼š+----------------+------------------+----------------------+-----------------------+------------+| PARTITION_NAME | PARTITION_METHOD | PARTITION_EXPRESSION | PARTITION_DESCRIPTION | TABLE_ROWS |+----------------+------------------+----------------------+-----------------------+------------+| part0 | RANGE | `id` | 2 | 1 || part1 | RANGE | `id` | 4 | 2 || part2 | RANGE | `id` | 6 | 2 || part3 | RANGE | `id` | 8 | 2 || part4 | RANGE | `id` | 10 | 2 || part5 | RANGE | `id` | 13 | 3 |+----------------+------------------+----------------------+-----------------------+------------+ liståˆ†åŒº1234567891011121314151617181920212223drop table hashTest;create table hashTest(id int(7) primary key,name varchar(20),age int(7))PARTITION BY LIST(id) ( PARTITION pNorth VALUES IN (1,2,3), PARTITION pEast VALUES IN (5,6,7), PARTITION pWest VALUES IN (4,8,9), PARTITION pCentral VALUES IN (10,11,12));insert into hashTest values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null),(5,'tom',20),(6,'cca',22),(7,'kkp',21),(8,'see',null),(9,'tom',20),(10,'cca',22),(11,'kkp',21),(12,'see',null);--åˆ†åŒºç»“æœï¼š+----------------+------------------+----------------------+-----------------------+------------+| PARTITION_NAME | PARTITION_METHOD | PARTITION_EXPRESSION | PARTITION_DESCRIPTION | TABLE_ROWS |+----------------+------------------+----------------------+-----------------------+------------+| pCentral | LIST | `id` | 10,11,12 | 3 || pEast | LIST | `id` | 5,6,7 | 3 || pNorth | LIST | `id` | 1,2,3 | 3 || pWest | LIST | `id` | 4,8,9 | 3 |+----------------+------------------+----------------------+-----------------------+------------+ keyåˆ†åŒºï¼ˆå’Œhashåˆ†åŒºç±»ä¼¼ï¼Œå…¶åˆ†åŒºå‡½æ•°æ˜¯ç”±mysqlå†…éƒ¨ç¡®å®šçš„ï¼‰1234567891011121314151617drop table hashTest;create table hashTest(id int(7) primary key,name varchar(20),age int(7))PARTITION BY KEY()PARTITIONS 2;insert into hashTest values(1,'tom',20),(2,'cca',22),(3,'kkp',21),(4,'see',null),(5,'tom',20),(6,'cca',22),(7,'kkp',21),(8,'see',null),(9,'tom',20),(10,'cca',22),(11,'kkp',21),(12,'see',null);--åˆ†åŒºç»“æœ+----------------+------------------+----------------------+-----------------------+------------+| PARTITION_NAME | PARTITION_METHOD | PARTITION_EXPRESSION | PARTITION_DESCRIPTION | TABLE_ROWS |+----------------+------------------+----------------------+-----------------------+------------+| p0 | KEY | NULL | NULL | 6 || p1 | KEY | NULL | NULL | 6 |+----------------+------------------+----------------------+-----------------------+------------+","categories":[],"tags":[{"name":"msql","slug":"msql","permalink":"https://apelisun.github.io/tags/msql/"},{"name":"area","slug":"area","permalink":"https://apelisun.github.io/tags/area/"}]},{"title":"é›†åˆ","slug":"é›†åˆ","date":"2022-08-08T13:03:53.000Z","updated":"2022-08-10T03:53:10.241Z","comments":true,"path":"2022/08/08/é›†åˆ/","link":"","permalink":"https://apelisun.github.io/2022/08/08/%E9%9B%86%E5%90%88/","excerpt":"","text":"é›†åˆæ¡†æ¶ å°±æ˜¯ä¸€ä¸ªå†…å­˜ä¸­çš„â€å®¹å™¨â€,ç”¨æ¥å­˜å‚¨æ•°æ®.å®é™…å¼€å‘ä¸­ç”¨æ¥æ›¿ä»£æ•°ç»„çš„ä½¿ç”¨ ä¸åŒçš„é›†åˆæ¡†æ¶åº•å±‚ä½¿ç”¨åˆ°çš„æ•°æ®ç»“æ„ä¸ä¸€æ ·. apiåŒ…:java.util Collection[I] List[I] - æœ‰åº,å¯é‡å¤ ArrayList[C] - â€œåº•å±‚å°±æ˜¯åŠ¨æ€æ•°ç»„ - å†…å­˜ä¸­æ˜¯è¿ç»­çš„,æœ‰åºçš„ - ä¾¿äºä½¿ç”¨ä¸‹æ ‡æ¥è®¿é—®å…ƒç´ .ä½†æ˜¯å¢åˆ æ•ˆç‡ç•¥ä½â€ LinkedList[C] - â€œåº•å±‚æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨,è®¿é—®æ¯”ArrayListæ…¢,ä½†æ˜¯å¢åˆ æ•ˆç‡é«˜â€ é€‚åˆè§£å†³æ ˆåˆ—å’Œé˜Ÿåˆ—çš„ä¸šåŠ¡ - è´ªåƒè›‡ Vector[C] - çº¿ç¨‹å®‰å…¨çš„,ä½¿ç”¨æ–¹å¼å’ŒArrayListä¸€è‡´. Set[I] - æ— åº,ä¸å¯é‡å¤ HashSet[C] - â€œåº•å±‚ä½¿ç”¨çš„å“ˆå¸Œç®—æ³•,åº•å±‚å°±æ˜¯HashMapâ€ SortedSet[I] TreeSet[C] - â€œå¯ä»¥ä½¿ç”¨å¯æ¯”è¾ƒæ¥å£æˆ–è€…æ¯”è¾ƒå™¨æ¥å£æ¥å®ç°æ’åºçš„åŠŸèƒ½,ä½†æ˜¯ä»ç„¶æ˜¯ä¸å¯é‡å¤çš„â€ â€œåº•å±‚æ˜¯TreeMapâ€ Map[I] - é‡‡ç”¨key-valueé”®å€¼å¯¹å½¢å¼æ¥å­˜å‚¨æ•°æ® HashMap[C] - é’ˆå¯¹keyæ— åºä¸å¯é‡å¤ Hashtable[C] Properties[C] - .propertieså±æ€§æ–‡ä»¶åœ¨å†…å­˜ä¸­æ˜ å°„çš„é‚£ä¸ªå¯¹è±¡ è¿­ä»£å™¨Iterator ä½œç”¨ - ä¸ºäº†è®¿é—®ä¸åŒæ•°æ®ç»“æ„çš„é›†åˆ,æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼. ArrayList 123456789101112131415161718192021222324252627public Iterator&lt;E&gt; iterator() { return new Itr();}private class Itr implements Iterator&lt;E&gt; { int cursor; // index of next element to return int lastRet = -1; // index of last element returned; -1 if no such int expectedModCount = modCount; public boolean hasNext() { return cursor != size; } @SuppressWarnings(\"unchecked\") public E next() { checkForComodification();//æ£€æµ‹expectedModCount == modCount; int i = cursor; if (i &gt;= size) throw new NoSuchElementException(); //é›†åˆå­˜å‚¨çš„æ•°æ® Object[] elementData = ArrayList.this.elementData; if (i &gt;= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; return (E) elementData[lastRet = i]; // æ•°ç»„å¯¹è±¡[ä¸‹æ ‡] }} LinkedList 1234567891011121314151617181920212223242526272829303132333435363738private class Itr implements Iterator&lt;E&gt; { /** * Index of element to be returned by subsequent call to next. */ int cursor = 0; /** * Index of element returned by most recent call to next or * previous. Reset to -1 if this element is deleted by a call * to remove. */ int lastRet = -1; /** * The modCount value that the iterator believes that the backing * List should have. If this expectation is violated, the iterator * has detected concurrent modification. */ int expectedModCount = modCount; public boolean hasNext() { return cursor != size(); } public E next() { checkForComodification(); try { int i = cursor; E next = get(i); lastRet = i; cursor = i + 1; return next; } catch (IndexOutOfBoundsException e) { checkForComodification(); throw new NoSuchElementException(); } }} ArrayListç»ƒä¹  é›†åˆä¸­æ·»åŠ Nä¸ªå›¾ä¹¦å¯¹è±¡,å°†å›¾ä¹¦ååŒ…å«javaçš„å›¾ä¹¦å…¨éƒ¨åˆ é™¤! ArrayListæ‰©å®¹æœºåˆ¶ ç¬¬ä¸€æ¬¡è°ƒç”¨addæ–¹æ³•çš„æ—¶å€™,æ‰ä¼šåˆå§‹åŒ–æ•°ç»„elementData é»˜è®¤çš„æ•°ç»„çš„é•¿åº¦æ˜¯10ä¸ª æ‰©å®¹çš„å€æ•°æ˜¯1.5å€ ArrayListå’ŒVectoråŒºåˆ« è¦æƒ³å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å…ˆæŠŠå„ç§éƒ½è®²ç‰¹æ€§ï¼Œç„¶åå†ä»åº•å±‚å­˜å‚¨ç»“æ„ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œé»˜è®¤å¤§å°ï¼Œæ‰©å®¹æœºåˆ¶ï¼Œè¿­ä»£å™¨ï¼Œå¢åˆ æ”¹æŸ¥æ•ˆç‡è¿™å‡ ä¸ªæ–¹å‘å…¥æ‰‹ã€‚ åº•å±‚å­˜å‚¨æ•°æ®ç»“æ„ - æœ¬è´¨ä¸Šéƒ½æ˜¯æ•°ç»„,Vectoræ˜¯ä½¿ç”¨é˜Ÿåˆ—[å…ˆè¿›å…ˆå‡º]æ¥å­˜å‚¨æ•°æ®,ä½†æ˜¯æœ¬è´¨ä»ç„¶æ˜¯æ•°ç»„. çº¿ç¨‹å®‰å…¨æ€§ - å‰è€…æ˜¯çº¿ç¨‹ä¸å®‰å…¨,åè€…æ˜¯çº¿ç¨‹å®‰å…¨ é»˜è®¤å¤§å° - ä¿©è€…éƒ½æ˜¯é•¿åº¦ä¸º10 æ‰©å®¹æœºåˆ¶ - å‰è€…æ˜¯1.5å€,åè€…é»˜è®¤æ˜¯æ‰©å®¹2å€,å¯ä»¥æ‰©å®¹ç³»æ•°å¯ä»¥è®¾ç½®çš„. ArrayListå’ŒVectoræ£€ç´¢å…ƒç´ ï¼Œç”±äºæ˜¯æ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œåœ¨é›†åˆçš„å°¾éƒ¨æ’å…¥æˆ–è€…åˆ é™¤æ˜¯O(1)ï¼Œä½†æ˜¯å…¶ä»–çš„åœ°æ–¹å¢åŠ ï¼Œåˆ é™¤ï¼Œéƒ½æ˜¯O(n)ï¼Œå› ä¸ºæ¶‰åŠåˆ°äº†æ•°ç»„å…ƒç´ çš„ç§»åŠ¨ ArrayListçš„åˆ é™¤å’Œæ’å…¥çš„æ•ˆç‡ä¸€å®šä¼šæ¯”LinkedListä½å—? - ä¸ä¸€å®š,çœ‹æ˜¯å¦æ“ä½œçš„æ˜¯é›†åˆçš„å°¾éƒ¨ LinkedList jdk8.0ç”¨åˆ°çš„æ˜¯åŒå‘é“¾è¡¨ç»“æ„ é“¾è¡¨è‚¯å®šä¼šæ¯”æ•°ç»„å ç”¨æ›´å¤šçš„å†…å­˜ é˜”ä»¥æ¨¡æ‹Ÿæ ˆåˆ—å’Œé˜Ÿåˆ—çš„ä¸šåŠ¡ å•å‘é“¾è¡¨ç»“æ„ - å¿…é¡»ä»å¤´èŠ‚ç‚¹å¼€å§‹ element - çœŸå®çš„æ•°æ® next - ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ å•å‘å¾ªç¯ç»“æ„ get(int index)åº•å±‚ 1234public E get(int index) {checkElementIndex(index);return node(index).item;} å†…éƒ¨ç±» 123456789101112private static class Node&lt;E&gt; {E item;Node&lt;E&gt; next;Node&lt;E&gt; prev;Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) { this.item = element; this.next = next; this.prev = prev;}} æ ¸å¿ƒæ–¹æ³•node(index) 12345678910111213141516Node&lt;E&gt; node(int index) {// index=2// 1 2 3 4 5 6 = size = 6if (index &lt; (size &gt;&gt; 1)) { // å¦‚æœåœ¨ä¸­é—´ä½ç½®çš„å·¦è¾¹ Node&lt;E&gt; x = first; // å¤´èŠ‚ç‚¹å¼€å§‹éå† for (int i = 0; i &lt; index; i++) x = x.next; return x;} else { // ä»å°¾éƒ¨ Node&lt;E&gt; x = last; for (int i = size - 1; i &gt; index; i--) x = x.prev; return x;}} remove(int index)åº•å±‚1234public E remove(int index) { checkElementIndex(index); return unlink(node(index));} unlink(node(index)); 12345678910111213141516171819202122232425E unlink(Node&lt;E&gt; x) { // x-å³å°†åˆ é™¤çš„èŠ‚ç‚¹ // assert x != null; final E element = x.item; final Node&lt;E&gt; next = x.next; // ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ final Node&lt;E&gt; prev = x.prev; //ä¸Šä¸€ä¸ªèŠ‚ç‚¹ if (prev == null) { // åˆ¤æ–­xæ˜¯å¦ä¸ºå¤´èŠ‚ç‚¹ first = next; // åŸæ¥ç¬¬äºŒä¸ªèŠ‚ç‚¹è®¾ç½®æˆå¤´èŠ‚ç‚¹ } else { prev.next = next; //åŸæ¥ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªåœ°å€åº”è¯¥æŒ‡å‘åŸæ¥è¿™ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ x.prev = null;//gc } if (next == null) { // åˆ¤æ–­xæ˜¯å¦ä¸ºå°¾èŠ‚ç‚¹ last = prev; // å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹è®¾ç½®æˆå°¾ç»“ç‚¹ } else { next.prev = prev; x.next = null;//gc } x.item = null;//gc size--; // é›†åˆçš„é•¿åº¦ modCount++; // å¹¶å‘ä¿®æ”¹ return element;//è¿”å›åˆšåˆšåˆ é™¤çš„å…ƒç´ } ä½œä¸š æ‹¬å·åŒ¹é… 1234567891011()[]{}()[]{}([{}])[()]{}(]([)]{}â€‹~~~java arr = ( [ { } ] ) æ°¸è¿œå°†ç¬¬ä¸€ä¸ªå…ƒç´ å‹å…¥æ ˆé¡¶ pushä»arrçš„ç¬¬2ä¸ªä½ç½®å¼€å§‹éå†iä¸‹æ ‡å¯¹åº”çš„å…ƒç´ ,å’Œæ ˆé¡¶å…ƒç´ è¿›è¡Œæ¯”è¾ƒgetFast();ä¸åŒ¹é… - ç»§ç»­å‹å…¥æ ˆé¡¶åŒ¹é… - å¼¹å‡ºæ ˆé¡¶é›†åˆæ˜¯å¦ä¸ºç©º isEmpty(); ( [ ) ] { } ])[( 1 123456789101112131415161718192021222324public class Purcase{ //è´­ä¹°ç±» private String brand; //å“ç‰Œ private String name; //äº§å“å private double cost; // è´¹ç”¨ //æ„é€ ,getter/setter,toString...}List&lt;Purcase&gt; list = new ArrayList&lt;&gt;();Purcase p1 = new Purcase(\"å®æ´\",\"æ´—æ‰‹ç²‰\",18.5);Purcase p2 = new Purcase(\"è”åˆåˆ©å\",\"è‚¥çš‚\",4.5);Purcase p3 = new Purcase(\"å®æ´\",\"ç‰™è†\",32.5);Purcase p4 = new Purcase(\"å®æ´\",\"æ¯›å·¾\",14.5);Purcase p5 = new Purcase(\"æ´åˆ©\",\"æ´—é¢å¥¶\",26.0);Purcase p6 = new Purcase(\"å¥½è¿ª\",\"æ´—å‘æ°´\",27.5);Purcase p7 = new Purcase(\"å¤šèŠ¬\",\"æ²æµ´éœ²\",38.5);Purcase p8 = new Purcase(\"å®æ´\",\"æ´—æ´ç²¾\",3.4);list.add(p1);list.add(p2);....è¦æ±‚:å†™ä¸€ä¸ªç¨‹åº,æ‰“å°å‡ºå„å“ç‰Œæ‰€èŠ±è´¹çš„æ€»è´¹ç”¨â‘ .[å¯é€‰,æ’å¥½åºåå†æ‰“å°è¾“å‡º,æŒ‰èŠ±è´¹æ€»è´¹ç”¨çš„é™åºæ’åºâ‘¡] map =&gt; ç»Ÿè®¡æ¯ä¸ªéšæœºæ•°å‡ºç°çš„æ¬¡æ•°. 15ä¸ªéšæœºæ•° 1~5 â€œpython java 123 15901121 dfdfd fdfdâ€ è´ªåƒè›‡çš„å®ç°æ­¥éª¤ è¾“å‡ºä¸€ä¸ªä¸»ç•Œé¢ è›‡èº«(LinkedList-&gt;å­˜å‚¨äº†Nä¸ªNode) - é•¿åº¦,è›‡å¤´,æ–¹å‘ éšæœºç”Ÿæˆnä¸ªé£Ÿç‰© - ä½¿ç”¨HashSetæ¥è¿›è¡Œå­˜å‚¨ 123456* * * * * * * * * * ** 0* # # # * 0 0** åˆ›å»ºä¸€ä¸ªå¯¹è±¡Node(int x,int y); åˆ›å»ºä¸€ä¸ªç±»SnakeGame 3-1. åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç±»Snake - ç»´æŠ¤ä¸€ä¸ªLinkedList 3-2. Set foods = new HashSet&lt;&gt;();//å­˜æ”¾é£Ÿç‰© èµ°ä¸€æ­¥ç®—æ³• 4-1. æ²¡æœ‰åƒåˆ°é£Ÿç‰© 12341. ç¡®å®šæ–°çš„æ–¹å‘ - w a s d2. æ–°çš„åæ ‡Node(i,j)3. addFirst - å°†æ–°çš„åæ ‡æ”¾å…¥åˆ°è›‡å¤´4. åˆ¤æ–­æ–°çš„åæ ‡æ˜¯å¦å±äºfoods,å¦‚æœä¸å±äºremoveLast();//åˆ é™¤æœ€åå°¾èŠ‚ç‚¹ 4-2. åƒåˆ°é£Ÿç‰© HashSet HashSetå’ŒHashMap =&gt; å­˜æ”¾æ•°æ®çš„æ€§èƒ½ - HashMapæ›´é«˜ - HashSetå¯èƒ½æ˜¯è®¡ç®—æ•´ä¸ªå¯¹è±¡çš„hashCodeæ–¹æ³• 123456789101112Set&lt;Book&gt; set = new HashSet&lt;&gt;();public HashSet() { map = new HashMap&lt;&gt;();}set.add(10);//seté›†åˆçš„valueå°±æ˜¯mapé›†åˆçš„keypublic boolean add(E e) { return map.put(e, PRESENT)==null;} HashMap çº¿ç¨‹ä¸å®‰å…¨çš„. ç”¨åˆ°çš„æ•°æ®ç»“æ„ jdk8.0-å¼€å§‹æ¡¶æ•°ç»„ + å•å‘é“¾è¡¨ + çº¢é»‘æ ‘ æ¡¶ - å“ˆå¸Œæ¡¶ putåº•å±‚æºç å‰–æ12345678910111213141516171819HashMap&lt;Integer,String&gt; map = new HashMap&lt;&gt;();//æ‰©å®¹å› å­ - é¢„æ‰©å®¹static final float DEFAULT_LOAD_FACTOR = 0.75f;public HashMap() { this.loadFactor = DEFAULT_LOAD_FACTOR; // all other fields defaulted}//putæ–¹æ³•public V put(K key, V value) { return putVal(hash(key), key, value, false, true);}//é’ˆå¯¹keè¿›è¡Œä¸€ä¸ªhashç®—æ³• - æ‰°åŠ¨å‡½æ•°static final int hash(Object key) { int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);// è®©å“ˆå¸Œå€¼å’Œé«˜16ä½è¿›è¡Œå¼‚æˆ–è¿ç®—} 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465 transient Node&lt;K,V&gt;[] table;final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) { Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; //â‘ è¿›æ¥tableå’Œtabéƒ½æ˜¯null if ((tab = table) == null || (n = tab.length) == 0) //â‘ å°±ä¼šæ‰§è¡Œæ‰©å®¹æ“ä½œ n = 16 tabåˆå§‹åŒ–å®Œæ¯• n = (tab = resize()).length; //â‘ hash - keyçš„æ‰°åŠ¨å‡½æ•°å¾—åˆ°å“ˆå¸Œå€¼ //(n - 1) &amp; hash =&gt; 1. ä¸‹æ ‡è‚¯å®šä¸ä¼šè¶Šç•Œ 2. å‡å°‘å“ˆå¸Œå†²çª //p = tab[å“ˆå¸Œä½ç½®]è‚¯å®šæ˜¯null if ((p = tab[i = (n - 1) &amp; hash]) == null) //â‘ å¯¹è¿™ä¸ªä½ç½®è¿›è¡Œèµ‹å€¼æ“ä½œ //å•å‘é“¾è¡¨ tab[i] = newNode(hash, key, value, null);//æœ€åä¸€ä¸ªå‚æ•°æ˜¯next else { Node&lt;K,V&gt; e; K k; //p - å“ˆå¸Œå†²çªçš„ä½ç½®ä¸Šçš„Node //æ¯”è¾ƒnodeå¯¹è±¡çš„hashå€¼ //ä¿©ä¸ªç¡®å®æ˜¯åŒä¸€ä¸ªå¯¹è±¡ if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p;//e = pæ˜¯æ—§çš„èŠ‚ç‚¹ else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); else { //OO - ä¸åŒå¯¹è±¡çš„hashCodeå€¼,ä¸ä¸€å®š // å“ˆå¸Œç¢°æ’äº†,ä½†æ˜¯å¹¶ä¸æ˜¯ä¿©ä¸ªç›¸åŒçš„å¯¹è±¡ //b. ç›¸åŒå¯¹è±¡equalsè‚¯å®šè¿”å›true for (int binCount = 0; ; ++binCount) { //æŠŠå“ˆå¸Œå†²çªä½ç½®ä¸Šçš„æ—§èŠ‚ç‚¹pçš„nextæŒ‚è½½ä¸€ä¸ªæ–°çš„e if ((e = p.next) == null) {//â‘ è‚¯å®šä¸ºç©º p.next = newNode(hash, key, value, null); //å½“é“¾è¡¨é•¿åº¦å¼€å§‹&gt;=8çš„æ—¶å€™,å•å‘é“¾è¡¨ç»“æ„å°±ä¼šè½¬æ¢æˆçº¢é»‘æ ‘ //åˆ é™¤æ“ä½œ - å¦‚æœèŠ‚ç‚¹ä¸ªæ•°å°äºç­‰äº6çš„æ—¶å€™,å¼€å§‹è½¬æˆé“¾è¡¨ç»“æ„ if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; } //é“¾è¡¨çš„èŠ‚ç‚¹å¯èƒ½å’Œæ–°æ’å…¥çš„èŠ‚ç‚¹æ˜¯ä¸€ä¸ªç›¸åŒå¯¹è±¡ if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; } } if (e != null) { // existing mapping for key V oldValue = e.value;//å°±æ˜¯æ—§çš„èŠ‚ç‚¹çš„value if (!onlyIfAbsent || oldValue == null) e.value = value;//æ–°çš„valueèµ‹å€¼ç»™æ—§èŠ‚ç‚¹çš„value afterNodeAccess(e); return oldValue; } } ++modCount; if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null; } æ‰©å®¹resize() 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283//static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16final Node&lt;K,V&gt;[] resize() { //ç¬¬ä¸€æ¬¡è¿›æ¥oldTabå°±æ˜¯null Node&lt;K,V&gt;[] oldTab = table; //oldCap æ—§å®¹é‡ = 0 int oldCap = (oldTab == null) ? 0 : oldTab.length; //oldThr = 0 int oldThr = threshold; //æ–°çš„å®¹é‡,æ–°çš„æ‰©å®¹å› å­ int newCap, newThr = 0; if (oldCap &gt; 0) { if (oldCap &gt;= MAXIMUM_CAPACITY) { threshold = Integer.MAX_VALUE; return oldTab; } else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY) newThr = oldThr &lt;&lt; 1; // double threshold } else if (oldThr &gt; 0) // initial capacity was placed in threshold newCap = oldThr; else { // zero initial threshold signifies using defaults //newCap = 16 newCap = DEFAULT_INITIAL_CAPACITY; //newThr = 16*0.75f =&gt; æ‰©å®¹çš„ä¸´ç•Œå€¼ newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); } if (newThr == 0) { float ft = (float)newCap * loadFactor; newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); } //threshold = 16*0.75f threshold = newThr; @SuppressWarnings({\"rawtypes\",\"unchecked\"}) //newTab é•¿åº¦å°±æ˜¯16 Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap]; table = newTab; if (oldTab != null) { for (int j = 0; j &lt; oldCap; ++j) { Node&lt;K,V&gt; e; if ((e = oldTab[j]) != null) { oldTab[j] = null; if (e.next == null) newTab[e.hash &amp; (newCap - 1)] = e; else if (e instanceof TreeNode) ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); else { // preserve order Node&lt;K,V&gt; loHead = null, loTail = null; Node&lt;K,V&gt; hiHead = null, hiTail = null; Node&lt;K,V&gt; next; do { next = e.next; if ((e.hash &amp; oldCap) == 0) { if (loTail == null) loHead = e; else loTail.next = e; loTail = e; } else { if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; } } while ((e = next) != null); if (loTail != null) { loTail.next = null; newTab[j] = loHead; } if (hiTail != null) { hiTail.next = null; newTab[j + oldCap] = hiHead; } } } } } return newTab;} putè¿‡ç¨‹ æ’åº é€šè¿‡æ¯”è¾ƒå™¨æ¥å£java.util.Comparator é€šè¿‡java.lang.Comparable[I] é¢è¯•é¢˜ Listå’ŒSetåŒºåˆ« 123451ã€List,Setéƒ½æ˜¯ç»§æ‰¿è‡ªCollectionæ¥å£2ã€Listç‰¹ç‚¹ï¼šå…ƒç´ æœ‰æ”¾å…¥é¡ºåºï¼Œå…ƒç´ å¯é‡å¤ ï¼ŒSetç‰¹ç‚¹ï¼šå…ƒç´ æ— æ”¾å…¥é¡ºåºï¼Œå…ƒç´ ä¸å¯é‡å¤ï¼Œé‡å¤å…ƒç´ ä¼šè¦†ç›–æ‰ï¼Œï¼ˆå…ƒç´ è™½ç„¶æ— æ”¾å…¥é¡ºåºï¼Œä½†æ˜¯å…ƒç´ åœ¨setä¸­çš„ä½ç½®æ˜¯æœ‰è¯¥å…ƒç´ çš„HashCodeå†³å®šçš„ï¼Œå…¶ä½ç½®å…¶å®æ˜¯å›ºå®šçš„ï¼ŒåŠ å…¥Set çš„Objectå¿…é¡»å®šä¹‰equals()æ–¹æ³• ï¼Œå¦å¤–listæ”¯æŒforå¾ªç¯ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¸‹æ ‡æ¥éå†ï¼Œä¹Ÿå¯ä»¥ç”¨è¿­ä»£å™¨ï¼Œä½†æ˜¯setåªèƒ½ç”¨è¿­ä»£ï¼Œå› ä¸ºä»–æ— åºï¼Œæ— æ³•ç”¨ä¸‹æ ‡æ¥å–å¾—æƒ³è¦çš„å€¼ã€‚ï¼‰ 3.Setå’ŒListå¯¹æ¯”ï¼š Setï¼šæ£€ç´¢å…ƒç´ æ•ˆç‡ä½ä¸‹ï¼Œåˆ é™¤å’Œæ’å…¥æ•ˆç‡é«˜ï¼Œæ’å…¥å’Œåˆ é™¤ä¸ä¼šå¼•èµ·å…ƒç´ ä½ç½®æ”¹å˜ã€‚ Listï¼šå’Œæ•°ç»„ç±»ä¼¼ï¼ŒListå¯ä»¥åŠ¨æ€å¢é•¿ï¼ŒæŸ¥æ‰¾å…ƒç´ æ•ˆç‡é«˜ï¼Œæ’å…¥åˆ é™¤å…ƒç´ æ•ˆç‡ä½ï¼Œå› ä¸ºä¼šå¼•èµ·å…¶ä»–å…ƒç´ ä½ç½®æ”¹å˜ã€‚ ArrayListå’ŒLinkedListåŒºåˆ« 12345ArrayListåŸºäºåŠ¨æ€æ•°ç»„å®ç°çš„éçº¿ç¨‹å®‰å…¨çš„é›†åˆï¼›LinkedListåŸºäºé“¾è¡¨å®ç°çš„éçº¿ç¨‹å®‰å…¨çš„é›†åˆã€‚å¯¹äºéšæœºindexè®¿é—®çš„getå’Œsetæ–¹æ³•ï¼Œä¸€èˆ¬ArrayListçš„é€Ÿåº¦è¦ä¼˜äºLinkedListã€‚å› ä¸ºArrayListç›´æ¥é€šè¿‡æ•°ç»„ä¸‹æ ‡ç›´æ¥æ‰¾åˆ°å…ƒç´ ï¼›LinkedListè¦ç§»åŠ¨æŒ‡é’ˆéå†æ¯ä¸ªå…ƒç´ ç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚æ–°å¢å’Œåˆ é™¤å…ƒç´ ï¼Œä¸€èˆ¬LinkedListçš„é€Ÿåº¦è¦ä¼˜äºArrayListã€‚å› ä¸ºArrayListåœ¨æ–°å¢å’Œåˆ é™¤å…ƒç´ æ—¶ï¼Œå¯èƒ½æ‰©å®¹å’Œå¤åˆ¶æ•°ç»„ï¼›LinkedListå®ä¾‹åŒ–å¯¹è±¡éœ€è¦æ—¶é—´å¤–ï¼Œåªéœ€è¦ä¿®æ”¹æŒ‡é’ˆå³å¯ã€‚LinkedListé›†åˆä¸æ”¯æŒ é«˜æ•ˆçš„éšæœºéšæœºè®¿é—®ï¼ˆRandomAccessï¼‰ArrayListçš„ç©ºé—´æµªè´¹ä¸»è¦ä½“ç°åœ¨åœ¨liståˆ—è¡¨çš„ç»“å°¾é¢„ç•™ä¸€å®šçš„å®¹é‡ç©ºé—´ï¼Œè€ŒLinkedListçš„ç©ºé—´èŠ±è´¹åˆ™ä½“ç°åœ¨å®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½éœ€è¦æ¶ˆè€—ç›¸å½“çš„ç©ºé—´ ArrayListå’ŒVectoråŒºåˆ« 12345678910111213141516171819ï¼ˆ1ï¼‰åŒæ­¥æ€§ï¼š Vectoræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯å®ƒçš„æ–¹æ³•ä¹‹é—´æ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œè€ŒArrayListæ˜¯çº¿ç¨‹åºä¸å®‰å…¨çš„ï¼Œå®ƒ çš„æ–¹æ³•ä¹‹é—´æ˜¯çº¿ç¨‹ä¸åŒæ­¥çš„ã€‚å¦‚æœåªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šè®¿é—®åˆ°é›†åˆï¼Œé‚£æœ€å¥½æ˜¯ä½¿ç”¨ArrayListï¼Œå› ä¸ºå®ƒä¸è€ƒè™‘çº¿ç¨‹ å®‰å…¨ï¼Œæ•ˆç‡ä¼šé«˜äº›ï¼›å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹ä¼šè®¿é—®åˆ°é›†åˆï¼Œé‚£æœ€å¥½æ˜¯ä½¿ç”¨Vectorï¼Œå› ä¸ºä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å†å»è€ƒè™‘å’Œç¼– å†™çº¿ç¨‹å®‰å…¨çš„ä»£ç ã€‚ï¼ˆ2ï¼‰æ•°æ®å¢é•¿ï¼š ArrayListä¸Vectoréƒ½æœ‰ä¸€ä¸ªåˆå§‹çš„å®¹é‡å¤§å°ï¼Œå½“å­˜å‚¨è¿›å®ƒä»¬é‡Œé¢çš„å…ƒç´ çš„ä¸ªæ•°è¶…è¿‡äº†å®¹é‡æ—¶ï¼Œå°±éœ€ è¦å¢åŠ ArrayListä¸Vectorçš„å­˜å‚¨ç©ºé—´ï¼Œæ¯æ¬¡è¦å¢åŠ å­˜å‚¨ç©ºé—´æ—¶ï¼Œä¸æ˜¯åªå¢åŠ ä¸€ä¸ªå­˜å‚¨å•å…ƒï¼Œè€Œæ˜¯å¢åŠ å¤šä¸ªå­˜ å‚¨å•å…ƒï¼Œæ¯æ¬¡å¢åŠ çš„å­˜å‚¨å•å…ƒçš„ä¸ªæ•°åœ¨å†…å­˜ç©ºé—´åˆ©ç”¨ä¸ç¨‹åºæ•ˆç‡ä¹‹é—´è¦å–å¾—ä¸€å®šçš„å¹³è¡¡ã€‚Vectoré»˜è®¤å¢é•¿ä¸ºåŸ æ¥ä¸¤å€ï¼Œè€ŒArrayListçš„å¢é•¿ç­–ç•¥åœ¨æ–‡æ¡£ä¸­æ²¡æœ‰æ˜ç¡®è§„å®šï¼ˆä»æºä»£ç çœ‹åˆ°çš„æ˜¯å¢é•¿ä¸ºåŸæ¥çš„1.5å€ï¼‰ã€‚ ArrayListä¸Vectoréƒ½å¯ä»¥è®¾ç½®åˆå§‹çš„ç©ºé—´å¤§å°ï¼ŒVectorè¿˜å¯ä»¥è®¾ç½®å¢é•¿çš„ç©ºé—´å¤§å°ï¼Œè€ŒArrayListæ²¡æœ‰æ ä¾›è®¾ç½®å¢é•¿ç©ºé—´çš„æ–¹æ³•ã€‚ HashSetå’ŒHashMapåŒºåˆ« 1234(1)HashSetå®ç°äº†Setæ¥å£, ä»…å­˜å‚¨å¯¹è±¡; HashMapå®ç°äº† Mapæ¥å£, å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹.(2)HashSetåº•å±‚å…¶å®æ˜¯ç”¨HashMapå®ç°å­˜å‚¨çš„, HashSetå°è£…äº†ä¸€ç³»åˆ—HashMapçš„æ–¹æ³•. ä¾é HashMapæ¥å­˜å‚¨å…ƒç´ å€¼,(åˆ©ç”¨hashMapçš„keyé”®è¿›è¡Œå­˜å‚¨), è€Œvalueå€¼é»˜è®¤ä¸ºObjectå¯¹è±¡. æ‰€ä»¥HashSetä¹Ÿä¸å…è®¸å‡ºç°é‡å¤å€¼, åˆ¤æ–­æ ‡å‡†å’ŒHashMapåˆ¤æ–­æ ‡å‡†ç›¸åŒ, ä¸¤ä¸ªå…ƒç´ çš„hashCodeç›¸ç­‰å¹¶ä¸”é€šè¿‡equals()æ–¹æ³•è¿”å›true.(3)å½“ä½¿ç”¨æ— å‚æ„é€ åˆ›å»º HashSetå¯¹è±¡æ—¶, å…¶å®è°ƒç”¨äº† HashMapçš„æ— å‚æ„é€ åˆ›å»ºäº†ä¸€ä¸ª HashMapå¯¹è±¡, æ‰€ä»¥ HashSet çš„åˆå§‹åŒ–å®¹é‡ä¹Ÿä¸º16, è´Ÿè½½å› å­ä¹Ÿä¸º 0.75. TreeSetå’ŒTreeMapåŒºåˆ« 1234567891011121314151617TreeMap å’Œ TreeSet æ˜¯ Java Collection Framework çš„ä¸¤ä¸ªé‡è¦æˆå‘˜ï¼Œå…¶ä¸­ TreeMap æ˜¯ Map æ¥å£çš„å¸¸ç”¨å®ç°ç±»ï¼Œè€Œ TreeSet æ˜¯ Set æ¥å£çš„å¸¸ç”¨å®ç°ç±»ã€‚è™½ç„¶ TreeMap å’ŒTreeSet å®ç°çš„æ¥å£è§„èŒƒä¸åŒï¼Œä½† TreeSet åº•å±‚æ˜¯é€šè¿‡ TreeMap æ¥å®ç°çš„ï¼ˆå¦‚åŒHashSetåº•å±‚æ˜¯æ˜¯é€šè¿‡HashMapæ¥å®ç°çš„ä¸€æ ·ï¼‰ï¼Œå› æ­¤äºŒè€…çš„å®ç°æ–¹å¼å®Œå…¨ä¸€æ ·ã€‚è€Œ TreeMap çš„å®ç°å°±æ˜¯çº¢é»‘æ ‘ç®—æ³•TreeSetå’ŒTreeMapçš„å…³ç³» ä¸HashSetå®Œå…¨ç±»ä¼¼ï¼ŒTreeSeté‡Œé¢ç»å¤§éƒ¨åˆ†æ–¹æ³•éƒ½å¸‚ç›´æ¥è°ƒç”¨TreeMapæ–¹æ³•æ¥å®ç°çš„ã€‚ç›¸åŒç‚¹ï¼šTreeMapå’ŒTreeSetéƒ½æ˜¯éåŒæ­¥é›†åˆï¼Œå› æ­¤ä»–ä»¬ä¸èƒ½åœ¨å¤šçº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œä¸è¿‡å¯ä»¥ä½¿ç”¨æ–¹æ³•Collections.synchroinzedMap()æ¥å®ç°åŒæ­¥è¿è¡Œé€Ÿåº¦éƒ½è¦æ¯”Hashé›†åˆæ…¢ï¼Œä»–ä»¬å†…éƒ¨å¯¹å…ƒç´ çš„æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸ºO(logN)ï¼Œè€ŒHashMap/HashSetåˆ™ä¸ºO(1)ã€‚TreeMapå’ŒTreeSetéƒ½æ˜¯æœ‰åºçš„é›†åˆï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä»¬å­˜å‚¨çš„å€¼éƒ½æ˜¯æ‹å¥½åºçš„ã€‚ä¸åŒç‚¹ï¼šæœ€ä¸»è¦çš„åŒºåˆ«å°±æ˜¯TreeSetå’ŒTreeMapåˆ†åˆ«å®ç°Setå’ŒMapæ¥å£TreeSetåªå­˜å‚¨ä¸€ä¸ªå¯¹è±¡ï¼Œè€ŒTreeMapå­˜å‚¨ä¸¤ä¸ªå¯¹è±¡Keyå’ŒValueï¼ˆä»…ä»…keyå¯¹è±¡æœ‰åºï¼‰TreeSetä¸­ä¸èƒ½æœ‰é‡å¤å¯¹è±¡ï¼Œè€ŒTreeMapä¸­å¯ä»¥å­˜åœ¨TreeMapçš„åº•å±‚é‡‡ç”¨çº¢é»‘æ ‘çš„å®ç°ï¼Œå®Œæˆæ•°æ®æœ‰åºçš„æ’å…¥ï¼Œæ’åºã€‚ HashMapå’ŒHashtable[çº¿ç¨‹å®‰å…¨]åŒºåˆ« 1234567çº¿ç¨‹å®‰å…¨æ€§ä¸åŒã€‚HashMapçº¿ç¨‹ä¸å®‰å…¨ï¼›Hashtable ä¸­çš„æ–¹æ³•æ˜¯Synchronizeçš„ã€‚keyã€valueæ˜¯å¦å…è®¸nullã€‚HashMapçš„keyå’Œvalueéƒ½æ˜¯å¯ä»¥æ˜¯nullï¼Œkeyåªå…è®¸ä¸€ä¸ªnullï¼›Hashtableçš„keyå’Œvalueéƒ½ä¸å¯ä¸ºnullã€‚è¿­ä»£å™¨ä¸åŒã€‚HashMapçš„Iteratoræ˜¯fail-fastè¿­ä»£å™¨ï¼›Hashtableè¿˜ä½¿ç”¨äº†enumeratorè¿­ä»£å™¨ã€‚hashçš„è®¡ç®—æ–¹å¼ä¸åŒã€‚HashMapè®¡ç®—äº†hashå€¼ï¼›Hashtableä½¿ç”¨äº†keyçš„hashCodeæ–¹æ³•ã€‚é»˜è®¤åˆå§‹å¤§å°å’Œæ‰©å®¹æ–¹å¼ä¸åŒã€‚HashMapé»˜è®¤åˆå§‹å¤§å°16ï¼Œå®¹é‡å¿…é¡»æ˜¯2çš„æ•´æ•°æ¬¡å¹‚ï¼Œæ‰©å®¹æ—¶å°†å®¹é‡å˜ä¸ºåŸæ¥çš„2å€ï¼›Hashtableé»˜è®¤åˆå§‹å¤§å°11ï¼Œæ‰©å®¹æ—¶å°†å®¹é‡å˜ä¸ºåŸæ¥çš„2å€åŠ 1ã€‚æ˜¯å¦æœ‰containsæ–¹æ³•ã€‚HashMapæ²¡æœ‰containsæ–¹æ³•ï¼›HashtableåŒ…å«containsæ–¹æ³•ï¼Œç±»ä¼¼äºcontainsValueã€‚çˆ¶ç±»ä¸åŒã€‚HashMapç»§æ‰¿è‡ªAbstractMapï¼›Hashtableç»§æ‰¿è‡ªDictionaryã€‚ Collectionå’ŒCollections[é›†åˆå·¥å…·ç±»]åŒºåˆ« 1234561ã€java.util.Collection æ˜¯ä¸€ä¸ªé›†åˆæ¥å£ã€‚å®ƒæä¾›äº†å¯¹é›†åˆå¯¹è±¡è¿›è¡ŒåŸºæœ¬æ“ä½œçš„é€šç”¨æ¥å£æ–¹æ³•ã€‚Collectionæ¥å£åœ¨Java ç±»åº“ä¸­æœ‰å¾ˆå¤šå…·ä½“çš„å®ç°ã€‚Collectionæ¥å£çš„æ„ä¹‰æ˜¯ä¸ºå„ç§å…·ä½“çš„é›†åˆæä¾›äº†æœ€å¤§åŒ–çš„ç»Ÿä¸€æ“ä½œæ–¹å¼ã€‚Listï¼ŒSetï¼ŒQueueæ¥å£éƒ½ç»§æ‰¿Collectionã€‚ç›´æ¥å®ç°è¯¥æ¥å£çš„ç±»åªæœ‰AbstractCollectionç±»ï¼Œè¯¥ç±»ä¹Ÿåªæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæä¾›äº†å¯¹é›†åˆç±»æ“ä½œçš„ä¸€äº›åŸºæœ¬å®ç°ã€‚Listå’ŒSetçš„å…·ä½“å®ç°ç±»åŸºæœ¬ä¸Šéƒ½ç›´æ¥æˆ–é—´æ¥çš„ç»§æ‰¿äº†è¯¥ç±»ã€‚2ã€java.util.Collections æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ã€‚ å®ƒåŒ…å«æœ‰å„ç§æœ‰å…³é›†åˆæ“ä½œçš„é™æ€æ–¹æ³•ï¼ˆå¯¹é›†åˆçš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰ï¼‰ï¼Œå¤§å¤šæ•°æ–¹æ³•éƒ½æ˜¯ç”¨æ¥å¤„ç†çº¿æ€§è¡¨çš„ã€‚æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼ŒæœåŠ¡äºJavaçš„Collectionæ¡†æ¶ã€‚ TreeSet åˆ©ç”¨é€šè¿‡java.lang.Comparable[I] å¯¹è±¡å»å®ç°è¿™ä¸ªæ¥å£,å¹¶ä¸”é‡å†™comparaToæ–¹æ³• åˆ©ç”¨æ„é€ å™¨ä¸­å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒå™¨æ¥å£ =&gt; æ›´åŠ çµæ´»ä¸€ç‚¹ 123public TreeSet(Comparator&lt;? super E&gt; comparator) { this(new TreeMap&lt;&gt;(comparator));} æ³›å‹æ³›å‹ç¬¦å· ? 12List&lt;?&gt; list = new ArrayList&lt;&gt;();list.add(null);//åªèƒ½æ·»åŠ null K,V - é”®,å€¼ T - ç±»å‹ E - å…ƒç´  ç”¨æ³• æ³›å‹ç±» æ³›å‹æ–¹æ³• 123456789101112public &lt;T&gt; void find(T t){ System.out.println(\"find:\"+t);}public &lt;T&gt; T get(T t){ System.out.println(\"find:\"+t); return t;}public static &lt;T&gt; void find2(T t){ System.out.println(\"find:\"+t);} æ³›å‹å¥½å¤„ 1ã€ç±»å‹å®‰å…¨ æ³›å‹çš„ä¸»è¦ç›®æ ‡æ˜¯æé«˜Javaç¨‹åºçš„ç±»å‹å®‰å…¨ã€‚é€šè¿‡çŸ¥é“ä½¿ç”¨æ³›å‹å®šä¹‰çš„å˜é‡çš„ç±»å‹é™åˆ¶ï¼Œç¼–è¯‘å™¨å¯ä»¥åœ¨éå¸¸é«˜çš„å±‚æ¬¡ä¸ŠéªŒè¯ç±»å‹å‡è®¾ã€‚æ²¡æœ‰æ³›å‹ï¼Œè¿™äº›å‡è®¾å°±åªå­˜åœ¨äºç³»ç»Ÿå¼€å‘äººå‘˜çš„å¤´è„‘ä¸­ã€‚ é€šè¿‡åœ¨å˜é‡å£°æ˜ä¸­æ•è·è¿™ä¸€é™„åŠ çš„ç±»å‹ä¿¡æ¯ï¼Œæ³›å‹å…è®¸ç¼–è¯‘å™¨å®æ–½è¿™äº›é™„åŠ çš„ç±»å‹çº¦æŸã€‚ç±»å‹é”™è¯¯å°±å¯ä»¥åœ¨ç¼–è¯‘æ—¶è¢«æ•è·äº†ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶å½“ä½œClassCastExceptionå±•ç¤ºå‡ºæ¥ã€‚å°†ç±»å‹æ£€æŸ¥ä»è¿è¡Œæ—¶æŒªåˆ°ç¼–è¯‘æ—¶æœ‰åŠ©äºJavaå¼€å‘äººå‘˜æ›´æ—©ã€æ›´å®¹æ˜“åœ°æ‰¾åˆ°é”™è¯¯ï¼Œå¹¶å¯æé«˜ç¨‹åºçš„å¯é æ€§ã€‚ 2ã€æ¶ˆé™¤å¼ºåˆ¶ç±»å‹è½¬æ¢ æ³›å‹çš„ä¸€ä¸ªé™„å¸¦å¥½å¤„æ˜¯ï¼Œæ¶ˆé™¤æºä»£ç ä¸­çš„è®¸å¤šå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚è¿™ä½¿å¾—ä»£ç æ›´åŠ å¯è¯»ï¼Œå¹¶ä¸”å‡å°‘äº†å‡ºé”™æœºä¼šã€‚å°½ç®¡å‡å°‘å¼ºåˆ¶ç±»å‹è½¬æ¢å¯ä»¥æé«˜ä½¿ç”¨æ³›å‹ç±»çš„ä»£ç çš„ç´¯èµç¨‹åº¦ï¼Œä½†æ˜¯å£°æ˜æ³›å‹å˜é‡æ—¶å´ä¼šå¸¦æ¥ç›¸åº”çš„ç´¯èµç¨‹åº¦ã€‚åœ¨ç®€å•çš„ç¨‹åºä¸­ä½¿ç”¨ä¸€æ¬¡æ³›å‹å˜é‡ä¸ä¼šé™ä½ä»£ç ç´¯èµç¨‹åº¦ã€‚ä½†æ˜¯å¯¹äºå¤šæ¬¡ä½¿ç”¨æ³›å‹å˜é‡çš„å¤§å‹ç¨‹åºæ¥è¯´ï¼Œåˆ™å¯ä»¥ç´¯ç§¯èµ·æ¥é™ä½ç´¯èµç¨‹åº¦ã€‚æ‰€ä»¥æ³›å‹æ¶ˆé™¤äº†å¼ºåˆ¶ç±»å‹è½¬æ¢ä¹‹åï¼Œä¼šä½¿å¾—ä»£ç åŠ æ¸…æ™°å’Œç­’æ´ã€‚ 3ã€æ›´é«˜çš„è¿è¡Œæ•ˆç‡ åœ¨éæ³›å‹ç¼–ç¨‹ä¸­ï¼Œå°†ç­’å•ç±»å‹ä½œä¸ºObjectä¼ é€’æ—¶ä¼šå¼•èµ·Boxingï¼ˆè£…ç®±ï¼‰å’ŒUnboxingï¼ˆæ‹†ç®±ï¼‰æ“ä½œï¼Œè¿™ä¸¤ä¸ªè¿‡ç¨‹éƒ½æ˜¯å…·æœ‰å¾ˆå¤§å¼€é”€çš„ã€‚å¼•å…¥æ³›å‹åï¼Œå°±ä¸å¿…è¿›è¡ŒBoxingå’ŒUnboxingæ“ä½œäº†ï¼Œæ‰€ä»¥è¿è¡Œæ•ˆç‡ç›¸å¯¹è¾ƒé«˜ï¼Œç‰¹åˆ«åœ¨å¯¹é›†åˆæ“ä½œéå¸¸é¢‘ç¹çš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªç‰¹ç‚¹å¸¦æ¥çš„æ€§èƒ½æå‡æ›´åŠ æ˜æ˜¾ã€‚ 4ã€æ½œåœ¨çš„æ€§èƒ½æ”¶ç›Š æ³›å‹ä¸ºè¾ƒå¤§çš„ä¼˜åŒ–å¸¦æ¥å¯èƒ½ã€‚åœ¨æ³›å‹çš„åˆå§‹å®ç°ä¸­ï¼Œç¼–è¯‘å™¨å°†å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆæ²¡æœ‰æ³›å‹çš„è¯ï¼ŒJavaç³»ç»Ÿå¼€å‘äººå‘˜ä¼šæŒ‡å®šè¿™äº›å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼‰æ’å…¥ç”Ÿæˆçš„å­—èŠ‚ç ä¸­ã€‚ä½†æ˜¯æ›´å¤šç±»å‹ä¿¡æ¯å¯ç”¨äºç¼–è¯‘å™¨è¿™ä¸€äº‹å®ï¼Œä¸ºæœªæ¥ç‰ˆæœ¬çš„JVMçš„ä¼˜åŒ–å¸¦æ¥å¯èƒ½ã€‚ åº”ç”¨123456789101112131415161718192021@Overriddepublic int save(Student s){ Session session = HibernateUtil.getSession(); Transaction tx = session.beginTransaction(); tx.save(s); tx.commit();}@Overriddepublic Student getById(int id){ Session session = HibernateUtil.getSession(); Transaction tx = session.beginTransaction(); Student s = session.get(Student.class,id); tx.commit();} 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960//ä¸šåŠ¡æ¥å£public interface ITeacherDao{ Teacher getById(int id); List&lt;Teacher&gt; loadAll(); int save(Teacher t);}//ä¸šåŠ¡æ¥å£public interface IStudentDao{ Student getById(int id); List&lt;Student&gt; loadAll(); int save(Student s);}//è€ƒè™‘æŠ½ç¦»å‡ºé¡¶çº§çš„æ¥å£å‡ºæ¥public interface IBaseDao&lt;T&gt; { T getById(int id); List&lt;T&gt; loadAll(); int save(T t);}//é¡¶çº§æ¥å£çš„å®ç°ç±»public class BaseDaoImpl&lt;T&gt; implements IBaseDao&lt;T&gt; { @Override public T getById(int id) { //å…·ä½“çš„å®ç° return null; } @Override public List&lt;T&gt; loadAll() { //å…·ä½“çš„å®ç° return null; } @Override public int save(T t) { //å…·ä½“çš„å®ç° return 0; }}//åˆ¶å®šä¸šåŠ¡æ¥å£ç‰¹æœ‰çš„åŠŸèƒ½public interface IStudentDao extends IBaseDao&lt;Student&gt;{ void test(); }//å®ç°ç±»public class StudentDaoImpl extends BaseDaoImpl&lt;Student&gt; implements IStudentDao { @Override public void test() { }} æŒ‡å®šä¸Šé™å’Œä¸‹é™ æŒ‡å®šä¸‹é™ æ³›å‹å‚æ•°å¯ä»¥æ˜¯E,ä¹Ÿå¯ä»¥æ˜¯Eçš„çˆ¶ç±» 1? super E æŒ‡å®šä¸Šé™ æ³›å‹å‚æ•°å¯ä»¥æ˜¯E,ä¹Ÿå¯ä»¥æ˜¯Eçš„å­ç±» 1? extends E æ³›å‹æ˜¯æ²¡æœ‰å¤šæ€çš„.","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://apelisun.github.io/tags/java/"},{"name":"collection","slug":"collection","permalink":"https://apelisun.github.io/tags/collection/"}]},{"title":"sqlå¸¸ç”¨æŸ¥è¯¢â€˜","slug":"sqlå¸¸ç”¨æŸ¥è¯¢â€˜","date":"2022-08-08T00:30:09.000Z","updated":"2022-08-10T03:51:58.422Z","comments":true,"path":"2022/08/08/sqlå¸¸ç”¨æŸ¥è¯¢â€˜/","link":"","permalink":"https://apelisun.github.io/2022/08/08/sql%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2%E2%80%98/","excerpt":"","text":"SQLæŸ¥è¯¢ç»ƒä¹  æŸ¥è¯¢id=1è¯¾ç¨‹æ¯”id=2è¯¾ç¨‹æˆç»©é«˜çš„å­¦ç”Ÿçš„ä¿¡æ¯[å­¦ç”Ÿidå’Œå­¦ç”Ÿçš„å§“å]åŠè¯¾ç¨‹åˆ†æ•° 1select s.id,s.sname,sc1.score from student s join sc sc1 on s.id=sc1.sid join sc sc2 on sc1.sid=sc2.sid where sc1.cid=1 and sc2.cid=2 and sc1.score &gt;sc2.score; æŸ¥è¯¢åŒæ—¶å­˜åœ¨1 è¯¾ç¨‹å’Œ2è¯¾ç¨‹çš„æƒ…å†µ 1select s.id,s.sname,sc1.score from student s join sc sc1 on s.id=sc1.sid join sc sc2 on sc1.sid=sc2.sid where sc2.cid =2 and sc1.cid=1 ; æŸ¥è¯¢å­˜åœ¨1 è¯¾ç¨‹ä½†å¯èƒ½ä¸å­˜åœ¨2è¯¾ç¨‹çš„æƒ…å†µ 1select s.id,s.sname,sc1.score from student s join sc sc1 on s.id=sc1.sid where sc1.cid=1 ; æŸ¥è¯¢ä¸å­˜åœ¨1è¯¾ç¨‹ä½†å­˜åœ¨2è¯¾ç¨‹çš„æƒ…å†µ (ä¸å­˜åœ¨æ—¶æ˜¾ç¤ºä¸º null) 1select sc2.sid ,sc2.cid ,sc1.score è¯¾ç¨‹1,sc2.score è¯¾ç¨‹2 from (select *from sc where cid=1 ) sc1 RIGHT join (select *from sc where cid=2 ) sc2 on sc1.sid=sc2.sid where sc1.cid is null and sc2.cid=2; æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº 60 åˆ†çš„åŒå­¦çš„å­¦ç”Ÿç¼–å·å’Œå­¦ç”Ÿå§“åå’Œå¹³å‡æˆç»© 1select s.id,s.sname,avg(sc.score) from student s join sc sc on s.id=sc.sid group by s.id having avg(sc.score)&gt;60 ; æŸ¥è¯¢åœ¨ SC è¡¨å­˜åœ¨æˆç»©çš„å­¦ç”Ÿä¿¡æ¯ 1select distinct s.id,s.sname from student s join sc sc on s.id=sc.sid where exists(select 1 from sc where score is not null); æŸ¥è¯¢æ‰€æœ‰åŒå­¦çš„å­¦ç”Ÿç¼–å·ã€å­¦ç”Ÿå§“åã€é€‰è¯¾æ€»æ•°ã€æ‰€æœ‰è¯¾ç¨‹çš„æ€»æˆç»© 1select s.id ,s.sname,count(sc.cid),sum(sc.score) from student s join sc sc where sc.sid=s.id group by s.id; æŸ¥è¯¢ã€Œæã€å§“è€å¸ˆçš„æ•°é‡ æŸ¥è¯¢æè€å¸ˆçš„å¸¦è¿‡çš„å­¦ç”Ÿçš„æ•°é‡/æˆè¯¾çš„æ•°é‡ 123æ–¹æ³•ä¸€.select (select count( c.id) 'æˆè¯¾æ•°' from teacher t join course c on c.tid=t.id join sc sc on sc.cid=c.id where t.tname like 'æ%') æˆè¯¾æ•°,(select count( sc.sid) 'å­¦ç”Ÿæ•°' from teacher t join course c on c.tid=t.id join sc sc on sc.cid=c.id where t.tname like 'æ%') å¸¦è¿‡çš„å­¦ç”Ÿ;select (select count(distinct c.id) 'æˆè¯¾æ•°' from teacher t join course c on c.tid=t.id join sc sc on sc.cid=c.id where t.tname like 'æ%') æˆè¯¾æ•°ï¼›æ–¹æ³•2. select t.tname è€å¸ˆå§“å, count(distinct s.id) å­¦ç”Ÿæ•°é‡,count(sc.cid) æˆè¯¾æ•°é‡ from student s join sc sc on sc.sid=s.id join course c on c.id=sc.cid join teacher t on t.id=c.tid where t.tname like 'æ%' group by t.id; æŸ¥è¯¢å­¦è¿‡ã€Œå¼ ä¸‰ã€è€å¸ˆæˆè¯¾çš„åŒå­¦çš„ä¿¡æ¯ 1234æ–¹æ³•ä¸€.select s.id,s.sname from student s join sc sc on sc.sid=s.id where sc.cid=(select c.id from teacher t left join course c on c.tid=t.id where t.tname='å¼ ä¸‰') æ–¹æ³•äºŒ.select distinct s.* from student s join sc sc on sc.sid=s.id join course c on c.id=sc.cid join teacher t on t.id=c.tid where t.tname='å¼ ä¸‰' ; æŸ¥è¯¢æ²¡æœ‰å­¦å…¨æ‰€æœ‰è¯¾ç¨‹çš„åŒå­¦çš„ä¿¡æ¯ 12select s.id,s.sname from student s join sc sc on sc.sid=s.id GROUP BY s.id HAVING count(*)!=(select count(*) from course); æŸ¥è¯¢è‡³å°‘æœ‰ä¸€é—¨è¯¾ä¸å­¦å·ä¸º1çš„åŒå­¦æ‰€å­¦ç›¸åŒçš„åŒå­¦çš„ä¿¡æ¯ 12select s.id,s.sname from student s join sc sc on sc.sid=s.id where sc.cid in (select sc1.cid from sc sc1 where sc1.sid=1); æŸ¥è¯¢å’Œid=1çš„åŒå­¦å­¦ä¹ çš„è¯¾ç¨‹ å®Œå…¨ç›¸åŒçš„å…¶ä»–åŒå­¦çš„ä¿¡æ¯ï¼ˆé‡è¦ï¼‰ - éå¸¸é‡è¦,éå¸¸é‡è¦,éå¸¸é‡è¦,éå¸¸é‡è¦,éå¸¸é‡è¦! 1select s.id,s.sname,s.age,s.sex from student s where s.id in(select sc.sid from sc where sc.sid&lt;&gt;1 and sc.cid in(select sc.cid from sc where sc.sid=1) group by sc.sid having count(*)=(select count(*) from sc where sc.sid=1)); æŸ¥è¯¢æ²¡å­¦è¿‡â€å¼ ä¸‰â€è€å¸ˆè®²æˆçš„ä»»ä¸€é—¨è¯¾ç¨‹çš„å­¦ç”Ÿå§“å 1select distinct s.id ID ,s.sname å­¦ç”Ÿå§“å from sc sc2 right join student s on s.id= sc2.sid where s.id not in(select sc.sid from sc where sc.cid=( select c.id from teacher t left join course c on c.tid=t.id where t.tname='å¼ ä¸‰')); æŸ¥è¯¢ä¸¤é—¨åŠå…¶ä»¥ä¸Šä¸åŠæ ¼è¯¾ç¨‹çš„åŒå­¦çš„å­¦å·ï¼Œå§“ååŠå…¶å¹³å‡æˆç»© 1select s.sname å§“å,s.id å­¦å·,avg(sc.score) å¹³å‡åˆ† from student s left join sc sc on s.id=sc.sid where sc.score&lt;60 group by s.id having count(*)&gt;=2 ; æ£€ç´¢â€ 01 â€œè¯¾ç¨‹åˆ†æ•°å°äº 60ï¼ŒæŒ‰åˆ†æ•°é™åºæ’åˆ—çš„å­¦ç”Ÿä¿¡æ¯ 1select s.sname å§“å,s.id å­¦å·,sc.score from student s left join sc sc on s.id=sc.sid where sc.score&lt;60 and sc.cid='01' order by 3 desc; æŒ‰å¹³å‡æˆç»©ä»é«˜åˆ°ä½æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿçš„æ‰€æœ‰è¯¾ç¨‹çš„æˆç»©ä»¥åŠå¹³å‡æˆç»© 1select s.id ID,s.sname å§“å,coalesce(sc.cid,'æœªé€‰') è¯¾ç¨‹ç¼–å·, coalesce(sc.score,0) åˆ†æ•°,coalesce((select avg(sc2.score) from sc sc2 where sc2.sid=s.id),0) å¹³å‡åˆ† from student s left join sc sc on s.id=sc.sid order by 5 desc; æŸ¥è¯¢å„ç§‘æˆç»©å‰ä¸‰åçš„è®°å½• 1select s.id id,s.sname å§“å,sc.cid è¯¾ç¨‹å·, sc.score åˆ†æ•° from student s join sc sc on s.id=sc.sid where exists (select 1 from sc sc1 where sc.cid=sc1.cid and sc.score&lt;sc1.score having count(*)&lt;3) order by 4 desc, 3 desc; æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹è¢«é€‰ä¿®çš„å­¦ç”Ÿæ•° 1select c.id è¯¾ç¨‹å·,c.cname è¯¾ç¨‹å,count(sc.sid) å­¦ç”Ÿæ•° from sc right join course c on c.id=sc.cid group by sc.cid; æŸ¥è¯¢å‡ºåªé€‰ä¿®ä¸¤é—¨è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·å’Œå§“å 1select s.id,s.sname from student s join sc sc on sc.sid=s.id group by s.id having count(sc.cid)=2; æŸ¥è¯¢ç”·ç”Ÿã€å¥³ç”Ÿäººæ•° 1select s.sex æ€§åˆ«,count(s.sex) äººæ•° from student s group by s.sex; æŸ¥è¯¢åå­—ä¸­å«æœ‰ã€Œé£ã€å­—çš„å­¦ç”Ÿä¿¡æ¯ 1select * from student s where s.sname like '%é£%'; æŸ¥è¯¢åŒååŒæ€§å­¦ç”Ÿåå•ï¼Œå¹¶ç»Ÿè®¡åŒååŒæ€§äººæ•° 1select * from student s where exists (select 1 from student s2 where s2.sname=s.sname having count(*)&gt;=2); æŸ¥è¯¢ 1990 å¹´å‡ºç”Ÿçš„å­¦ç”Ÿåå• 1select *from student s where year(s.age)=1990; æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹çš„å¹³å‡æˆç»©ï¼Œç»“æœæŒ‰å¹³å‡æˆç»©é™åºæ’åˆ—ï¼Œå¹³å‡æˆç»©ç›¸åŒæ—¶ï¼ŒæŒ‰è¯¾ç¨‹ç¼–å·å‡åºæ’åˆ— 1select c.cname è¯¾ç¨‹å,sc.cid è¯¾ç¨‹id,avg(sc.score) å¹³å‡æˆç»© from course c left join sc sc on sc.cid=c.id group by c.id order by 3 desc,2; æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº 85 çš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·ã€å§“åå’Œå¹³å‡æˆç»© 1select s.id id,s.sname å§“å,coalesce(avg(sc.score),0) å¹³å‡æˆç»© from student s left join sc sc on s.id=sc.sid group by s.id having å¹³å‡æˆç»©&gt;85; æŸ¥è¯¢è¯¾ç¨‹åç§°ä¸ºã€Œæ•°å­¦ã€ï¼Œä¸”åˆ†æ•°ä½äº 60 çš„å­¦ç”Ÿå§“åå’Œåˆ†æ•° 1select s.id id,s.sname å§“å,sc.score åˆ†æ•° from student s join sc sc on s.id=sc.sid join course c on c.id=sc.cid where c.cname='æ•°å­¦' and sc.score&lt;60; æŸ¥è¯¢ä»»ä½•ä¸€é—¨è¯¾ç¨‹æˆç»©åœ¨ 70 åˆ†ä»¥ä¸Šçš„å§“åã€è¯¾ç¨‹åç§°å’Œåˆ†æ•° 1select s.id id,s.sname å§“å ,sc.cid è¯¾ç¨‹å ,sc.score åˆ†æ•° from student s left join sc sc on s.id=sc.sid where sc.score&gt;70; æŸ¥è¯¢å­˜åœ¨ä¸åŠæ ¼çš„è¯¾ç¨‹ 1select sc.cid ,c.cname from sc sc join course c on c.id=sc.cid where sc.score&lt;60 group by sc.cid ; æŸ¥è¯¢è¯¾ç¨‹ç¼–å·ä¸º 01 ä¸”è¯¾ç¨‹æˆç»©åœ¨ 80 åˆ†ä»¥ä¸Šçš„å­¦ç”Ÿçš„å­¦å·å’Œå§“å 1select s.id,s.sname from student s join sc sc on sc.sid=s.id where sc.cid=1 and sc.score&gt;80 group by s.id,s.sname; æ±‚æ¯é—¨è¯¾ç¨‹çš„å­¦ç”Ÿäººæ•° 1select sc.cid ,count(sc.sid) from sc group by sc.cid ; å‡è®¾æˆç»©ä¸é‡å¤ï¼ŒæŸ¥è¯¢é€‰ä¿®ã€Œå¼ ä¸‰ã€è€å¸ˆæ‰€æˆè¯¾ç¨‹çš„å­¦ç”Ÿä¸­ï¼Œæˆç»©æœ€é«˜çš„å­¦ç”Ÿä¿¡æ¯åŠå…¶æˆç»© 1select s.id,s.sname,sc.score from student s join sc on sc.sid=s.id join course c on c.id=sc.cid join teacher t on t.id=c.tid and t.tname ='å¼ ä¸‰' where exists (select * from sc sc2 where sc.cid=sc2.cid and sc.score&lt;sc2.score having count(*)&lt;1) ; å‡è®¾æˆç»©æœ‰é‡å¤çš„æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢é€‰ä¿®ã€Œå¼ ä¸‰ã€è€å¸ˆæ‰€æˆè¯¾ç¨‹çš„å­¦ç”Ÿä¸­ï¼Œæˆç»©æœ€é«˜çš„å­¦ç”Ÿä¿¡æ¯åŠå…¶æˆç»© 1select * from student s join sc on sc.sid=s.id join course c on c.id=sc.cid join teacher t on t.id=c.tid and t.tname ='å¼ ä¸‰' where exists (select * from sc sc2 where sc.cid=sc2.cid and sc.score&gt;=sc2.score having count(*)=(select count(sc3.cid) from sc sc3 where sc3.cid=sc.cid)) ; æŸ¥è¯¢ä¸åŒè¯¾ç¨‹æˆç»©ç›¸åŒçš„å­¦ç”Ÿçš„å­¦ç”Ÿç¼–å·ã€è¯¾ç¨‹ç¼–å·ã€å­¦ç”Ÿæˆç»© 12select s.id,s.sname,sc.cid,sc.score from student s join sc sc on sc.sid=s.id join sc sc2 on sc.sid=sc2.sid where sc.score=sc2.score andsc.cid!=sc2.cid; ç»Ÿè®¡æ¯é—¨è¯¾ç¨‹çš„å­¦ç”Ÿé€‰ä¿®äººæ•°ï¼ˆè¶…è¿‡ 5 äººçš„è¯¾ç¨‹æ‰ç»Ÿè®¡ï¼‰ 1select sc.cid,count(*) from sc group by sc.cid having count(*)&gt;5 æ£€ç´¢è‡³å°‘é€‰ä¿®ä¸¤é—¨è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å· 1select s.id from student s join sc on sc.sid=s.id group by s.id having count(sc.cid)&gt;=2; æŸ¥è¯¢é€‰ä¿®äº†å…¨éƒ¨è¯¾ç¨‹çš„å­¦ç”Ÿä¿¡æ¯ 1select s.id from student s join sc on sc.sid=s.id group by s.id having count(sc.cid)=(select count(c.id) from course c );","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://apelisun.github.io/tags/mysql/"},{"name":"interview","slug":"interview","permalink":"https://apelisun.github.io/tags/interview/"}]}],"categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://apelisun.github.io/tags/mysql/"},{"name":"procedure","slug":"procedure","permalink":"https://apelisun.github.io/tags/procedure/"},{"name":"B+æ ‘","slug":"B-æ ‘","permalink":"https://apelisun.github.io/tags/B-%E6%A0%91/"},{"name":"homework","slug":"homework","permalink":"https://apelisun.github.io/tags/homework/"},{"name":"meet DB","slug":"meet-DB","permalink":"https://apelisun.github.io/tags/meet-DB/"},{"name":"view","slug":"view","permalink":"https://apelisun.github.io/tags/view/"},{"name":"æ•°æ®åº“åŸºç¡€","slug":"æ•°æ®åº“åŸºç¡€","permalink":"https://apelisun.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"name":"index","slug":"index","permalink":"https://apelisun.github.io/tags/index/"},{"name":"msql","slug":"msql","permalink":"https://apelisun.github.io/tags/msql/"},{"name":"area","slug":"area","permalink":"https://apelisun.github.io/tags/area/"},{"name":"java","slug":"java","permalink":"https://apelisun.github.io/tags/java/"},{"name":"collection","slug":"collection","permalink":"https://apelisun.github.io/tags/collection/"},{"name":"interview","slug":"interview","permalink":"https://apelisun.github.io/tags/interview/"}]}